{"version":3,"file":"initializePlugins.js","sources":["../../.build/tinymce/initializePlugins.js","../../node_modules/@typhonjs-tinymce/oembed/src/Settings.js","../../node_modules/@typhonjs-tinymce/oembed/src/core/sanitize.js","../../node_modules/@typhonjs-tinymce/oembed/src/core/Nodes.js","../../node_modules/@typhonjs-tinymce/oembed/src/core/updateHtml.js","../../node_modules/@typhonjs-tinymce/oembed/src/ui/Buttons.js","../../node_modules/@typhonjs-tinymce/oembed/node_modules/@ephox/katamari/lib/main/ts/ephox/katamari/api/Fun.js","../../node_modules/@typhonjs-tinymce/oembed/node_modules/@ephox/katamari/lib/main/ts/ephox/katamari/api/Optional.js","../../node_modules/@typhonjs-tinymce/oembed/node_modules/@ephox/katamari/lib/main/ts/ephox/katamari/api/Obj.js","../../node_modules/@typhonjs-tinymce/oembed/src/core/htmlToData.js","../../node_modules/@typhonjs-tinymce/oembed/src/core/Service.js","../../node_modules/@typhonjs-tinymce/oembed/src/ui/Dialog.js","../../node_modules/@typhonjs-tinymce/oembed/src/Plugin.js","../../node_modules/@typhonjs-tinymce/oembed/src/core/ResolveName.js","../../node_modules/@typhonjs-tinymce/oembed/src/core/FilterContent.js","../../node_modules/@typhonjs-tinymce/oembed/src/core/Selection.js"],"sourcesContent":["let initialized = false;\r\n\r\n/**\r\n * Initializes and loads TinyMCE plugins once upon invocation.\r\n */\r\nexport function initializePlugins()\r\n{\r\n   if (!initialized)\r\n   {\r\n      initialized = true;\r\n      import('./oembed.js');\r\n   }\r\n}","/**\r\n * Please see `./LICENSE` for license details.\r\n */\r\nexport default class Settings\r\n{\r\n   static getDisableFilePoster(editor)\r\n   {\r\n      return editor.getParam('oembed_disable_file_poster', false);\r\n   }\r\n\r\n   static getDisableFileSource(editor)\r\n   {\r\n      return editor.getParam('oembed_disable_file_source', false);\r\n   }\r\n\r\n   static getMediaHeight(editor)\r\n   {\r\n      return editor.getParam('oembed_default_height', 288);\r\n   }\r\n\r\n   static getMediaWidth(editor)\r\n   {\r\n      return editor.getParam('oembed_default_width', 512);\r\n   }\r\n\r\n   static getUrlResolver(editor)\r\n   {\r\n      return editor.getParam('oembed_url_resolver');\r\n   }\r\n\r\n   static hasDimensions(editor)\r\n   {\r\n      return editor.getParam('oembed_dimensions', true);\r\n   }\r\n\r\n   static hasLiveEmbeds(editor)\r\n   {\r\n      return editor.getParam('oembed_live_embeds', true);\r\n   }\r\n\r\n   static hasPoster(editor)\r\n   {\r\n      return editor.getParam('oembed_poster', true);\r\n   }\r\n\r\n   static shouldFilterHtml(editor)\r\n   {\r\n      return editor.getParam('oembed_filter_html', true);\r\n   }\r\n}","/**\r\n * Please see `./LICENSE` for license details.\r\n */\r\nimport Settings from '../Settings.js';\r\n\r\n/**\r\n * @param {import('tinymce').Editor}  editor -\r\n *\r\n * @param {string}  html -\r\n *\r\n * @returns {string} -\r\n */\r\nexport const sanitize = (editor, html) =>\r\n{\r\n   if (Settings.shouldFilterHtml(editor) === false)\r\n   {\r\n      return html;\r\n   }\r\n\r\n   const writer = tinymce.html.Writer();\r\n   let blocked;\r\n\r\n   tinymce.html.SaxParser({\r\n      validate: false,\r\n      allow_conditional_comments: false,\r\n\r\n      comment: (text) =>\r\n      {\r\n         if (!blocked)\r\n         {\r\n            writer.comment(text);\r\n         }\r\n      },\r\n\r\n      cdata: (text) =>\r\n      {\r\n         if (!blocked)\r\n         {\r\n            writer.cdata(text);\r\n         }\r\n      },\r\n\r\n      text: (text, raw) =>\r\n      {\r\n         if (!blocked)\r\n         {\r\n            writer.text(text, raw);\r\n         }\r\n      },\r\n\r\n      start: (name, attrs, empty) =>\r\n      {\r\n         blocked = true;\r\n\r\n         if (name === 'script' || name === 'noscript' || name === 'svg')\r\n         {\r\n            return;\r\n         }\r\n\r\n         for (let i = attrs.length - 1; i >= 0; i--)\r\n         {\r\n            const attrName = attrs[i].name;\r\n\r\n            if (attrName.indexOf('on') === 0)\r\n            {\r\n               delete attrs.map[attrName];\r\n               attrs.splice(i, 1);\r\n            }\r\n\r\n            if (attrName === 'style')\r\n            {\r\n               attrs[i].value = editor.dom.serializeStyle(editor.dom.parseStyle(attrs[i].value), name);\r\n            }\r\n         }\r\n\r\n         writer.start(name, attrs, empty);\r\n         blocked = false;\r\n      },\r\n\r\n      end: (name) =>\r\n      {\r\n         if (blocked)\r\n         {\r\n            return;\r\n         }\r\n\r\n         writer.end(name);\r\n      }\r\n   }, tinymce.html.Schema({})).parse(html);\r\n\r\n   return writer.getContent();\r\n};\r\n","/**\r\n * Please see `./LICENSE` for license details.\r\n */\r\nimport Settings      from '../Settings.js';\r\nimport { sanitize }  from './sanitize.js';\r\n\r\n/**\r\n * Defines a transparent image.\r\n *\r\n * @type {string}\r\n */\r\nconst s_TRANSPARENT_SRC = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';\r\n\r\n/**\r\n * Stores the poster image temporarily to potentially assign as a `data-oembed-poster`.\r\n *\r\n * @type {string}\r\n */\r\nlet s_OEMBED_POSTER;\r\n\r\n/**\r\n *\r\n */\r\nexport default class Nodes\r\n{\r\n   /**\r\n    * @param {import('tinymce').Editor}  editor -\r\n    *\r\n    * @returns {(function(import('tinymce').html.Node[]): void)} -\r\n    */\r\n   static placeHolderConverter(editor)\r\n   {\r\n      return (nodes) =>\r\n      {\r\n         let i = nodes.length;\r\n         let node;\r\n\r\n         while (i--)\r\n         {\r\n            node = nodes[i];\r\n\r\n            if (!node.parent || node.parent.attr('data-mce-object')) { continue; }\r\n\r\n            if (isLiveEmbedNode(node) && Settings.hasLiveEmbeds(editor))\r\n            {\r\n               if (!isWithinEmbedWrapper(node)) { node.replace(createPreviewNode(editor, node)); }\r\n            }\r\n            else\r\n            {\r\n               if (!isWithinEmbedWrapper(node)) { node.replace(createPlaceholderNode(editor, node)); }\r\n            }\r\n         }\r\n      };\r\n   }\r\n\r\n   /**\r\n    * @param {string}  poster -\r\n    */\r\n   static setPoster(poster)\r\n   {\r\n      s_OEMBED_POSTER = poster;\r\n   }\r\n}\r\n\r\n/**\r\n * @param {import('tinymce').Editor}  editor -\r\n *\r\n * @param {string}  nodeName -\r\n *\r\n * @param {import('tinymce').html.Node} previewNode -\r\n *\r\n * @param {string}  html -\r\n */\r\nconst appendNodeContent = (editor, nodeName, previewNode, html) =>\r\n{\r\n   const newNode = tinymce.html.DomParser({ forced_root_block: false, validate: false },\r\n    editor.schema).parse(html, { context: nodeName });\r\n\r\n   while (newNode.firstChild) { previewNode.append(newNode.firstChild); }\r\n};\r\n\r\n/**\r\n * @param {import('tinymce').Editor}  editor -\r\n *\r\n * @param {import('tinymce').html.Node} node -\r\n *\r\n * @returns {import('tinymce').html.Node} -\r\n */\r\nconst createPreviewNode = (editor, node) =>\r\n{\r\n   const name = node.name;\r\n\r\n   if (s_OEMBED_POSTER !== void 0) { node.attr('data-oembed-poster', s_OEMBED_POSTER); }\r\n\r\n   const previewWrapper = new tinymce.html.Node('span', 1);\r\n   previewWrapper.attr({\r\n      contentEditable: 'false',\r\n      style: node.attr('style'),\r\n      'data-mce-object': name,\r\n      class: `mce-preview-object mce-object-${name}`\r\n   });\r\n\r\n   retainAttributesAndInnerHtml(editor, node, previewWrapper);\r\n\r\n   const styles = editor.dom.parseStyle(node.attr('style'));\r\n   const previewNode = new tinymce.html.Node(name, 1);\r\n\r\n   setDimensions(node, previewNode, styles);\r\n\r\n   previewNode.attr({\r\n      src: node.attr('src'),\r\n      style: node.attr('style'),\r\n      class: node.attr('class')\r\n   });\r\n\r\n   if (name === 'iframe')\r\n   {\r\n      previewNode.attr({\r\n         allowfullscreen: node.attr('allowfullscreen'),\r\n         frameborder: '0'\r\n      });\r\n   }\r\n   else\r\n   {\r\n      // Exclude autoplay as we don't want video/audio to play by default\r\n      const attrs = ['controls', 'crossorigin', 'currentTime', 'loop', 'muted', 'poster', 'preload'];\r\n\r\n      for (const attrName of attrs) { previewNode.attr(attrName, node.attr(attrName)); }\r\n\r\n      // Recreate the child nodes using the sanitized inner HTML\r\n      const sanitizedHtml = previewWrapper.attr('data-mce-html');\r\n      if (sanitizedHtml !== null && sanitizedHtml !== void 0)\r\n      {\r\n         appendNodeContent(editor, name, previewNode, sanitizedHtml);\r\n      }\r\n   }\r\n\r\n   const shimNode = new tinymce.html.Node('span', 1);\r\n   shimNode.attr('class', 'mce-shim');\r\n\r\n   previewWrapper.append(previewNode);\r\n   previewWrapper.append(shimNode);\r\n\r\n   return previewWrapper;\r\n};\r\n\r\n/**\r\n * @param {import('tinymce').Editor}  editor -\r\n *\r\n * @param {import('tinymce').html.Node} node -\r\n *\r\n * @returns {import('tinymce').html.Node} -\r\n */\r\nconst createPlaceholderNode = (editor, node) =>\r\n{\r\n   const name = node.name;\r\n\r\n   if (s_OEMBED_POSTER !== void 0) { node.attr('data-oembed-poster', s_OEMBED_POSTER); }\r\n\r\n   const placeHolder = new tinymce.html.Node('img', 1);\r\n   placeHolder.shortEnded = true;\r\n\r\n   retainAttributesAndInnerHtml(editor, node, placeHolder);\r\n\r\n   const poster = node.attr('data-oembed-poster');\r\n\r\n   setDimensions(node, placeHolder, {});\r\n   placeHolder.attr({\r\n      style: node.attr('style'),\r\n      src: poster ? poster : s_TRANSPARENT_SRC,\r\n      'data-mce-object': name,\r\n      class: `mce-object mce-object-${name}`\r\n   });\r\n\r\n   return placeHolder;\r\n};\r\n\r\n/**\r\n * @param {import('tinymce').html.Node} node -\r\n *\r\n * @param {Record<string, string>} styles -\r\n *\r\n * @param {string} dimension -\r\n *\r\n * @param {string|null} defaultValue -\r\n *\r\n * @returns {string|null} -\r\n */\r\nconst getDimension = (node, styles, dimension, defaultValue = null) =>\r\n{\r\n   const value = node.attr(dimension);\r\n\r\n   if (value !== null && value !== void 0)\r\n   {\r\n      return value;\r\n   }\r\n   else if (!Object.hasOwnProperty.call(styles, dimension))\r\n   {\r\n      return defaultValue;\r\n   }\r\n   else\r\n   {\r\n      return null;\r\n   }\r\n};\r\n\r\n/**\r\n * @param {import('tinymce').html.Node} node -\r\n *\r\n * @returns {boolean} -\r\n */\r\nconst isLiveEmbedNode = (node) =>\r\n{\r\n   const name = node.name;\r\n   return name === 'iframe' || name === 'video' || name === 'audio';\r\n};\r\n\r\n/**\r\n * @param {import('tinymce').html.Node} node -\r\n *\r\n * @returns {boolean} -\r\n */\r\nconst isPageEmbedWrapper = (node) =>\r\n{\r\n   const nodeClass = node.attr('class');\r\n   return nodeClass && (/\\btiny-pageembed\\b/).test(nodeClass);\r\n};\r\n\r\n/**\r\n * @param {import('tinymce').html.Node} node -\r\n *\r\n * @returns {boolean} -\r\n */\r\nconst isWithinEmbedWrapper = (node) =>\r\n{\r\n   while ((node = node.parent))\r\n   {\r\n      if (isPageEmbedWrapper(node)) { return true; }\r\n   }\r\n\r\n   return false;\r\n};\r\n\r\n/**\r\n * @param {import('tinymce').Editor}  editor -\r\n *\r\n * @param {import('tinymce').html.Node} sourceNode -\r\n *\r\n * @param {import('tinymce').html.Node} targetNode -\r\n */\r\nconst retainAttributesAndInnerHtml = (editor, sourceNode, targetNode) =>\r\n{\r\n   // Prefix all attributes except width, height and style since we will add these to the placeholder.\r\n   const attribs = sourceNode.attributes;\r\n   let ai = attribs.length;\r\n   while (ai--)\r\n   {\r\n      const attrName = attribs[ai].name;\r\n      let attrValue = attribs[ai].value;\r\n\r\n      if (attrName !== 'width' && attrName !== 'height' && attrName !== 'style')\r\n      {\r\n         if (attrName === 'data' || attrName === 'src')\r\n         {\r\n            attrValue = editor.convertURL(attrValue, attrName);\r\n         }\r\n\r\n         targetNode.attr(`data-mce-p-${attrName}`, attrValue);\r\n      }\r\n   }\r\n\r\n   // Place the inner HTML contents inside an escaped attribute.\r\n   // This enables us to copy/paste the fake object.\r\n   const innerHtml = sourceNode.firstChild && sourceNode.firstChild.value;\r\n   if (innerHtml)\r\n   {\r\n      targetNode.attr('data-mce-html', escape(sanitize(editor, innerHtml)));\r\n      targetNode.firstChild = null;\r\n   }\r\n};\r\n\r\n/**\r\n * @param {import('tinymce').html.Node} node -\r\n *\r\n * @param {import('tinymce').html.Node} previewNode -\r\n *\r\n * @param {Record<string, string>} styles -\r\n */\r\nconst setDimensions = (node, previewNode, styles) =>\r\n{\r\n   // Apply dimensions for video elements to maintain legacy behaviour.\r\n   const useDefaults = previewNode.name === 'img' || node.name === 'video';\r\n\r\n   // Determine the defaults.\r\n   const defaultWidth = useDefaults ? '300' : null;\r\n   const fallbackHeight = node.name === 'audio' ? '30' : '150';\r\n   const defaultHeight = useDefaults ? fallbackHeight : null;\r\n\r\n   previewNode.attr({\r\n      width: getDimension(node, styles, 'width', defaultWidth),\r\n      height: getDimension(node, styles, 'height', defaultHeight)\r\n   });\r\n};\r\n","/**\r\n * Please see `./LICENSE` for license details.\r\n */\r\n\r\n/**\r\n * @param {AttrList}            attrs -\r\n *\r\n * @param {Record<string, any>} updatedAttrs -\r\n */\r\nconst setAttributes = (attrs, updatedAttrs) =>\r\n{\r\n   const props = Object.keys(updatedAttrs);\r\n   for (let k = 0, len = props.length; k < len; k++)\r\n   {\r\n      const name = props[k];\r\n      const val = updatedAttrs[name];\r\n\r\n      const value = `${val}`;\r\n\r\n      if (attrs.map[name])\r\n      {\r\n         let i = attrs.length;\r\n         while (i--)\r\n         {\r\n            const attr = attrs[i];\r\n\r\n            if (attr.name === name)\r\n            {\r\n               if (value)\r\n               {\r\n                  attrs.map[name] = value;\r\n                  attr.value = value;\r\n               }\r\n               else\r\n               {\r\n                  delete attrs.map[name];\r\n                  attrs.splice(i, 1);\r\n               }\r\n            }\r\n         }\r\n      }\r\n      else if (value)\r\n      {\r\n         attrs.push({\r\n            name,\r\n            value\r\n         });\r\n\r\n         attrs.map[name] = value;\r\n      }\r\n   }\r\n};\r\n\r\nconst sources = ['source'];\r\n\r\n/**\r\n * @param {string}              html -\r\n *\r\n * @param {Partial<MediaData>}  data -\r\n *\r\n * @param {boolean}             [updateAll] -\r\n *\r\n * @returns {string} -\r\n */\r\nexport const updateHtml = (html, data, updateAll) =>\r\n{\r\n   const writer = tinymce.html.Writer();\r\n   let sourceCount = 0;\r\n   let hasImage;\r\n\r\n   tinymce.html.SaxParser({\r\n      validate: false,\r\n      allow_conditional_comments: true,\r\n\r\n      comment: (text) =>\r\n      {\r\n         writer.comment(text);\r\n      },\r\n\r\n      cdata: (text) =>\r\n      {\r\n         writer.cdata(text);\r\n      },\r\n\r\n      text: (text, raw) =>\r\n      {\r\n         writer.text(text, raw);\r\n      },\r\n\r\n      start: (name, attrs, empty) =>\r\n      {\r\n         switch (name)\r\n         {\r\n            case 'video':\r\n            case 'object':\r\n            case 'embed':\r\n            case 'img':\r\n            case 'iframe':\r\n               if (data.height !== undefined && data.width !== undefined)\r\n               {\r\n                  setAttributes(attrs, {\r\n                     width: data.width,\r\n                     height: data.height\r\n                  });\r\n               }\r\n               break;\r\n         }\r\n\r\n         if (updateAll)\r\n         {\r\n            switch (name)\r\n            {\r\n               case 'video':\r\n                  setAttributes(attrs, {\r\n                     poster: data.poster,\r\n                     src: ''\r\n                  });\r\n                  break;\r\n\r\n               case 'iframe':\r\n                  setAttributes(attrs, {\r\n                     src: data.source\r\n                  });\r\n                  break;\r\n\r\n               case 'source':\r\n                  if (sourceCount < 2)\r\n                  {\r\n                     setAttributes(attrs, {\r\n                        src: data[sources[sourceCount]],\r\n                        type: data[`${sources[sourceCount]}mime`]\r\n                     });\r\n\r\n                     if (!data[sources[sourceCount]])\r\n                     {\r\n                        return;\r\n                     }\r\n                  }\r\n                  sourceCount++;\r\n                  break;\r\n\r\n               case 'img':\r\n                  if (!data.poster)\r\n                  {\r\n                     return;\r\n                  }\r\n\r\n                  hasImage = true;\r\n                  break;\r\n            }\r\n         }\r\n\r\n         writer.start(name, attrs, empty);\r\n      },\r\n\r\n      end: (name) =>\r\n      {\r\n         if (name === 'video' && updateAll)\r\n         {\r\n            for (let index = 0; index < 2; index++)\r\n            {\r\n               if (data[sources[index]])\r\n               {\r\n\r\n                  /**\r\n                   * An attribute list.\r\n                   *\r\n                   * @type {any}\r\n                   */\r\n                  const attrs = [];\r\n                  attrs.map = {};\r\n\r\n                  if (sourceCount <= index)\r\n                  {\r\n                     setAttributes(attrs, {\r\n                        src: data[sources[index]],\r\n                        type: data[`${sources[index]}mime`]\r\n                     });\r\n\r\n                     writer.start('source', attrs, true);\r\n                  }\r\n               }\r\n            }\r\n         }\r\n\r\n         if (data.poster && name === 'object' && updateAll && !hasImage)\r\n         {\r\n\r\n            /**\r\n             * An attribute list.\r\n             *\r\n             * @type {any}\r\n             */\r\n            const imgAttrs = [];\r\n            imgAttrs.map = {};\r\n\r\n            setAttributes(imgAttrs, {\r\n               src: data.poster,\r\n               width: data.width,\r\n               height: data.height\r\n            });\r\n\r\n            writer.start('img', imgAttrs, true);\r\n         }\r\n\r\n         writer.end(name);\r\n      }\r\n   }, tinymce.html.Schema({})).parse(html);\r\n\r\n   return writer.getContent();\r\n};\r\n","/**\r\n * Please see `./LICENSE` for license details.\r\n */\r\n\r\n/**\r\n *\r\n */\r\nexport default class Buttons\r\n{\r\n   /**\r\n    * @param {import('tinymce').Editor}  editor -\r\n    */\r\n   static register(editor)\r\n   {\r\n      editor.ui.registry.addToggleButton('typhonjs-oembed', {\r\n         tooltip: 'Insert/edit media',\r\n         icon: 'embed',\r\n         onAction: () =>\r\n         {\r\n            editor.execCommand('typhonjsOembed');\r\n         },\r\n         onSetup: stateSelectorAdapter(editor, ['img[data-mce-object]', 'span[data-mce-object]'])\r\n      });\r\n\r\n      editor.ui.registry.addMenuItem('typhonjs-oembed', {\r\n         icon: 'embed',\r\n         text: 'Media...',\r\n         onAction: () =>\r\n         {\r\n            editor.execCommand('typhonjsOembed');\r\n         }\r\n      });\r\n   }\r\n}\r\n\r\n/**\r\n * @param {import('tinymce').Editor}    editor -\r\n *\r\n * @param {string[]}  selector -\r\n *\r\n * @returns {function(import('tinymce').Toolbar.ToolbarToggleButtonInstanceApi): *} -\r\n */\r\nconst stateSelectorAdapter = (editor, selector) => (buttonApi) =>\r\n editor.selection.selectorChangedWithUnbind(selector.join(','), buttonApi.setActive).unbind;\r\n","import * as Type from './Type';\nvar noop = function () { };\nvar noarg = function (f) { return function () { return f(); }; };\n/** Compose a unary function with an n-ary function */\nvar compose = function (fa, fb) {\n    return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return fa(fb.apply(null, args));\n    };\n};\n/** Compose two unary functions. Similar to compose, but avoids using Function.prototype.apply. */\nvar compose1 = function (fbc, fab) { return function (a) {\n    return fbc(fab(a));\n}; };\nvar constant = function (value) {\n    return function () {\n        return value;\n    };\n};\nvar identity = function (x) {\n    return x;\n};\nvar tripleEquals = function (a, b) {\n    return a === b;\n};\n// eslint-disable-next-line prefer-arrow/prefer-arrow-functions\nfunction curry(fn) {\n    var initialArgs = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n    }\n    return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n    };\n}\nvar not = function (f) { return function (t) {\n    return !f(t);\n}; };\nvar die = function (msg) {\n    return function () {\n        throw new Error(msg);\n    };\n};\nvar apply = function (f) {\n    return f();\n};\nvar call = function (f) {\n    f();\n};\nvar never = constant(false);\nvar always = constant(true);\n/* Used to weaken types */\nvar weaken = function (b) { return b; };\nvar pipe = function (a, ab, bc, cd, de, ef, fg, gh) {\n    var b = ab(a);\n    if (Type.isNullable(bc)) {\n        return b;\n    }\n    var c = bc(b);\n    if (Type.isNullable(cd)) {\n        return c;\n    }\n    var d = cd(c);\n    if (Type.isNullable(de)) {\n        return d;\n    }\n    var e = de(d);\n    if (Type.isNullable(ef)) {\n        return e;\n    }\n    var f = ef(e);\n    if (Type.isNullable(fg)) {\n        return f;\n    }\n    var g = fg(f);\n    if (Type.isNullable(gh)) {\n        return g;\n    }\n    return gh(g);\n};\nexport { noop, noarg, compose, compose1, constant, identity, tripleEquals, curry, not, die, apply, call, never, always, weaken, pipe };\n//# sourceMappingURL=Fun.js.map","import * as Fun from './Fun';\nvar none = function () { return NONE; };\nvar NONE = (function () {\n    // inlined from peanut, maybe a micro-optimisation?\n    var call = function (thunk) { return thunk(); };\n    var id = Fun.identity;\n    var me = {\n        fold: function (n, _s) { return n(); },\n        isSome: Fun.never,\n        isNone: Fun.always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n            throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: Fun.constant(null),\n        getOrUndefined: Fun.constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: Fun.noop,\n        bind: none,\n        exists: Fun.never,\n        forall: Fun.always,\n        filter: function () { return none(); },\n        toArray: function () { return []; },\n        toString: Fun.constant('none()')\n    };\n    return me;\n})();\nvar some = function (a) {\n    var constant_a = Fun.constant(a);\n    var self = function () {\n        // can't Fun.constant this one\n        return me;\n    };\n    var bind = function (f) {\n        return f(a);\n    };\n    var me = {\n        fold: function (n, s) { return s(a); },\n        isSome: Fun.always,\n        isNone: Fun.never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) { return some(f(a)); },\n        each: function (f) {\n            f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) { return f(a) ? me : NONE; },\n        toArray: function () { return [a]; },\n        toString: function () { return 'some(' + a + ')'; }\n    };\n    return me;\n};\nvar from = function (value) { return value === null || value === undefined ? NONE : some(value); };\nexport var Optional = {\n    some: some,\n    none: none,\n    from: from\n};\n//# sourceMappingURL=Optional.js.map","import { Eq } from '@ephox/dispute';\nimport * as Fun from './Fun';\nimport { Optional } from './Optional';\n// There are many variations of Object iteration that are faster than the 'for-in' style:\n// http://jsperf.com/object-keys-iteration/107\n//\n// Use the native keys if it is available (IE9+), otherwise fall back to manually filtering\nexport var keys = Object.keys;\n// eslint-disable-next-line @typescript-eslint/unbound-method\nexport var hasOwnProperty = Object.hasOwnProperty;\nexport var each = function (obj, f) {\n    var props = keys(obj);\n    for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n    }\n};\nexport var map = function (obj, f) {\n    return tupleMap(obj, function (x, i) { return ({\n        k: i,\n        v: f(x, i)\n    }); });\n};\nexport var tupleMap = function (obj, f) {\n    var r = {};\n    each(obj, function (x, i) {\n        var tuple = f(x, i);\n        r[tuple.k] = tuple.v;\n    });\n    return r;\n};\nvar objAcc = function (r) { return function (x, i) {\n    r[i] = x;\n}; };\nvar internalFilter = function (obj, pred, onTrue, onFalse) {\n    var r = {};\n    each(obj, function (x, i) {\n        (pred(x, i) ? onTrue : onFalse)(x, i);\n    });\n    return r;\n};\nexport var bifilter = function (obj, pred) {\n    var t = {};\n    var f = {};\n    internalFilter(obj, pred, objAcc(t), objAcc(f));\n    return { t: t, f: f };\n};\nexport var filter = function (obj, pred) {\n    var t = {};\n    internalFilter(obj, pred, objAcc(t), Fun.noop);\n    return t;\n};\nexport var mapToArray = function (obj, f) {\n    var r = [];\n    each(obj, function (value, name) {\n        r.push(f(value, name));\n    });\n    return r;\n};\nexport var find = function (obj, pred) {\n    var props = keys(obj);\n    for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        if (pred(x, i, obj)) {\n            return Optional.some(x);\n        }\n    }\n    return Optional.none();\n};\nexport var values = function (obj) {\n    return mapToArray(obj, Fun.identity);\n};\nexport var size = function (obj) {\n    return keys(obj).length;\n};\nexport var get = function (obj, key) {\n    return has(obj, key) ? Optional.from(obj[key]) : Optional.none();\n};\nexport var has = function (obj, key) {\n    return hasOwnProperty.call(obj, key);\n};\nexport var hasNonNullableKey = function (obj, key) {\n    return has(obj, key) && obj[key] !== undefined && obj[key] !== null;\n};\nexport var isEmpty = function (r) {\n    for (var x in r) {\n        if (hasOwnProperty.call(r, x)) {\n            return false;\n        }\n    }\n    return true;\n};\nexport var equal = function (a1, a2, eq) {\n    if (eq === void 0) { eq = Eq.eqAny; }\n    return Eq.eqRecord(eq).eq(a1, a2);\n};\n//# sourceMappingURL=Obj.js.map","/**\r\n * Please see `./LICENSE` for license details.\r\n */\r\n\r\n/**\r\n * @param {string}   html -\r\n *\r\n * @returns {MediaData} -\r\n */\r\nexport const htmlToData = (html) =>\r\n{\r\n   let data = {};\r\n\r\n   tinymce.html.SaxParser({\r\n      validate: false,\r\n      allow_conditional_comments: true,\r\n      start: (name, attrs) =>\r\n      {\r\n         if (!data.source && name === 'param')\r\n         {\r\n            data.source = attrs.map.movie;\r\n         }\r\n\r\n         if (name === 'iframe' || name === 'object' || name === 'embed' || name === 'video' || name === 'audio')\r\n         {\r\n            if (!data.type)\r\n            {\r\n               data.type = name;\r\n            }\r\n\r\n            data = Object.assign({}, attrs.map, data);\r\n         }\r\n\r\n         if (name === 'source')\r\n         {\r\n            if (!data.source)\r\n            {\r\n               data.source = attrs.map.src;\r\n            }\r\n         }\r\n\r\n         if (name === 'img' && !data.poster)\r\n         {\r\n            data.poster = attrs.map.src;\r\n         }\r\n\r\n         if (attrs.map['data-oembed-poster'] !== void 0)\r\n         {\r\n            data.poster = attrs.map['data-oembed-poster'];\r\n         }\r\n      }\r\n   }).parse(html);\r\n\r\n   data.source = data.source || data.src || data.data;\r\n   data.poster = data.poster || '';\r\n\r\n   return data;\r\n};","/**\r\n * Please see `./LICENSE` for license details.\r\n */\r\nimport Settings from '../Settings.js';\r\n\r\n/**\r\n * @type {Map<string, EmbedData>}\r\n */\r\nconst s_CACHE = new Map();\r\n\r\n/**\r\n * Currently supports Vimeo / YouTube.\r\n *\r\n * @type {OEmbedService[]}\r\n */\r\nconst s_SERVICES = [\r\n   {\r\n      name: 'Vimeo',\r\n      regex: /^(https:\\/\\/vimeo.com\\/(.*)|https:\\/\\/vimeo.com\\/album\\/(.*)\\/video\\/(.*)|https:\\/\\/vimeo.com\\/channels\\/(.*)\\/(.*)|https:\\/\\/vimeo.com\\/groups\\/(.*)\\/videos\\/(.*)|https:\\/\\/vimeo.com\\/ondemand\\/(.*)\\/(.*)|https:\\/\\/player.vimeo.com\\/video\\/(.*))/,\r\n      url: (url, maxwidth, maxheight) => `https://vimeo.com/api/oembed.json?url=${url}&maxwidth=${maxwidth}&maxheight=${maxheight}`\r\n   },\r\n   {\r\n      name: 'YouTube',\r\n      regex: /^(https:\\/\\/(.*).youtube.com\\/watch(.*)|https:\\/\\/(.*).youtube.com\\/v\\/(.*)|https:\\/\\/youtu.be\\/(.*)|https:\\/\\/(.*).youtube.com\\/playlist?list=(.*))/,\r\n      url: (url, maxwidth, maxheight) => `https://www.youtube.com/oembed?url=${url}&format=json&maxwidth=${maxwidth}&maxheight=${maxheight}`\r\n   }\r\n];\r\n\r\n/**\r\n *\r\n */\r\nexport default class Service\r\n{\r\n   /**\r\n    * @param {import('tinymce').Editor}    editor -\r\n    *\r\n    * @param {MediaData} data -\r\n    *\r\n    * @returns {Promise<EmbedData>} -\r\n    */\r\n   static async getEmbedHtml(editor, data)\r\n   {\r\n      let response;\r\n\r\n      if (s_CACHE.has(data.source))\r\n      {\r\n         return s_CACHE.get(data.source);\r\n      }\r\n\r\n      const embedHandler = Settings.getUrlResolver(editor);\r\n\r\n      if (embedHandler)\r\n      {\r\n         try\r\n         {\r\n            const handlerResponse = await embedHandler({ url: data.source });\r\n            response = { url: data.source, html: handlerResponse.html, poster: handlerResponse.poster };\r\n         }\r\n         catch (err)\r\n         {\r\n            const message = err.msg || err.message || 'Unknown error.';\r\n            editor.notificationManager.open({ type: 'error', text: `Media embed error: ${message}` });\r\n\r\n            return void 0;\r\n         }\r\n      }\r\n      else\r\n      {\r\n         let oembedName;\r\n         let oembedUrl;\r\n\r\n         const maxwidth = Settings.getMediaWidth(editor);\r\n         const maxheight = Settings.getMediaHeight(editor);\r\n\r\n         for (const service of s_SERVICES)\r\n         {\r\n            if (service.regex.exec(data.source))\r\n            {\r\n               oembedUrl = service.url(data.source, maxwidth, maxheight);\r\n               oembedName = service.name;\r\n            }\r\n         }\r\n\r\n         if (oembedUrl === void 0)\r\n         {\r\n            editor.notificationManager.open({\r\n               type: 'error',\r\n               text: 'Media embed error: URL did not match any providers available.'\r\n            });\r\n            return void 0;\r\n         }\r\n\r\n         // Fetch the embed URL from YouTube.\r\n         const remoteResponse = await window.fetch(oembedUrl);\r\n\r\n         if (!remoteResponse || remoteResponse.status !== 200)\r\n         {\r\n            editor.notificationManager.open({\r\n               type: 'error',\r\n               text: `Media embed error: Could not fetch ${oembedName} embed URL.`\r\n            });\r\n            return void 0;\r\n         }\r\n\r\n         const json = await remoteResponse.json();\r\n\r\n         if (json.html === void 0)\r\n         {\r\n            const message = json.error ? json.error : `Could not fetch ${oembedName} embed URL.`;\r\n\r\n            editor.notificationManager.open({\r\n               type: 'error',\r\n               text: `Media embed error: ${message}`\r\n            });\r\n            return void 0;\r\n         }\r\n\r\n         response = { url: data.source, html: json.html, poster: json.thumbnail_url };\r\n      }\r\n\r\n      s_CACHE.set(data.source, response);\r\n\r\n      return response;\r\n   }\r\n\r\n   /**\r\n    * @param {string} url -\r\n    *\r\n    * @returns {boolean} URL is cached.\r\n    */\r\n   static isCached(url)\r\n   {\r\n      return s_CACHE.has(url);\r\n   }\r\n}\r\n","/**\r\n * Please see `./LICENSE` for license details.\r\n */\r\nimport { Obj, Optional }   from '@ephox/katamari';\r\n\r\nimport { htmlToData }      from '../core/htmlToData.js';\r\nimport Nodes               from '../core/Nodes.js';\r\nimport Service             from '../core/Service.js';\r\nimport { updateHtml }      from '../core/updateHtml.js';\r\nimport Settings            from '../Settings.js';\r\n\r\n/**\r\n *\r\n */\r\nexport default class Dialog\r\n{\r\n   /**\r\n    * @param {import('tinymce').Editor}  editor -\r\n    */\r\n   static showDialog(editor)\r\n   {\r\n      const editorData = getEditorData(editor);\r\n\r\n      let currentData = editorData;\r\n      const initialData = wrap(editorData);\r\n\r\n      const disableFilePoster = Settings.getDisableFilePoster(editor);\r\n      const disableFileSource = Settings.getDisableFileSource(editor);\r\n\r\n      const items = [];\r\n\r\n      // mediaInput - Dialog.UrlInputSpec\r\n      items.push({\r\n         name: 'source',\r\n         type: 'urlinput',\r\n         filetype: !disableFileSource ? 'media' : void 0,\r\n         label: 'Source'\r\n      });\r\n\r\n      // sizeInput - Dialog.SizeInputSpec\r\n      if (Settings.hasDimensions(editor))\r\n      {\r\n         items.push({\r\n            type: 'sizeinput',\r\n            name: 'dimensions',\r\n            label: 'Constrain proportions',\r\n            constrain: true\r\n         });\r\n      }\r\n\r\n      // mediaPoster - Dialog.UrlInputSpec\r\n      items.push({\r\n         name: 'poster',\r\n         type: 'urlinput',\r\n         filetype: !disableFilePoster ? 'image' : void 0,\r\n         label: 'Media poster (Image URL)'\r\n      });\r\n\r\n      // embedTextarea - Dialog.TextAreaSpec\r\n      items.push({\r\n         name: 'embed',\r\n         type: 'textarea',\r\n         label: 'Generated Embed:',\r\n         disabled: true\r\n      });\r\n\r\n      /**\r\n       * @type {import('tinymce').Dialog.PanelSpec}\r\n       */\r\n      const body = {\r\n         type: 'panel',\r\n         items\r\n      };\r\n\r\n      editor.windowManager.open({\r\n         title: 'Insert/Edit Media (oEmbed)',\r\n         size: 'normal',\r\n\r\n         body,\r\n         buttons: [\r\n            {\r\n               type: 'cancel',\r\n               name: 'cancel',\r\n               text: 'Cancel'\r\n            },\r\n            {\r\n               type: 'submit',\r\n               name: 'save',\r\n               text: 'Save',\r\n               primary: true\r\n            }\r\n         ],\r\n         onSubmit: async (api) =>\r\n         {\r\n            const serviceData = Dialog.unwrap(api.getData());\r\n            await submitForm(currentData, serviceData, editor);\r\n            api.close();\r\n         },\r\n         onChange: async (api, detail) =>\r\n         {\r\n            try\r\n            {\r\n               switch (detail.name)\r\n               {\r\n                  case 'source':\r\n                     await handleSource(currentData, api, editor);\r\n                     break;\r\n\r\n                  case 'embed':\r\n                     handleEmbed(api, editor);\r\n                     break;\r\n\r\n                  case 'dimensions':\r\n                  case 'poster':\r\n                     handleUpdate(api, detail.name);\r\n                     break;\r\n\r\n                  default:\r\n                     break;\r\n               }\r\n               currentData = Dialog.unwrap(api.getData());\r\n            }\r\n            catch (err)\r\n            {\r\n               console.log(err);\r\n            }\r\n         },\r\n         initialData\r\n      }, void 0);\r\n   }\r\n\r\n   /**\r\n    * @param {MediaDialogData}       data -\r\n    *\r\n    * @param {keyof MediaDialogData} [sourceInput] -\r\n    *\r\n    * @returns {MediaData} -\r\n    */\r\n   static unwrap(data, sourceInput)\r\n   {\r\n      const metaData = sourceInput ? extractMeta(sourceInput, data).getOr({}) : {};\r\n      const get = getValue(data, metaData, sourceInput);\r\n      return {\r\n         ...get('source'),\r\n         ...get('poster'),\r\n         ...get('embed'),\r\n         ...getDimensions(data, metaData)\r\n      };\r\n   }\r\n}\r\n\r\n/**\r\n * @type {('width' | 'height')[]}\r\n */\r\nconst s_DIMENSION_ATTR = ['width', 'height'];\r\n\r\n/**\r\n * @param {{ url: string; html: string; poster: string }} response -\r\n *\r\n * @param {import('tinymce').Dialog.DialogInstanceApi<MediaDialogData>}     api -\r\n *\r\n * @param {Editor}  editor -\r\n */\r\nconst addEmbedHtml = (response, api, editor) =>\r\n{\r\n   // Only set values if a URL has been defined\r\n   if (typeof response.url === 'string' && response.url.trim().length > 0)\r\n   {\r\n      const html = response.html;\r\n      const snippetData = snippetToData(editor, html);\r\n\r\n      /**\r\n       * @type {MediaData}\r\n       */\r\n      const nuData = {\r\n         ...snippetData,\r\n         source: response.url,\r\n         embed: html,\r\n         poster: response.poster\r\n      };\r\n\r\n      api.setData(wrap(nuData));\r\n   }\r\n};\r\n\r\n/**\r\n * Note: mainData is DialogSubData\r\n *\r\n * @param {keyof MediaDialogData} sourceInput -\r\n *\r\n * @param {MediaDialogData}       data -\r\n *\r\n * @returns {Optional<Record<string, string>>} -\r\n */\r\nconst extractMeta = (sourceInput, data) => Obj.get(data, sourceInput).bind((mainData) => Obj.get(mainData, 'meta'));\r\n\r\n/**\r\n * @param {MediaDialogData}         data -\r\n *\r\n * @param {Record<string, string>}  metaData -\r\n *\r\n * @returns {{}} -\r\n */\r\nconst getDimensions = (data, metaData) =>\r\n{\r\n   const dimensions = {};\r\n   Obj.get(data, 'dimensions').each((dims) =>\r\n   {\r\n      for (const prop of s_DIMENSION_ATTR)\r\n      {\r\n         Obj.get(metaData, prop).orThunk(() => Obj.get(dims, prop)).each((value) => dimensions[prop] = value);\r\n      }\r\n   });\r\n   return dimensions;\r\n};\r\n\r\n/**\r\n * @param {import('tinymce').Editor} editor -\r\n *\r\n * @returns {MediaData} -\r\n */\r\nconst getEditorData = (editor) =>\r\n{\r\n   const element = editor.selection.getNode();\r\n   const snippet = isMediaElement(element) ? editor.serializer.serialize(element, { selection: true }) : '';\r\n   return {\r\n      embed: snippet,\r\n      ...htmlToData(snippet)\r\n   };\r\n};\r\n\r\n/**\r\n * @param {MediaDialogData}         data -\r\n *\r\n * @param {Record<string, string>}  metaData -\r\n *\r\n * @param {keyof MediaDialogData}   [sourceInput] -\r\n *\r\n * @returns {Function} {function(prop: keyof MediaDialogData): Record<string, string>}\r\n */\r\nconst getValue = (data, metaData, sourceInput) => (prop) =>\r\n{\r\n   // Cases:\r\n   // 1. Get the nested value prop (component is the executed urlinput)\r\n   // 2. Get from metadata (a urlinput was executed but urlinput != this component)\r\n   // 3. Not a urlinput so just get string\r\n   // If prop === sourceInput do 1, 2 then 3, else do 2 then 1 or 3\r\n   // ASSUMPTION: we only want to get values for props that already exist in data\r\n\r\n   /**\r\n    * @returns {Optional<string | Record<string, string> | DialogSubData>} -\r\n    */\r\n   const getFromData = () => Obj.get(data, prop);\r\n\r\n   /**\r\n    * @returns {Optional<string>} -\r\n    */\r\n   const getFromMetaData = () => Obj.get(metaData, prop);\r\n\r\n   /**\r\n    * Note v: string\r\n    *\r\n    * @param {Record<string, string>} c -\r\n    *\r\n    * @returns {Optional<string>} -\r\n    */\r\n   const getNonEmptyValue = (c) => Obj.get(c, 'value').bind((v) => v.length > 0 ? Optional.some(v) : Optional.none());\r\n\r\n   /**\r\n    * @returns {Optional<string>} -\r\n    */\r\n   const getFromValueFirst = () => getFromData().bind((child) => typeof child === 'object' ?\r\n    getNonEmptyValue(child).orThunk(getFromMetaData) : // as Record<string, string>\r\n     getFromMetaData().orThunk(() => Optional.from(child))); // as string\r\n\r\n   /**\r\n    * @returns {Optional<string>} -\r\n    */\r\n   const getFromMetaFirst = () => getFromMetaData().orThunk(() =>\r\n    getFromData().bind((child) => typeof child === 'object' ?\r\n     getNonEmptyValue(child) :   // as Record<string, string>\r\n      Optional.from(child)));    // as string\r\n\r\n   return { [prop]: (prop === sourceInput ? getFromValueFirst() : getFromMetaFirst()).getOr('') };\r\n};\r\n\r\n/**\r\n * @param {MediaData} prevData -\r\n *\r\n * @param {import('tinymce').Dialog.DialogInstanceApi<MediaDialogData>} api -\r\n *\r\n * @param {import('tinymce').Editor} editor -\r\n *\r\n * @returns {Promise<void>} -\r\n */\r\nconst handleSource = async (prevData, api, editor) =>\r\n{\r\n   const serviceData = Dialog.unwrap(api.getData(), 'source');\r\n\r\n   // If a new URL is entered, then clear the embed html and fetch the new data\r\n   if (prevData.source !== serviceData.source)\r\n   {\r\n      addEmbedHtml({ url: serviceData.source, html: '', poster: '' }, api, editor);\r\n\r\n      const response = await Service.getEmbedHtml(editor, serviceData);\r\n      if (response)\r\n      {\r\n         addEmbedHtml(response, api, editor);\r\n      }\r\n   }\r\n};\r\n\r\n/**\r\n * @param {import('tinymce').Dialog.DialogInstanceApi<MediaDialogData>} api -\r\n *\r\n * @param {import('tinymce').Editor} editor -\r\n */\r\nconst handleEmbed = (api, editor) =>\r\n{\r\n   const data = Dialog.unwrap(api.getData());\r\n   const dataFromEmbed = snippetToData(editor, data.embed);\r\n   api.setData(wrap(dataFromEmbed));\r\n};\r\n\r\n/**\r\n * @param {import('tinymce').Dialog.DialogInstanceApi<MediaDialogData>} api -\r\n *\r\n * @param {keyof MediaDialogData} sourceInput -\r\n */\r\nconst handleUpdate = (api, sourceInput) =>\r\n{\r\n   const data = Dialog.unwrap(api.getData(), sourceInput);\r\n   const embed = data.embed ? updateHtml(data.embed, data, false) : '';\r\n   api.setData(wrap({ ...data, embed }));\r\n};\r\n\r\n/**\r\n * @param {import('tinymce').Editor} editor -\r\n *\r\n * @param {string} html -\r\n *\r\n * @param {MediaData} data -\r\n */\r\nconst handleInsert = (editor, html, data) =>\r\n{\r\n   const beforeObjects = editor.dom.select('*[data-mce-object]');\r\n\r\n   Nodes.setPoster(data.poster);\r\n\r\n   editor.insertContent(html);\r\n\r\n   Nodes.setPoster(void 0);\r\n\r\n   const element = selectPlaceholder(editor, beforeObjects);\r\n\r\n   element.dataset.oembedPoster = data.poster;\r\n\r\n   editor.nodeChanged();\r\n};\r\n\r\n/**\r\n * @param {Element} element -\r\n *\r\n * @returns {string} -\r\n */\r\nconst isMediaElement = (element) => element.getAttribute('data-mce-object');\r\n\r\n/**\r\n *\r\n * @param {import('tinymce').Editor} editor -\r\n *\r\n * @param {HTMLElement[]} beforeObjects -\r\n *\r\n * @returns {HTMLElement} -\r\n */\r\nconst selectPlaceholder = (editor, beforeObjects) =>\r\n{\r\n   /**\r\n    * @type {HTMLElement[]}\r\n    */\r\n   const afterObjects = editor.dom.select('*[data-mce-object]');\r\n\r\n   // Find new image placeholder so we can select it\r\n   for (let i = 0; i < beforeObjects.length; i++)\r\n   {\r\n      for (let y = afterObjects.length - 1; y >= 0; y--)\r\n      {\r\n         if (beforeObjects[i] === afterObjects[y])\r\n         {\r\n            afterObjects.splice(y, 1);\r\n         }\r\n      }\r\n   }\r\n\r\n   editor.selection.select(afterObjects[0]);\r\n\r\n   return afterObjects[0];\r\n};\r\n\r\n/**\r\n * @param {import('tinymce').Editor}  editor -\r\n *\r\n * @param {string}  embedSnippet -\r\n *\r\n * @returns {MediaData} -\r\n */\r\nconst snippetToData = (editor, embedSnippet) => htmlToData(embedSnippet);\r\n\r\n/**\r\n * @param {MediaData} prevData -\r\n *\r\n * @param {MediaData} newData -\r\n *\r\n * @param {import('tinymce').Editor}    editor -\r\n *\r\n * @returns {Promise<void>} -\r\n */\r\nconst submitForm = async (prevData, newData, editor) =>\r\n{\r\n   newData.embed = updateHtml(newData.embed, newData);\r\n\r\n   // Only fetch the embed HTML content if the URL has changed from what it previously was\r\n   if (newData.embed && (prevData.source === newData.source || Service.isCached(newData.source)))\r\n   {\r\n      handleInsert(editor, newData.embed, newData);\r\n   }\r\n   else\r\n   {\r\n      const response = await Service.getEmbedHtml(editor, newData);\r\n      if (response)\r\n      {\r\n         handleInsert(editor, response.html, newData);\r\n      }\r\n   }\r\n};\r\n\r\n/**\r\n * @param {MediaData} data -\r\n *\r\n * @returns {MediaDialogData} -\r\n */\r\nconst wrap = (data) =>\r\n{\r\n   /**\r\n    * @type {MediaDialogData}\r\n    */\r\n   const wrapped = {\r\n      ...data,\r\n      source: { value: Obj.get(data, 'source').getOr('') },\r\n      poster: { value: Obj.get(data, 'poster').getOr('') }\r\n   };\r\n\r\n   // Add additional size values that may or may not have been in the html\r\n   for (const prop of s_DIMENSION_ATTR)\r\n   {\r\n      Obj.get(data, prop).each((value) =>\r\n      {\r\n         const dimensions = wrapped.dimensions || {};\r\n         dimensions[prop] = value;\r\n         wrapped.dimensions = dimensions;\r\n      });\r\n   }\r\n\r\n   return wrapped;\r\n};\r\n","/**\r\n * Please see `./LICENSE` for license details.\r\n */\r\nimport FilterContent from './core/FilterContent.js';\r\nimport ResolveName   from './core/ResolveName.js';\r\nimport Selection     from './core/Selection.js';\r\nimport Buttons       from './ui/Buttons.js';\r\nimport Dialog        from './ui/Dialog.js';\r\n\r\nexport class PluginOembed\r\n{\r\n   constructor(editor)\r\n   {\r\n      editor.addCommand('typhonjsOembed', () => Dialog.showDialog(editor));\r\n      Buttons.register(editor);\r\n      ResolveName.setup(editor);\r\n      FilterContent.setup(editor);\r\n      Selection.setup(editor);\r\n   }\r\n\r\n   getMetadata()\r\n   {\r\n      return {\r\n         name: 'TyphonJS oEmbed',\r\n         url: 'https://github.com/typhonjs-tinymce/oembed'\r\n      };\r\n   }\r\n}\r\n\r\nexport default () =>\r\n{\r\n   tinymce.PluginManager.add('typhonjs-oembed', PluginOembed);\r\n};\r\n","/**\r\n * Please see `./LICENSE` for license details.\r\n */\r\n\r\n/**\r\n *\r\n */\r\nexport default class ResolveName\r\n{\r\n   /**\r\n    * @param {import('tinymce').Editor}  editor -\r\n    */\r\n   static setup(editor)\r\n   {\r\n      editor.on('ResolveName', (e) =>\r\n      {\r\n         let name;\r\n\r\n         if (e.target.nodeType === 1 && (name = e.target.getAttribute('data-mce-object')))\r\n         {\r\n            e.name = name;\r\n         }\r\n      });\r\n   }\r\n}\r\n","/**\r\n * Please see `./LICENSE` for license details.\r\n */\r\nimport Nodes         from './Nodes.js';\r\nimport { sanitize }  from './sanitize.js';\r\n\r\n/**\r\n *\r\n */\r\nexport default class FilterContent\r\n{\r\n   /**\r\n    * @param {import('tinymce').Editor}  editor -\r\n    */\r\n   static setup(editor)\r\n   {\r\n      editor.on('preInit', () =>\r\n      {\r\n         // Converts iframe, video etc into placeholder images\r\n         editor.parser.addNodeFilter('iframe,video,audio,object,embed', Nodes.placeHolderConverter(editor));\r\n\r\n         // Replaces placeholder images with real elements for video, object, iframe etc\r\n         editor.serializer.addAttributeFilter('data-mce-object', (nodes, name) =>\r\n         {\r\n            let i = nodes.length;\r\n            let node;\r\n            let realElm;\r\n            let ai;\r\n            let attribs;\r\n            let innerHtml;\r\n            let innerNode;\r\n            let realElmName;\r\n            let className;\r\n\r\n            while (i--)\r\n            {\r\n               node = nodes[i];\r\n               if (!node.parent) { continue; }\r\n\r\n               realElmName = node.attr(name);\r\n               realElm = new tinymce.html.Node(realElmName, 1);\r\n\r\n               // Add width/height to everything but audio\r\n               // if (realElmName !== 'audio' && realElmName !== 'script') {\r\n               if (realElmName !== 'audio')\r\n               {\r\n                  className = node.attr('class');\r\n                  if (className && className.indexOf('mce-preview-object') !== -1)\r\n                  {\r\n                     realElm.attr({\r\n                        width: node.firstChild.attr('width'),\r\n                        height: node.firstChild.attr('height')\r\n                     });\r\n                  }\r\n                  else\r\n                  {\r\n                     realElm.attr({\r\n                        width: node.attr('width'),\r\n                        height: node.attr('height')\r\n                     });\r\n                  }\r\n               }\r\n\r\n               realElm.attr({\r\n                  style: node.attr('style')\r\n               });\r\n\r\n               // Unprefix all placeholder attributes\r\n               attribs = node.attributes;\r\n               ai = attribs.length;\r\n               while (ai--)\r\n               {\r\n                  const attrName = attribs[ai].name;\r\n\r\n                  if (attrName.indexOf('data-mce-p-') === 0)\r\n                  {\r\n                     realElm.attr(attrName.substr(11), attribs[ai].value);\r\n                  }\r\n               }\r\n\r\n               // Inject innerhtml\r\n               innerHtml = node.attr('data-mce-html');\r\n               if (innerHtml)\r\n               {\r\n                  innerNode = new tinymce.html.Node('#text', 3);\r\n                  innerNode.raw = true;\r\n                  innerNode.value = sanitize(editor, unescape(innerHtml));\r\n                  realElm.append(innerNode);\r\n               }\r\n\r\n               node.replace(realElm);\r\n            }\r\n         });\r\n      });\r\n   }\r\n}\r\n","/**\r\n * Please see `./LICENSE` for license details.\r\n */\r\nimport { updateHtml } from './updateHtml.js';\r\n\r\n/**\r\n *\r\n */\r\nexport default class Selection\r\n{\r\n   /**\r\n    * @param {import('tinymce').Editor}  editor -\r\n    */\r\n   static setup(editor)\r\n   {\r\n      editor.on('click keyup touchend', () =>\r\n      {\r\n         const selectedNode = editor.selection.getNode();\r\n\r\n         if (selectedNode && editor.dom.hasClass(selectedNode, 'mce-preview-object'))\r\n         {\r\n            if (editor.dom.getAttrib(selectedNode, 'data-mce-selected'))\r\n            {\r\n               selectedNode.setAttribute('data-mce-selected', '2');\r\n            }\r\n         }\r\n      });\r\n\r\n      editor.on('ObjectSelected', (e) =>\r\n      {\r\n         const objectType = e.target.getAttribute('data-mce-object');\r\n\r\n         if (objectType === 'script')\r\n         {\r\n            e.preventDefault();\r\n         }\r\n      });\r\n\r\n      editor.on('ObjectResized', (e) =>\r\n      {\r\n         const target = e.target;\r\n         let html;\r\n\r\n         if (target.getAttribute('data-mce-object'))\r\n         {\r\n            html = target.getAttribute('data-mce-html');\r\n            if (html)\r\n            {\r\n               html = unescape(html);\r\n               target.setAttribute('data-mce-html', escape(updateHtml(html, {\r\n                  width: String(e.width),\r\n                  height: String(e.height)\r\n               })));\r\n            }\r\n         }\r\n      });\r\n   }\r\n}\r\n\r\n"],"names":["Settings","static","editor","getParam","sanitize","html","shouldFilterHtml","writer","tinymce","Writer","blocked","SaxParser","validate","allow_conditional_comments","comment","text","cdata","raw","start","name","attrs","empty","i","length","attrName","indexOf","map","splice","value","dom","serializeStyle","parseStyle","end","Schema","parse","getContent","s_OEMBED_POSTER","Nodes","nodes","node","parent","attr","isLiveEmbedNode","hasLiveEmbeds","isWithinEmbedWrapper","replace","createPreviewNode","createPlaceholderNode","poster","previewWrapper","Node","contentEditable","style","class","retainAttributesAndInnerHtml","styles","previewNode","setDimensions","src","allowfullscreen","frameborder","sanitizedHtml","nodeName","newNode","DomParser","forced_root_block","schema","context","firstChild","append","appendNodeContent","shimNode","placeHolder","shortEnded","getDimension","dimension","defaultValue","Object","hasOwnProperty","call","isPageEmbedWrapper","nodeClass","test","sourceNode","targetNode","attribs","attributes","ai","attrValue","convertURL","innerHtml","escape","useDefaults","defaultWidth","fallbackHeight","defaultHeight","width","height","setAttributes","updatedAttrs","props","keys","k","len","push","sources","updateHtml","data","updateAll","hasImage","sourceCount","undefined","source","type","index","imgAttrs","stateSelectorAdapter","selector","buttonApi","selection","selectorChangedWithUnbind","join","setActive","unbind","id","constant","never","always","none","NONE","fold","n","_s","isSome","Fun.never","isNone","Fun.always","getOr","x","getOrThunk","thunk","getOrDie","msg","Error","getOrNull","Fun.constant","getOrUndefined","or","orThunk","each","bind","exists","forall","filter","toArray","toString","some","a","constant_a","self","me","f","s","Optional","from","get","obj","key","has","htmlToData","movie","assign","s_CACHE","Map","s_SERVICES","regex","url","maxwidth","maxheight","Service","response","embedHandler","getUrlResolver","handlerResponse","err","message","notificationManager","open","oembedName","oembedUrl","getMediaWidth","getMediaHeight","service","exec","remoteResponse","window","fetch","status","json","error","thumbnail_url","set","Dialog","editorData","getEditorData","currentData","initialData","wrap","disableFilePoster","getDisableFilePoster","disableFileSource","getDisableFileSource","items","filetype","label","hasDimensions","constrain","disabled","body","windowManager","title","size","buttons","primary","onSubmit","async","api","serviceData","unwrap","getData","submitForm","close","onChange","detail","handleSource","handleEmbed","handleUpdate","console","log","sourceInput","metaData","extractMeta","getValue","getDimensions","s_DIMENSION_ATTR","addEmbedHtml","trim","nuData","snippetToData","embed","setData","Obj.get","mainData","dimensions","dims","prop","element","getNode","snippet","isMediaElement","serializer","serialize","getFromData","getFromMetaData","getNonEmptyValue","c","v","child","prevData","getEmbedHtml","dataFromEmbed","handleInsert","beforeObjects","select","setPoster","insertContent","selectPlaceholder","dataset","oembedPoster","nodeChanged","getAttribute","afterObjects","y","embedSnippet","newData","isCached","wrapped","PluginManager","add","constructor","addCommand","showDialog","ui","registry","addToggleButton","tooltip","icon","onAction","execCommand","onSetup","addMenuItem","register","on","e","target","nodeType","setup","parser","addNodeFilter","placeHolderConverter","addAttributeFilter","realElm","innerNode","realElmName","className","substr","unescape","selectedNode","hasClass","getAttrib","setAttribute","preventDefault","String","getMetadata"],"mappings":"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"}