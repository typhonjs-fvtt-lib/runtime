{"version":3,"file":"index.js","sources":["../../node_modules/svelte/internal/index.mjs","../../node_modules/@typhonjs-fvtt/svelte/node_modules/@typhonjs-svelte/lib/src/modules/transition/transitionDefaults.js","../../node_modules/@typhonjs-fvtt/svelte/src/modules/helper/localize.js","../../node_modules/@typhonjs-fvtt/svelte/node_modules/@typhonjs-svelte/lib/src/modules/util/hasAccessor.js","../../node_modules/@typhonjs-fvtt/svelte/node_modules/@typhonjs-svelte/lib/src/modules/util/isSvelteComponent.js","../../node_modules/@typhonjs-fvtt/svelte/node_modules/@typhonjs-svelte/lib/src/modules/util/outroAndDestroy.js","../../node_modules/@typhonjs-fvtt/svelte/node_modules/@typhonjs-svelte/lib/src/modules/util/parseSvelteConfig.js","../../node_modules/@typhonjs-fvtt/svelte/src/modules/util/applicationShellContract.js","../../node_modules/@typhonjs-fvtt/svelte/src/modules/util/isApplicationShell.js","../../node_modules/svelte/store/index.mjs","../../node_modules/@typhonjs-utils/object/src/functions.js","../../node_modules/@typhonjs-fvtt/svelte/src/modules/application/legacy/HandlebarsApplication.js","../../node_modules/@typhonjs-fvtt/svelte/src/modules/application/GetSvelteData.js","../../node_modules/@typhonjs-fvtt/svelte/src/modules/application/legacy/SvelteFormApplication.js","../../node_modules/@typhonjs-fvtt/svelte/src/modules/application/legacy/HandlebarsFormApplication.js"],"sourcesContent":["function noop() { }\nconst identity = x => x;\nfunction assign(tar, src) {\n    // @ts-ignore\n    for (const k in src)\n        tar[k] = src[k];\n    return tar;\n}\nfunction is_promise(value) {\n    return value && typeof value === 'object' && typeof value.then === 'function';\n}\nfunction add_location(element, file, line, column, char) {\n    element.__svelte_meta = {\n        loc: { file, line, column, char }\n    };\n}\nfunction run(fn) {\n    return fn();\n}\nfunction blank_object() {\n    return Object.create(null);\n}\nfunction run_all(fns) {\n    fns.forEach(run);\n}\nfunction is_function(thing) {\n    return typeof thing === 'function';\n}\nfunction safe_not_equal(a, b) {\n    return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\nlet src_url_equal_anchor;\nfunction src_url_equal(element_src, url) {\n    if (!src_url_equal_anchor) {\n        src_url_equal_anchor = document.createElement('a');\n    }\n    src_url_equal_anchor.href = url;\n    return element_src === src_url_equal_anchor.href;\n}\nfunction not_equal(a, b) {\n    return a != a ? b == b : a !== b;\n}\nfunction is_empty(obj) {\n    return Object.keys(obj).length === 0;\n}\nfunction validate_store(store, name) {\n    if (store != null && typeof store.subscribe !== 'function') {\n        throw new Error(`'${name}' is not a store with a 'subscribe' method`);\n    }\n}\nfunction subscribe(store, ...callbacks) {\n    if (store == null) {\n        return noop;\n    }\n    const unsub = store.subscribe(...callbacks);\n    return unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\nfunction get_store_value(store) {\n    let value;\n    subscribe(store, _ => value = _)();\n    return value;\n}\nfunction component_subscribe(component, store, callback) {\n    component.$$.on_destroy.push(subscribe(store, callback));\n}\nfunction create_slot(definition, ctx, $$scope, fn) {\n    if (definition) {\n        const slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n        return definition[0](slot_ctx);\n    }\n}\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n    return definition[1] && fn\n        ? assign($$scope.ctx.slice(), definition[1](fn(ctx)))\n        : $$scope.ctx;\n}\nfunction get_slot_changes(definition, $$scope, dirty, fn) {\n    if (definition[2] && fn) {\n        const lets = definition[2](fn(dirty));\n        if ($$scope.dirty === undefined) {\n            return lets;\n        }\n        if (typeof lets === 'object') {\n            const merged = [];\n            const len = Math.max($$scope.dirty.length, lets.length);\n            for (let i = 0; i < len; i += 1) {\n                merged[i] = $$scope.dirty[i] | lets[i];\n            }\n            return merged;\n        }\n        return $$scope.dirty | lets;\n    }\n    return $$scope.dirty;\n}\nfunction update_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn) {\n    if (slot_changes) {\n        const slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n        slot.p(slot_context, slot_changes);\n    }\n}\nfunction update_slot(slot, slot_definition, ctx, $$scope, dirty, get_slot_changes_fn, get_slot_context_fn) {\n    const slot_changes = get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n    update_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn);\n}\nfunction get_all_dirty_from_scope($$scope) {\n    if ($$scope.ctx.length > 32) {\n        const dirty = [];\n        const length = $$scope.ctx.length / 32;\n        for (let i = 0; i < length; i++) {\n            dirty[i] = -1;\n        }\n        return dirty;\n    }\n    return -1;\n}\nfunction exclude_internal_props(props) {\n    const result = {};\n    for (const k in props)\n        if (k[0] !== '$')\n            result[k] = props[k];\n    return result;\n}\nfunction compute_rest_props(props, keys) {\n    const rest = {};\n    keys = new Set(keys);\n    for (const k in props)\n        if (!keys.has(k) && k[0] !== '$')\n            rest[k] = props[k];\n    return rest;\n}\nfunction compute_slots(slots) {\n    const result = {};\n    for (const key in slots) {\n        result[key] = true;\n    }\n    return result;\n}\nfunction once(fn) {\n    let ran = false;\n    return function (...args) {\n        if (ran)\n            return;\n        ran = true;\n        fn.call(this, ...args);\n    };\n}\nfunction null_to_empty(value) {\n    return value == null ? '' : value;\n}\nfunction set_store_value(store, ret, value) {\n    store.set(value);\n    return ret;\n}\nconst has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\nfunction action_destroyer(action_result) {\n    return action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\n\nconst is_client = typeof window !== 'undefined';\nlet now = is_client\n    ? () => window.performance.now()\n    : () => Date.now();\nlet raf = is_client ? cb => requestAnimationFrame(cb) : noop;\n// used internally for testing\nfunction set_now(fn) {\n    now = fn;\n}\nfunction set_raf(fn) {\n    raf = fn;\n}\n\nconst tasks = new Set();\nfunction run_tasks(now) {\n    tasks.forEach(task => {\n        if (!task.c(now)) {\n            tasks.delete(task);\n            task.f();\n        }\n    });\n    if (tasks.size !== 0)\n        raf(run_tasks);\n}\n/**\n * For testing purposes only!\n */\nfunction clear_loops() {\n    tasks.clear();\n}\n/**\n * Creates a new task that runs on each raf frame\n * until it returns a falsy value or is aborted\n */\nfunction loop(callback) {\n    let task;\n    if (tasks.size === 0)\n        raf(run_tasks);\n    return {\n        promise: new Promise(fulfill => {\n            tasks.add(task = { c: callback, f: fulfill });\n        }),\n        abort() {\n            tasks.delete(task);\n        }\n    };\n}\n\n// Track which nodes are claimed during hydration. Unclaimed nodes can then be removed from the DOM\n// at the end of hydration without touching the remaining nodes.\nlet is_hydrating = false;\nfunction start_hydrating() {\n    is_hydrating = true;\n}\nfunction end_hydrating() {\n    is_hydrating = false;\n}\nfunction upper_bound(low, high, key, value) {\n    // Return first index of value larger than input value in the range [low, high)\n    while (low < high) {\n        const mid = low + ((high - low) >> 1);\n        if (key(mid) <= value) {\n            low = mid + 1;\n        }\n        else {\n            high = mid;\n        }\n    }\n    return low;\n}\nfunction init_hydrate(target) {\n    if (target.hydrate_init)\n        return;\n    target.hydrate_init = true;\n    // We know that all children have claim_order values since the unclaimed have been detached if target is not <head>\n    let children = target.childNodes;\n    // If target is <head>, there may be children without claim_order\n    if (target.nodeName === 'HEAD') {\n        const myChildren = [];\n        for (let i = 0; i < children.length; i++) {\n            const node = children[i];\n            if (node.claim_order !== undefined) {\n                myChildren.push(node);\n            }\n        }\n        children = myChildren;\n    }\n    /*\n    * Reorder claimed children optimally.\n    * We can reorder claimed children optimally by finding the longest subsequence of\n    * nodes that are already claimed in order and only moving the rest. The longest\n    * subsequence subsequence of nodes that are claimed in order can be found by\n    * computing the longest increasing subsequence of .claim_order values.\n    *\n    * This algorithm is optimal in generating the least amount of reorder operations\n    * possible.\n    *\n    * Proof:\n    * We know that, given a set of reordering operations, the nodes that do not move\n    * always form an increasing subsequence, since they do not move among each other\n    * meaning that they must be already ordered among each other. Thus, the maximal\n    * set of nodes that do not move form a longest increasing subsequence.\n    */\n    // Compute longest increasing subsequence\n    // m: subsequence length j => index k of smallest value that ends an increasing subsequence of length j\n    const m = new Int32Array(children.length + 1);\n    // Predecessor indices + 1\n    const p = new Int32Array(children.length);\n    m[0] = -1;\n    let longest = 0;\n    for (let i = 0; i < children.length; i++) {\n        const current = children[i].claim_order;\n        // Find the largest subsequence length such that it ends in a value less than our current value\n        // upper_bound returns first greater value, so we subtract one\n        // with fast path for when we are on the current longest subsequence\n        const seqLen = ((longest > 0 && children[m[longest]].claim_order <= current) ? longest + 1 : upper_bound(1, longest, idx => children[m[idx]].claim_order, current)) - 1;\n        p[i] = m[seqLen] + 1;\n        const newLen = seqLen + 1;\n        // We can guarantee that current is the smallest value. Otherwise, we would have generated a longer sequence.\n        m[newLen] = i;\n        longest = Math.max(newLen, longest);\n    }\n    // The longest increasing subsequence of nodes (initially reversed)\n    const lis = [];\n    // The rest of the nodes, nodes that will be moved\n    const toMove = [];\n    let last = children.length - 1;\n    for (let cur = m[longest] + 1; cur != 0; cur = p[cur - 1]) {\n        lis.push(children[cur - 1]);\n        for (; last >= cur; last--) {\n            toMove.push(children[last]);\n        }\n        last--;\n    }\n    for (; last >= 0; last--) {\n        toMove.push(children[last]);\n    }\n    lis.reverse();\n    // We sort the nodes being moved to guarantee that their insertion order matches the claim order\n    toMove.sort((a, b) => a.claim_order - b.claim_order);\n    // Finally, we move the nodes\n    for (let i = 0, j = 0; i < toMove.length; i++) {\n        while (j < lis.length && toMove[i].claim_order >= lis[j].claim_order) {\n            j++;\n        }\n        const anchor = j < lis.length ? lis[j] : null;\n        target.insertBefore(toMove[i], anchor);\n    }\n}\nfunction append(target, node) {\n    target.appendChild(node);\n}\nfunction append_styles(target, style_sheet_id, styles) {\n    const append_styles_to = get_root_for_style(target);\n    if (!append_styles_to.getElementById(style_sheet_id)) {\n        const style = element('style');\n        style.id = style_sheet_id;\n        style.textContent = styles;\n        append_stylesheet(append_styles_to, style);\n    }\n}\nfunction get_root_for_style(node) {\n    if (!node)\n        return document;\n    const root = node.getRootNode ? node.getRootNode() : node.ownerDocument;\n    if (root && root.host) {\n        return root;\n    }\n    return node.ownerDocument;\n}\nfunction append_empty_stylesheet(node) {\n    const style_element = element('style');\n    append_stylesheet(get_root_for_style(node), style_element);\n    return style_element;\n}\nfunction append_stylesheet(node, style) {\n    append(node.head || node, style);\n}\nfunction append_hydration(target, node) {\n    if (is_hydrating) {\n        init_hydrate(target);\n        if ((target.actual_end_child === undefined) || ((target.actual_end_child !== null) && (target.actual_end_child.parentElement !== target))) {\n            target.actual_end_child = target.firstChild;\n        }\n        // Skip nodes of undefined ordering\n        while ((target.actual_end_child !== null) && (target.actual_end_child.claim_order === undefined)) {\n            target.actual_end_child = target.actual_end_child.nextSibling;\n        }\n        if (node !== target.actual_end_child) {\n            // We only insert if the ordering of this node should be modified or the parent node is not target\n            if (node.claim_order !== undefined || node.parentNode !== target) {\n                target.insertBefore(node, target.actual_end_child);\n            }\n        }\n        else {\n            target.actual_end_child = node.nextSibling;\n        }\n    }\n    else if (node.parentNode !== target || node.nextSibling !== null) {\n        target.appendChild(node);\n    }\n}\nfunction insert(target, node, anchor) {\n    target.insertBefore(node, anchor || null);\n}\nfunction insert_hydration(target, node, anchor) {\n    if (is_hydrating && !anchor) {\n        append_hydration(target, node);\n    }\n    else if (node.parentNode !== target || node.nextSibling != anchor) {\n        target.insertBefore(node, anchor || null);\n    }\n}\nfunction detach(node) {\n    node.parentNode.removeChild(node);\n}\nfunction destroy_each(iterations, detaching) {\n    for (let i = 0; i < iterations.length; i += 1) {\n        if (iterations[i])\n            iterations[i].d(detaching);\n    }\n}\nfunction element(name) {\n    return document.createElement(name);\n}\nfunction element_is(name, is) {\n    return document.createElement(name, { is });\n}\nfunction object_without_properties(obj, exclude) {\n    const target = {};\n    for (const k in obj) {\n        if (has_prop(obj, k)\n            // @ts-ignore\n            && exclude.indexOf(k) === -1) {\n            // @ts-ignore\n            target[k] = obj[k];\n        }\n    }\n    return target;\n}\nfunction svg_element(name) {\n    return document.createElementNS('http://www.w3.org/2000/svg', name);\n}\nfunction text(data) {\n    return document.createTextNode(data);\n}\nfunction space() {\n    return text(' ');\n}\nfunction empty() {\n    return text('');\n}\nfunction listen(node, event, handler, options) {\n    node.addEventListener(event, handler, options);\n    return () => node.removeEventListener(event, handler, options);\n}\nfunction prevent_default(fn) {\n    return function (event) {\n        event.preventDefault();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction stop_propagation(fn) {\n    return function (event) {\n        event.stopPropagation();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction self(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.target === this)\n            fn.call(this, event);\n    };\n}\nfunction trusted(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.isTrusted)\n            fn.call(this, event);\n    };\n}\nfunction attr(node, attribute, value) {\n    if (value == null)\n        node.removeAttribute(attribute);\n    else if (node.getAttribute(attribute) !== value)\n        node.setAttribute(attribute, value);\n}\nfunction set_attributes(node, attributes) {\n    // @ts-ignore\n    const descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n    for (const key in attributes) {\n        if (attributes[key] == null) {\n            node.removeAttribute(key);\n        }\n        else if (key === 'style') {\n            node.style.cssText = attributes[key];\n        }\n        else if (key === '__value') {\n            node.value = node[key] = attributes[key];\n        }\n        else if (descriptors[key] && descriptors[key].set) {\n            node[key] = attributes[key];\n        }\n        else {\n            attr(node, key, attributes[key]);\n        }\n    }\n}\nfunction set_svg_attributes(node, attributes) {\n    for (const key in attributes) {\n        attr(node, key, attributes[key]);\n    }\n}\nfunction set_custom_element_data(node, prop, value) {\n    if (prop in node) {\n        node[prop] = typeof node[prop] === 'boolean' && value === '' ? true : value;\n    }\n    else {\n        attr(node, prop, value);\n    }\n}\nfunction xlink_attr(node, attribute, value) {\n    node.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\nfunction get_binding_group_value(group, __value, checked) {\n    const value = new Set();\n    for (let i = 0; i < group.length; i += 1) {\n        if (group[i].checked)\n            value.add(group[i].__value);\n    }\n    if (!checked) {\n        value.delete(__value);\n    }\n    return Array.from(value);\n}\nfunction to_number(value) {\n    return value === '' ? null : +value;\n}\nfunction time_ranges_to_array(ranges) {\n    const array = [];\n    for (let i = 0; i < ranges.length; i += 1) {\n        array.push({ start: ranges.start(i), end: ranges.end(i) });\n    }\n    return array;\n}\nfunction children(element) {\n    return Array.from(element.childNodes);\n}\nfunction init_claim_info(nodes) {\n    if (nodes.claim_info === undefined) {\n        nodes.claim_info = { last_index: 0, total_claimed: 0 };\n    }\n}\nfunction claim_node(nodes, predicate, processNode, createNode, dontUpdateLastIndex = false) {\n    // Try to find nodes in an order such that we lengthen the longest increasing subsequence\n    init_claim_info(nodes);\n    const resultNode = (() => {\n        // We first try to find an element after the previous one\n        for (let i = nodes.claim_info.last_index; i < nodes.length; i++) {\n            const node = nodes[i];\n            if (predicate(node)) {\n                const replacement = processNode(node);\n                if (replacement === undefined) {\n                    nodes.splice(i, 1);\n                }\n                else {\n                    nodes[i] = replacement;\n                }\n                if (!dontUpdateLastIndex) {\n                    nodes.claim_info.last_index = i;\n                }\n                return node;\n            }\n        }\n        // Otherwise, we try to find one before\n        // We iterate in reverse so that we don't go too far back\n        for (let i = nodes.claim_info.last_index - 1; i >= 0; i--) {\n            const node = nodes[i];\n            if (predicate(node)) {\n                const replacement = processNode(node);\n                if (replacement === undefined) {\n                    nodes.splice(i, 1);\n                }\n                else {\n                    nodes[i] = replacement;\n                }\n                if (!dontUpdateLastIndex) {\n                    nodes.claim_info.last_index = i;\n                }\n                else if (replacement === undefined) {\n                    // Since we spliced before the last_index, we decrease it\n                    nodes.claim_info.last_index--;\n                }\n                return node;\n            }\n        }\n        // If we can't find any matching node, we create a new one\n        return createNode();\n    })();\n    resultNode.claim_order = nodes.claim_info.total_claimed;\n    nodes.claim_info.total_claimed += 1;\n    return resultNode;\n}\nfunction claim_element_base(nodes, name, attributes, create_element) {\n    return claim_node(nodes, (node) => node.nodeName === name, (node) => {\n        const remove = [];\n        for (let j = 0; j < node.attributes.length; j++) {\n            const attribute = node.attributes[j];\n            if (!attributes[attribute.name]) {\n                remove.push(attribute.name);\n            }\n        }\n        remove.forEach(v => node.removeAttribute(v));\n        return undefined;\n    }, () => create_element(name));\n}\nfunction claim_element(nodes, name, attributes) {\n    return claim_element_base(nodes, name, attributes, element);\n}\nfunction claim_svg_element(nodes, name, attributes) {\n    return claim_element_base(nodes, name, attributes, svg_element);\n}\nfunction claim_text(nodes, data) {\n    return claim_node(nodes, (node) => node.nodeType === 3, (node) => {\n        const dataStr = '' + data;\n        if (node.data.startsWith(dataStr)) {\n            if (node.data.length !== dataStr.length) {\n                return node.splitText(dataStr.length);\n            }\n        }\n        else {\n            node.data = dataStr;\n        }\n    }, () => text(data), true // Text nodes should not update last index since it is likely not worth it to eliminate an increasing subsequence of actual elements\n    );\n}\nfunction claim_space(nodes) {\n    return claim_text(nodes, ' ');\n}\nfunction find_comment(nodes, text, start) {\n    for (let i = start; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeType === 8 /* comment node */ && node.textContent.trim() === text) {\n            return i;\n        }\n    }\n    return nodes.length;\n}\nfunction claim_html_tag(nodes) {\n    // find html opening tag\n    const start_index = find_comment(nodes, 'HTML_TAG_START', 0);\n    const end_index = find_comment(nodes, 'HTML_TAG_END', start_index);\n    if (start_index === end_index) {\n        return new HtmlTagHydration();\n    }\n    init_claim_info(nodes);\n    const html_tag_nodes = nodes.splice(start_index, end_index + 1);\n    detach(html_tag_nodes[0]);\n    detach(html_tag_nodes[html_tag_nodes.length - 1]);\n    const claimed_nodes = html_tag_nodes.slice(1, html_tag_nodes.length - 1);\n    for (const n of claimed_nodes) {\n        n.claim_order = nodes.claim_info.total_claimed;\n        nodes.claim_info.total_claimed += 1;\n    }\n    return new HtmlTagHydration(claimed_nodes);\n}\nfunction set_data(text, data) {\n    data = '' + data;\n    if (text.wholeText !== data)\n        text.data = data;\n}\nfunction set_input_value(input, value) {\n    input.value = value == null ? '' : value;\n}\nfunction set_input_type(input, type) {\n    try {\n        input.type = type;\n    }\n    catch (e) {\n        // do nothing\n    }\n}\nfunction set_style(node, key, value, important) {\n    node.style.setProperty(key, value, important ? 'important' : '');\n}\nfunction select_option(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        if (option.__value === value) {\n            option.selected = true;\n            return;\n        }\n    }\n    select.selectedIndex = -1; // no option should be selected\n}\nfunction select_options(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        option.selected = ~value.indexOf(option.__value);\n    }\n}\nfunction select_value(select) {\n    const selected_option = select.querySelector(':checked') || select.options[0];\n    return selected_option && selected_option.__value;\n}\nfunction select_multiple_value(select) {\n    return [].map.call(select.querySelectorAll(':checked'), option => option.__value);\n}\n// unfortunately this can't be a constant as that wouldn't be tree-shakeable\n// so we cache the result instead\nlet crossorigin;\nfunction is_crossorigin() {\n    if (crossorigin === undefined) {\n        crossorigin = false;\n        try {\n            if (typeof window !== 'undefined' && window.parent) {\n                void window.parent.document;\n            }\n        }\n        catch (error) {\n            crossorigin = true;\n        }\n    }\n    return crossorigin;\n}\nfunction add_resize_listener(node, fn) {\n    const computed_style = getComputedStyle(node);\n    if (computed_style.position === 'static') {\n        node.style.position = 'relative';\n    }\n    const iframe = element('iframe');\n    iframe.setAttribute('style', 'display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; ' +\n        'overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;');\n    iframe.setAttribute('aria-hidden', 'true');\n    iframe.tabIndex = -1;\n    const crossorigin = is_crossorigin();\n    let unsubscribe;\n    if (crossorigin) {\n        iframe.src = \"data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}</script>\";\n        unsubscribe = listen(window, 'message', (event) => {\n            if (event.source === iframe.contentWindow)\n                fn();\n        });\n    }\n    else {\n        iframe.src = 'about:blank';\n        iframe.onload = () => {\n            unsubscribe = listen(iframe.contentWindow, 'resize', fn);\n        };\n    }\n    append(node, iframe);\n    return () => {\n        if (crossorigin) {\n            unsubscribe();\n        }\n        else if (unsubscribe && iframe.contentWindow) {\n            unsubscribe();\n        }\n        detach(iframe);\n    };\n}\nfunction toggle_class(element, name, toggle) {\n    element.classList[toggle ? 'add' : 'remove'](name);\n}\nfunction custom_event(type, detail, bubbles = false) {\n    const e = document.createEvent('CustomEvent');\n    e.initCustomEvent(type, bubbles, false, detail);\n    return e;\n}\nfunction query_selector_all(selector, parent = document.body) {\n    return Array.from(parent.querySelectorAll(selector));\n}\nclass HtmlTag {\n    constructor() {\n        this.e = this.n = null;\n    }\n    c(html) {\n        this.h(html);\n    }\n    m(html, target, anchor = null) {\n        if (!this.e) {\n            this.e = element(target.nodeName);\n            this.t = target;\n            this.c(html);\n        }\n        this.i(anchor);\n    }\n    h(html) {\n        this.e.innerHTML = html;\n        this.n = Array.from(this.e.childNodes);\n    }\n    i(anchor) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert(this.t, this.n[i], anchor);\n        }\n    }\n    p(html) {\n        this.d();\n        this.h(html);\n        this.i(this.a);\n    }\n    d() {\n        this.n.forEach(detach);\n    }\n}\nclass HtmlTagHydration extends HtmlTag {\n    constructor(claimed_nodes) {\n        super();\n        this.e = this.n = null;\n        this.l = claimed_nodes;\n    }\n    c(html) {\n        if (this.l) {\n            this.n = this.l;\n        }\n        else {\n            super.c(html);\n        }\n    }\n    i(anchor) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert_hydration(this.t, this.n[i], anchor);\n        }\n    }\n}\nfunction attribute_to_object(attributes) {\n    const result = {};\n    for (const attribute of attributes) {\n        result[attribute.name] = attribute.value;\n    }\n    return result;\n}\nfunction get_custom_elements_slots(element) {\n    const result = {};\n    element.childNodes.forEach((node) => {\n        result[node.slot || 'default'] = true;\n    });\n    return result;\n}\n\nconst active_docs = new Set();\nlet active = 0;\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n    let hash = 5381;\n    let i = str.length;\n    while (i--)\n        hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n    return hash >>> 0;\n}\nfunction create_rule(node, a, b, duration, delay, ease, fn, uid = 0) {\n    const step = 16.666 / duration;\n    let keyframes = '{\\n';\n    for (let p = 0; p <= 1; p += step) {\n        const t = a + (b - a) * ease(p);\n        keyframes += p * 100 + `%{${fn(t, 1 - t)}}\\n`;\n    }\n    const rule = keyframes + `100% {${fn(b, 1 - b)}}\\n}`;\n    const name = `__svelte_${hash(rule)}_${uid}`;\n    const doc = get_root_for_style(node);\n    active_docs.add(doc);\n    const stylesheet = doc.__svelte_stylesheet || (doc.__svelte_stylesheet = append_empty_stylesheet(node).sheet);\n    const current_rules = doc.__svelte_rules || (doc.__svelte_rules = {});\n    if (!current_rules[name]) {\n        current_rules[name] = true;\n        stylesheet.insertRule(`@keyframes ${name} ${rule}`, stylesheet.cssRules.length);\n    }\n    const animation = node.style.animation || '';\n    node.style.animation = `${animation ? `${animation}, ` : ''}${name} ${duration}ms linear ${delay}ms 1 both`;\n    active += 1;\n    return name;\n}\nfunction delete_rule(node, name) {\n    const previous = (node.style.animation || '').split(', ');\n    const next = previous.filter(name\n        ? anim => anim.indexOf(name) < 0 // remove specific animation\n        : anim => anim.indexOf('__svelte') === -1 // remove all Svelte animations\n    );\n    const deleted = previous.length - next.length;\n    if (deleted) {\n        node.style.animation = next.join(', ');\n        active -= deleted;\n        if (!active)\n            clear_rules();\n    }\n}\nfunction clear_rules() {\n    raf(() => {\n        if (active)\n            return;\n        active_docs.forEach(doc => {\n            const stylesheet = doc.__svelte_stylesheet;\n            let i = stylesheet.cssRules.length;\n            while (i--)\n                stylesheet.deleteRule(i);\n            doc.__svelte_rules = {};\n        });\n        active_docs.clear();\n    });\n}\n\nfunction create_animation(node, from, fn, params) {\n    if (!from)\n        return noop;\n    const to = node.getBoundingClientRect();\n    if (from.left === to.left && from.right === to.right && from.top === to.top && from.bottom === to.bottom)\n        return noop;\n    const { delay = 0, duration = 300, easing = identity, \n    // @ts-ignore todo: should this be separated from destructuring? Or start/end added to public api and documentation?\n    start: start_time = now() + delay, \n    // @ts-ignore todo:\n    end = start_time + duration, tick = noop, css } = fn(node, { from, to }, params);\n    let running = true;\n    let started = false;\n    let name;\n    function start() {\n        if (css) {\n            name = create_rule(node, 0, 1, duration, delay, easing, css);\n        }\n        if (!delay) {\n            started = true;\n        }\n    }\n    function stop() {\n        if (css)\n            delete_rule(node, name);\n        running = false;\n    }\n    loop(now => {\n        if (!started && now >= start_time) {\n            started = true;\n        }\n        if (started && now >= end) {\n            tick(1, 0);\n            stop();\n        }\n        if (!running) {\n            return false;\n        }\n        if (started) {\n            const p = now - start_time;\n            const t = 0 + 1 * easing(p / duration);\n            tick(t, 1 - t);\n        }\n        return true;\n    });\n    start();\n    tick(0, 1);\n    return stop;\n}\nfunction fix_position(node) {\n    const style = getComputedStyle(node);\n    if (style.position !== 'absolute' && style.position !== 'fixed') {\n        const { width, height } = style;\n        const a = node.getBoundingClientRect();\n        node.style.position = 'absolute';\n        node.style.width = width;\n        node.style.height = height;\n        add_transform(node, a);\n    }\n}\nfunction add_transform(node, a) {\n    const b = node.getBoundingClientRect();\n    if (a.left !== b.left || a.top !== b.top) {\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        node.style.transform = `${transform} translate(${a.left - b.left}px, ${a.top - b.top}px)`;\n    }\n}\n\nlet current_component;\nfunction set_current_component(component) {\n    current_component = component;\n}\nfunction get_current_component() {\n    if (!current_component)\n        throw new Error('Function called outside component initialization');\n    return current_component;\n}\nfunction beforeUpdate(fn) {\n    get_current_component().$$.before_update.push(fn);\n}\nfunction onMount(fn) {\n    get_current_component().$$.on_mount.push(fn);\n}\nfunction afterUpdate(fn) {\n    get_current_component().$$.after_update.push(fn);\n}\nfunction onDestroy(fn) {\n    get_current_component().$$.on_destroy.push(fn);\n}\nfunction createEventDispatcher() {\n    const component = get_current_component();\n    return (type, detail) => {\n        const callbacks = component.$$.callbacks[type];\n        if (callbacks) {\n            // TODO are there situations where events could be dispatched\n            // in a server (non-DOM) environment?\n            const event = custom_event(type, detail);\n            callbacks.slice().forEach(fn => {\n                fn.call(component, event);\n            });\n        }\n    };\n}\nfunction setContext(key, context) {\n    get_current_component().$$.context.set(key, context);\n}\nfunction getContext(key) {\n    return get_current_component().$$.context.get(key);\n}\nfunction getAllContexts() {\n    return get_current_component().$$.context;\n}\nfunction hasContext(key) {\n    return get_current_component().$$.context.has(key);\n}\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\nfunction bubble(component, event) {\n    const callbacks = component.$$.callbacks[event.type];\n    if (callbacks) {\n        // @ts-ignore\n        callbacks.slice().forEach(fn => fn.call(this, event));\n    }\n}\n\nconst dirty_components = [];\nconst intros = { enabled: false };\nconst binding_callbacks = [];\nconst render_callbacks = [];\nconst flush_callbacks = [];\nconst resolved_promise = Promise.resolve();\nlet update_scheduled = false;\nfunction schedule_update() {\n    if (!update_scheduled) {\n        update_scheduled = true;\n        resolved_promise.then(flush);\n    }\n}\nfunction tick() {\n    schedule_update();\n    return resolved_promise;\n}\nfunction add_render_callback(fn) {\n    render_callbacks.push(fn);\n}\nfunction add_flush_callback(fn) {\n    flush_callbacks.push(fn);\n}\nlet flushing = false;\nconst seen_callbacks = new Set();\nfunction flush() {\n    if (flushing)\n        return;\n    flushing = true;\n    do {\n        // first, call beforeUpdate functions\n        // and update components\n        for (let i = 0; i < dirty_components.length; i += 1) {\n            const component = dirty_components[i];\n            set_current_component(component);\n            update(component.$$);\n        }\n        set_current_component(null);\n        dirty_components.length = 0;\n        while (binding_callbacks.length)\n            binding_callbacks.pop()();\n        // then, once components are updated, call\n        // afterUpdate functions. This may cause\n        // subsequent updates...\n        for (let i = 0; i < render_callbacks.length; i += 1) {\n            const callback = render_callbacks[i];\n            if (!seen_callbacks.has(callback)) {\n                // ...so guard against infinite loops\n                seen_callbacks.add(callback);\n                callback();\n            }\n        }\n        render_callbacks.length = 0;\n    } while (dirty_components.length);\n    while (flush_callbacks.length) {\n        flush_callbacks.pop()();\n    }\n    update_scheduled = false;\n    flushing = false;\n    seen_callbacks.clear();\n}\nfunction update($$) {\n    if ($$.fragment !== null) {\n        $$.update();\n        run_all($$.before_update);\n        const dirty = $$.dirty;\n        $$.dirty = [-1];\n        $$.fragment && $$.fragment.p($$.ctx, dirty);\n        $$.after_update.forEach(add_render_callback);\n    }\n}\n\nlet promise;\nfunction wait() {\n    if (!promise) {\n        promise = Promise.resolve();\n        promise.then(() => {\n            promise = null;\n        });\n    }\n    return promise;\n}\nfunction dispatch(node, direction, kind) {\n    node.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\nconst outroing = new Set();\nlet outros;\nfunction group_outros() {\n    outros = {\n        r: 0,\n        c: [],\n        p: outros // parent group\n    };\n}\nfunction check_outros() {\n    if (!outros.r) {\n        run_all(outros.c);\n    }\n    outros = outros.p;\n}\nfunction transition_in(block, local) {\n    if (block && block.i) {\n        outroing.delete(block);\n        block.i(local);\n    }\n}\nfunction transition_out(block, local, detach, callback) {\n    if (block && block.o) {\n        if (outroing.has(block))\n            return;\n        outroing.add(block);\n        outros.c.push(() => {\n            outroing.delete(block);\n            if (callback) {\n                if (detach)\n                    block.d(1);\n                callback();\n            }\n        });\n        block.o(local);\n    }\n}\nconst null_transition = { duration: 0 };\nfunction create_in_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = false;\n    let animation_name;\n    let task;\n    let uid = 0;\n    function cleanup() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n        tick(0, 1);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        if (task)\n            task.abort();\n        running = true;\n        add_render_callback(() => dispatch(node, true, 'start'));\n        task = loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(1, 0);\n                    dispatch(node, true, 'end');\n                    cleanup();\n                    return running = false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(t, 1 - t);\n                }\n            }\n            return running;\n        });\n    }\n    let started = false;\n    return {\n        start() {\n            if (started)\n                return;\n            started = true;\n            delete_rule(node);\n            if (is_function(config)) {\n                config = config();\n                wait().then(go);\n            }\n            else {\n                go();\n            }\n        },\n        invalidate() {\n            started = false;\n        },\n        end() {\n            if (running) {\n                cleanup();\n                running = false;\n            }\n        }\n    };\n}\nfunction create_out_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = true;\n    let animation_name;\n    const group = outros;\n    group.r += 1;\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        add_render_callback(() => dispatch(node, false, 'start'));\n        loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(0, 1);\n                    dispatch(node, false, 'end');\n                    if (!--group.r) {\n                        // this will result in `end()` being called,\n                        // so we don't need to clean up here\n                        run_all(group.c);\n                    }\n                    return false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(1 - t, t);\n                }\n            }\n            return running;\n        });\n    }\n    if (is_function(config)) {\n        wait().then(() => {\n            // @ts-ignore\n            config = config();\n            go();\n        });\n    }\n    else {\n        go();\n    }\n    return {\n        end(reset) {\n            if (reset && config.tick) {\n                config.tick(1, 0);\n            }\n            if (running) {\n                if (animation_name)\n                    delete_rule(node, animation_name);\n                running = false;\n            }\n        }\n    };\n}\nfunction create_bidirectional_transition(node, fn, params, intro) {\n    let config = fn(node, params);\n    let t = intro ? 0 : 1;\n    let running_program = null;\n    let pending_program = null;\n    let animation_name = null;\n    function clear_animation() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function init(program, duration) {\n        const d = (program.b - t);\n        duration *= Math.abs(d);\n        return {\n            a: t,\n            b: program.b,\n            d,\n            duration,\n            start: program.start,\n            end: program.start + duration,\n            group: program.group\n        };\n    }\n    function go(b) {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        const program = {\n            start: now() + delay,\n            b\n        };\n        if (!b) {\n            // @ts-ignore todo: improve typings\n            program.group = outros;\n            outros.r += 1;\n        }\n        if (running_program || pending_program) {\n            pending_program = program;\n        }\n        else {\n            // if this is an intro, and there's a delay, we need to do\n            // an initial tick and/or apply CSS animation immediately\n            if (css) {\n                clear_animation();\n                animation_name = create_rule(node, t, b, duration, delay, easing, css);\n            }\n            if (b)\n                tick(0, 1);\n            running_program = init(program, duration);\n            add_render_callback(() => dispatch(node, b, 'start'));\n            loop(now => {\n                if (pending_program && now > pending_program.start) {\n                    running_program = init(pending_program, duration);\n                    pending_program = null;\n                    dispatch(node, running_program.b, 'start');\n                    if (css) {\n                        clear_animation();\n                        animation_name = create_rule(node, t, running_program.b, running_program.duration, 0, easing, config.css);\n                    }\n                }\n                if (running_program) {\n                    if (now >= running_program.end) {\n                        tick(t = running_program.b, 1 - t);\n                        dispatch(node, running_program.b, 'end');\n                        if (!pending_program) {\n                            // we're done\n                            if (running_program.b) {\n                                // intro — we can tidy up immediately\n                                clear_animation();\n                            }\n                            else {\n                                // outro — needs to be coordinated\n                                if (!--running_program.group.r)\n                                    run_all(running_program.group.c);\n                            }\n                        }\n                        running_program = null;\n                    }\n                    else if (now >= running_program.start) {\n                        const p = now - running_program.start;\n                        t = running_program.a + running_program.d * easing(p / running_program.duration);\n                        tick(t, 1 - t);\n                    }\n                }\n                return !!(running_program || pending_program);\n            });\n        }\n    }\n    return {\n        run(b) {\n            if (is_function(config)) {\n                wait().then(() => {\n                    // @ts-ignore\n                    config = config();\n                    go(b);\n                });\n            }\n            else {\n                go(b);\n            }\n        },\n        end() {\n            clear_animation();\n            running_program = pending_program = null;\n        }\n    };\n}\n\nfunction handle_promise(promise, info) {\n    const token = info.token = {};\n    function update(type, index, key, value) {\n        if (info.token !== token)\n            return;\n        info.resolved = value;\n        let child_ctx = info.ctx;\n        if (key !== undefined) {\n            child_ctx = child_ctx.slice();\n            child_ctx[key] = value;\n        }\n        const block = type && (info.current = type)(child_ctx);\n        let needs_flush = false;\n        if (info.block) {\n            if (info.blocks) {\n                info.blocks.forEach((block, i) => {\n                    if (i !== index && block) {\n                        group_outros();\n                        transition_out(block, 1, 1, () => {\n                            if (info.blocks[i] === block) {\n                                info.blocks[i] = null;\n                            }\n                        });\n                        check_outros();\n                    }\n                });\n            }\n            else {\n                info.block.d(1);\n            }\n            block.c();\n            transition_in(block, 1);\n            block.m(info.mount(), info.anchor);\n            needs_flush = true;\n        }\n        info.block = block;\n        if (info.blocks)\n            info.blocks[index] = block;\n        if (needs_flush) {\n            flush();\n        }\n    }\n    if (is_promise(promise)) {\n        const current_component = get_current_component();\n        promise.then(value => {\n            set_current_component(current_component);\n            update(info.then, 1, info.value, value);\n            set_current_component(null);\n        }, error => {\n            set_current_component(current_component);\n            update(info.catch, 2, info.error, error);\n            set_current_component(null);\n            if (!info.hasCatch) {\n                throw error;\n            }\n        });\n        // if we previously had a then/catch block, destroy it\n        if (info.current !== info.pending) {\n            update(info.pending, 0);\n            return true;\n        }\n    }\n    else {\n        if (info.current !== info.then) {\n            update(info.then, 1, info.value, promise);\n            return true;\n        }\n        info.resolved = promise;\n    }\n}\nfunction update_await_block_branch(info, ctx, dirty) {\n    const child_ctx = ctx.slice();\n    const { resolved } = info;\n    if (info.current === info.then) {\n        child_ctx[info.value] = resolved;\n    }\n    if (info.current === info.catch) {\n        child_ctx[info.error] = resolved;\n    }\n    info.block.p(child_ctx, dirty);\n}\n\nconst globals = (typeof window !== 'undefined'\n    ? window\n    : typeof globalThis !== 'undefined'\n        ? globalThis\n        : global);\n\nfunction destroy_block(block, lookup) {\n    block.d(1);\n    lookup.delete(block.key);\n}\nfunction outro_and_destroy_block(block, lookup) {\n    transition_out(block, 1, 1, () => {\n        lookup.delete(block.key);\n    });\n}\nfunction fix_and_destroy_block(block, lookup) {\n    block.f();\n    destroy_block(block, lookup);\n}\nfunction fix_and_outro_and_destroy_block(block, lookup) {\n    block.f();\n    outro_and_destroy_block(block, lookup);\n}\nfunction update_keyed_each(old_blocks, dirty, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, next, get_context) {\n    let o = old_blocks.length;\n    let n = list.length;\n    let i = o;\n    const old_indexes = {};\n    while (i--)\n        old_indexes[old_blocks[i].key] = i;\n    const new_blocks = [];\n    const new_lookup = new Map();\n    const deltas = new Map();\n    i = n;\n    while (i--) {\n        const child_ctx = get_context(ctx, list, i);\n        const key = get_key(child_ctx);\n        let block = lookup.get(key);\n        if (!block) {\n            block = create_each_block(key, child_ctx);\n            block.c();\n        }\n        else if (dynamic) {\n            block.p(child_ctx, dirty);\n        }\n        new_lookup.set(key, new_blocks[i] = block);\n        if (key in old_indexes)\n            deltas.set(key, Math.abs(i - old_indexes[key]));\n    }\n    const will_move = new Set();\n    const did_move = new Set();\n    function insert(block) {\n        transition_in(block, 1);\n        block.m(node, next);\n        lookup.set(block.key, block);\n        next = block.first;\n        n--;\n    }\n    while (o && n) {\n        const new_block = new_blocks[n - 1];\n        const old_block = old_blocks[o - 1];\n        const new_key = new_block.key;\n        const old_key = old_block.key;\n        if (new_block === old_block) {\n            // do nothing\n            next = new_block.first;\n            o--;\n            n--;\n        }\n        else if (!new_lookup.has(old_key)) {\n            // remove old block\n            destroy(old_block, lookup);\n            o--;\n        }\n        else if (!lookup.has(new_key) || will_move.has(new_key)) {\n            insert(new_block);\n        }\n        else if (did_move.has(old_key)) {\n            o--;\n        }\n        else if (deltas.get(new_key) > deltas.get(old_key)) {\n            did_move.add(new_key);\n            insert(new_block);\n        }\n        else {\n            will_move.add(old_key);\n            o--;\n        }\n    }\n    while (o--) {\n        const old_block = old_blocks[o];\n        if (!new_lookup.has(old_block.key))\n            destroy(old_block, lookup);\n    }\n    while (n)\n        insert(new_blocks[n - 1]);\n    return new_blocks;\n}\nfunction validate_each_keys(ctx, list, get_context, get_key) {\n    const keys = new Set();\n    for (let i = 0; i < list.length; i++) {\n        const key = get_key(get_context(ctx, list, i));\n        if (keys.has(key)) {\n            throw new Error('Cannot have duplicate keys in a keyed each');\n        }\n        keys.add(key);\n    }\n}\n\nfunction get_spread_update(levels, updates) {\n    const update = {};\n    const to_null_out = {};\n    const accounted_for = { $$scope: 1 };\n    let i = levels.length;\n    while (i--) {\n        const o = levels[i];\n        const n = updates[i];\n        if (n) {\n            for (const key in o) {\n                if (!(key in n))\n                    to_null_out[key] = 1;\n            }\n            for (const key in n) {\n                if (!accounted_for[key]) {\n                    update[key] = n[key];\n                    accounted_for[key] = 1;\n                }\n            }\n            levels[i] = n;\n        }\n        else {\n            for (const key in o) {\n                accounted_for[key] = 1;\n            }\n        }\n    }\n    for (const key in to_null_out) {\n        if (!(key in update))\n            update[key] = undefined;\n    }\n    return update;\n}\nfunction get_spread_object(spread_props) {\n    return typeof spread_props === 'object' && spread_props !== null ? spread_props : {};\n}\n\n// source: https://html.spec.whatwg.org/multipage/indices.html\nconst boolean_attributes = new Set([\n    'allowfullscreen',\n    'allowpaymentrequest',\n    'async',\n    'autofocus',\n    'autoplay',\n    'checked',\n    'controls',\n    'default',\n    'defer',\n    'disabled',\n    'formnovalidate',\n    'hidden',\n    'ismap',\n    'loop',\n    'multiple',\n    'muted',\n    'nomodule',\n    'novalidate',\n    'open',\n    'playsinline',\n    'readonly',\n    'required',\n    'reversed',\n    'selected'\n]);\n\nconst invalid_attribute_name_character = /[\\s'\">/=\\u{FDD0}-\\u{FDEF}\\u{FFFE}\\u{FFFF}\\u{1FFFE}\\u{1FFFF}\\u{2FFFE}\\u{2FFFF}\\u{3FFFE}\\u{3FFFF}\\u{4FFFE}\\u{4FFFF}\\u{5FFFE}\\u{5FFFF}\\u{6FFFE}\\u{6FFFF}\\u{7FFFE}\\u{7FFFF}\\u{8FFFE}\\u{8FFFF}\\u{9FFFE}\\u{9FFFF}\\u{AFFFE}\\u{AFFFF}\\u{BFFFE}\\u{BFFFF}\\u{CFFFE}\\u{CFFFF}\\u{DFFFE}\\u{DFFFF}\\u{EFFFE}\\u{EFFFF}\\u{FFFFE}\\u{FFFFF}\\u{10FFFE}\\u{10FFFF}]/u;\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n// https://infra.spec.whatwg.org/#noncharacter\nfunction spread(args, classes_to_add) {\n    const attributes = Object.assign({}, ...args);\n    if (classes_to_add) {\n        if (attributes.class == null) {\n            attributes.class = classes_to_add;\n        }\n        else {\n            attributes.class += ' ' + classes_to_add;\n        }\n    }\n    let str = '';\n    Object.keys(attributes).forEach(name => {\n        if (invalid_attribute_name_character.test(name))\n            return;\n        const value = attributes[name];\n        if (value === true)\n            str += ' ' + name;\n        else if (boolean_attributes.has(name.toLowerCase())) {\n            if (value)\n                str += ' ' + name;\n        }\n        else if (value != null) {\n            str += ` ${name}=\"${value}\"`;\n        }\n    });\n    return str;\n}\nconst escaped = {\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;'\n};\nfunction escape(html) {\n    return String(html).replace(/[\"'&<>]/g, match => escaped[match]);\n}\nfunction escape_attribute_value(value) {\n    return typeof value === 'string' ? escape(value) : value;\n}\nfunction escape_object(obj) {\n    const result = {};\n    for (const key in obj) {\n        result[key] = escape_attribute_value(obj[key]);\n    }\n    return result;\n}\nfunction each(items, fn) {\n    let str = '';\n    for (let i = 0; i < items.length; i += 1) {\n        str += fn(items[i], i);\n    }\n    return str;\n}\nconst missing_component = {\n    $$render: () => ''\n};\nfunction validate_component(component, name) {\n    if (!component || !component.$$render) {\n        if (name === 'svelte:component')\n            name += ' this={...}';\n        throw new Error(`<${name}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules`);\n    }\n    return component;\n}\nfunction debug(file, line, column, values) {\n    console.log(`{@debug} ${file ? file + ' ' : ''}(${line}:${column})`); // eslint-disable-line no-console\n    console.log(values); // eslint-disable-line no-console\n    return '';\n}\nlet on_destroy;\nfunction create_ssr_component(fn) {\n    function $$render(result, props, bindings, slots, context) {\n        const parent_component = current_component;\n        const $$ = {\n            on_destroy,\n            context: new Map(context || (parent_component ? parent_component.$$.context : [])),\n            // these will be immediately discarded\n            on_mount: [],\n            before_update: [],\n            after_update: [],\n            callbacks: blank_object()\n        };\n        set_current_component({ $$ });\n        const html = fn(result, props, bindings, slots);\n        set_current_component(parent_component);\n        return html;\n    }\n    return {\n        render: (props = {}, { $$slots = {}, context = new Map() } = {}) => {\n            on_destroy = [];\n            const result = { title: '', head: '', css: new Set() };\n            const html = $$render(result, props, {}, $$slots, context);\n            run_all(on_destroy);\n            return {\n                html,\n                css: {\n                    code: Array.from(result.css).map(css => css.code).join('\\n'),\n                    map: null // TODO\n                },\n                head: result.title + result.head\n            };\n        },\n        $$render\n    };\n}\nfunction add_attribute(name, value, boolean) {\n    if (value == null || (boolean && !value))\n        return '';\n    return ` ${name}${value === true ? '' : `=${typeof value === 'string' ? JSON.stringify(escape(value)) : `\"${value}\"`}`}`;\n}\nfunction add_classes(classes) {\n    return classes ? ` class=\"${classes}\"` : '';\n}\n\nfunction bind(component, name, callback) {\n    const index = component.$$.props[name];\n    if (index !== undefined) {\n        component.$$.bound[index] = callback;\n        callback(component.$$.ctx[index]);\n    }\n}\nfunction create_component(block) {\n    block && block.c();\n}\nfunction claim_component(block, parent_nodes) {\n    block && block.l(parent_nodes);\n}\nfunction mount_component(component, target, anchor, customElement) {\n    const { fragment, on_mount, on_destroy, after_update } = component.$$;\n    fragment && fragment.m(target, anchor);\n    if (!customElement) {\n        // onMount happens before the initial afterUpdate\n        add_render_callback(() => {\n            const new_on_destroy = on_mount.map(run).filter(is_function);\n            if (on_destroy) {\n                on_destroy.push(...new_on_destroy);\n            }\n            else {\n                // Edge case - component was destroyed immediately,\n                // most likely as a result of a binding initialising\n                run_all(new_on_destroy);\n            }\n            component.$$.on_mount = [];\n        });\n    }\n    after_update.forEach(add_render_callback);\n}\nfunction destroy_component(component, detaching) {\n    const $$ = component.$$;\n    if ($$.fragment !== null) {\n        run_all($$.on_destroy);\n        $$.fragment && $$.fragment.d(detaching);\n        // TODO null out other refs, including component.$$ (but need to\n        // preserve final state?)\n        $$.on_destroy = $$.fragment = null;\n        $$.ctx = [];\n    }\n}\nfunction make_dirty(component, i) {\n    if (component.$$.dirty[0] === -1) {\n        dirty_components.push(component);\n        schedule_update();\n        component.$$.dirty.fill(0);\n    }\n    component.$$.dirty[(i / 31) | 0] |= (1 << (i % 31));\n}\nfunction init(component, options, instance, create_fragment, not_equal, props, append_styles, dirty = [-1]) {\n    const parent_component = current_component;\n    set_current_component(component);\n    const $$ = component.$$ = {\n        fragment: null,\n        ctx: null,\n        // state\n        props,\n        update: noop,\n        not_equal,\n        bound: blank_object(),\n        // lifecycle\n        on_mount: [],\n        on_destroy: [],\n        on_disconnect: [],\n        before_update: [],\n        after_update: [],\n        context: new Map(options.context || (parent_component ? parent_component.$$.context : [])),\n        // everything else\n        callbacks: blank_object(),\n        dirty,\n        skip_bound: false,\n        root: options.target || parent_component.$$.root\n    };\n    append_styles && append_styles($$.root);\n    let ready = false;\n    $$.ctx = instance\n        ? instance(component, options.props || {}, (i, ret, ...rest) => {\n            const value = rest.length ? rest[0] : ret;\n            if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {\n                if (!$$.skip_bound && $$.bound[i])\n                    $$.bound[i](value);\n                if (ready)\n                    make_dirty(component, i);\n            }\n            return ret;\n        })\n        : [];\n    $$.update();\n    ready = true;\n    run_all($$.before_update);\n    // `false` as a special case of no DOM component\n    $$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n    if (options.target) {\n        if (options.hydrate) {\n            start_hydrating();\n            const nodes = children(options.target);\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.l(nodes);\n            nodes.forEach(detach);\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.c();\n        }\n        if (options.intro)\n            transition_in(component.$$.fragment);\n        mount_component(component, options.target, options.anchor, options.customElement);\n        end_hydrating();\n        flush();\n    }\n    set_current_component(parent_component);\n}\nlet SvelteElement;\nif (typeof HTMLElement === 'function') {\n    SvelteElement = class extends HTMLElement {\n        constructor() {\n            super();\n            this.attachShadow({ mode: 'open' });\n        }\n        connectedCallback() {\n            const { on_mount } = this.$$;\n            this.$$.on_disconnect = on_mount.map(run).filter(is_function);\n            // @ts-ignore todo: improve typings\n            for (const key in this.$$.slotted) {\n                // @ts-ignore todo: improve typings\n                this.appendChild(this.$$.slotted[key]);\n            }\n        }\n        attributeChangedCallback(attr, _oldValue, newValue) {\n            this[attr] = newValue;\n        }\n        disconnectedCallback() {\n            run_all(this.$$.on_disconnect);\n        }\n        $destroy() {\n            destroy_component(this, 1);\n            this.$destroy = noop;\n        }\n        $on(type, callback) {\n            // TODO should this delegate to addEventListener?\n            const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n            callbacks.push(callback);\n            return () => {\n                const index = callbacks.indexOf(callback);\n                if (index !== -1)\n                    callbacks.splice(index, 1);\n            };\n        }\n        $set($$props) {\n            if (this.$$set && !is_empty($$props)) {\n                this.$$.skip_bound = true;\n                this.$$set($$props);\n                this.$$.skip_bound = false;\n            }\n        }\n    };\n}\n/**\n * Base class for Svelte components. Used when dev=false.\n */\nclass SvelteComponent {\n    $destroy() {\n        destroy_component(this, 1);\n        this.$destroy = noop;\n    }\n    $on(type, callback) {\n        const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n        callbacks.push(callback);\n        return () => {\n            const index = callbacks.indexOf(callback);\n            if (index !== -1)\n                callbacks.splice(index, 1);\n        };\n    }\n    $set($$props) {\n        if (this.$$set && !is_empty($$props)) {\n            this.$$.skip_bound = true;\n            this.$$set($$props);\n            this.$$.skip_bound = false;\n        }\n    }\n}\n\nfunction dispatch_dev(type, detail) {\n    document.dispatchEvent(custom_event(type, Object.assign({ version: '3.44.1' }, detail), true));\n}\nfunction append_dev(target, node) {\n    dispatch_dev('SvelteDOMInsert', { target, node });\n    append(target, node);\n}\nfunction append_hydration_dev(target, node) {\n    dispatch_dev('SvelteDOMInsert', { target, node });\n    append_hydration(target, node);\n}\nfunction insert_dev(target, node, anchor) {\n    dispatch_dev('SvelteDOMInsert', { target, node, anchor });\n    insert(target, node, anchor);\n}\nfunction insert_hydration_dev(target, node, anchor) {\n    dispatch_dev('SvelteDOMInsert', { target, node, anchor });\n    insert_hydration(target, node, anchor);\n}\nfunction detach_dev(node) {\n    dispatch_dev('SvelteDOMRemove', { node });\n    detach(node);\n}\nfunction detach_between_dev(before, after) {\n    while (before.nextSibling && before.nextSibling !== after) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction detach_before_dev(after) {\n    while (after.previousSibling) {\n        detach_dev(after.previousSibling);\n    }\n}\nfunction detach_after_dev(before) {\n    while (before.nextSibling) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction listen_dev(node, event, handler, options, has_prevent_default, has_stop_propagation) {\n    const modifiers = options === true ? ['capture'] : options ? Array.from(Object.keys(options)) : [];\n    if (has_prevent_default)\n        modifiers.push('preventDefault');\n    if (has_stop_propagation)\n        modifiers.push('stopPropagation');\n    dispatch_dev('SvelteDOMAddEventListener', { node, event, handler, modifiers });\n    const dispose = listen(node, event, handler, options);\n    return () => {\n        dispatch_dev('SvelteDOMRemoveEventListener', { node, event, handler, modifiers });\n        dispose();\n    };\n}\nfunction attr_dev(node, attribute, value) {\n    attr(node, attribute, value);\n    if (value == null)\n        dispatch_dev('SvelteDOMRemoveAttribute', { node, attribute });\n    else\n        dispatch_dev('SvelteDOMSetAttribute', { node, attribute, value });\n}\nfunction prop_dev(node, property, value) {\n    node[property] = value;\n    dispatch_dev('SvelteDOMSetProperty', { node, property, value });\n}\nfunction dataset_dev(node, property, value) {\n    node.dataset[property] = value;\n    dispatch_dev('SvelteDOMSetDataset', { node, property, value });\n}\nfunction set_data_dev(text, data) {\n    data = '' + data;\n    if (text.wholeText === data)\n        return;\n    dispatch_dev('SvelteDOMSetData', { node: text, data });\n    text.data = data;\n}\nfunction validate_each_argument(arg) {\n    if (typeof arg !== 'string' && !(arg && typeof arg === 'object' && 'length' in arg)) {\n        let msg = '{#each} only iterates over array-like objects.';\n        if (typeof Symbol === 'function' && arg && Symbol.iterator in arg) {\n            msg += ' You can use a spread to convert this iterable into an array.';\n        }\n        throw new Error(msg);\n    }\n}\nfunction validate_slots(name, slot, keys) {\n    for (const slot_key of Object.keys(slot)) {\n        if (!~keys.indexOf(slot_key)) {\n            console.warn(`<${name}> received an unexpected slot \"${slot_key}\".`);\n        }\n    }\n}\n/**\n * Base class for Svelte components with some minor dev-enhancements. Used when dev=true.\n */\nclass SvelteComponentDev extends SvelteComponent {\n    constructor(options) {\n        if (!options || (!options.target && !options.$$inline)) {\n            throw new Error(\"'target' is a required option\");\n        }\n        super();\n    }\n    $destroy() {\n        super.$destroy();\n        this.$destroy = () => {\n            console.warn('Component was already destroyed'); // eslint-disable-line no-console\n        };\n    }\n    $capture_state() { }\n    $inject_state() { }\n}\n/**\n * Base class to create strongly typed Svelte components.\n * This only exists for typing purposes and should be used in `.d.ts` files.\n *\n * ### Example:\n *\n * You have component library on npm called `component-library`, from which\n * you export a component called `MyComponent`. For Svelte+TypeScript users,\n * you want to provide typings. Therefore you create a `index.d.ts`:\n * ```ts\n * import { SvelteComponentTyped } from \"svelte\";\n * export class MyComponent extends SvelteComponentTyped<{foo: string}> {}\n * ```\n * Typing this makes it possible for IDEs like VS Code with the Svelte extension\n * to provide intellisense and to use the component like this in a Svelte file\n * with TypeScript:\n * ```svelte\n * <script lang=\"ts\">\n * \timport { MyComponent } from \"component-library\";\n * </script>\n * <MyComponent foo={'bar'} />\n * ```\n *\n * #### Why not make this part of `SvelteComponent(Dev)`?\n * Because\n * ```ts\n * class ASubclassOfSvelteComponent extends SvelteComponent<{foo: string}> {}\n * const component: typeof SvelteComponent = ASubclassOfSvelteComponent;\n * ```\n * will throw a type error, so we need to separate the more strictly typed class.\n */\nclass SvelteComponentTyped extends SvelteComponentDev {\n    constructor(options) {\n        super(options);\n    }\n}\nfunction loop_guard(timeout) {\n    const start = Date.now();\n    return () => {\n        if (Date.now() - start > timeout) {\n            throw new Error('Infinite loop detected');\n        }\n    };\n}\n\nexport { HtmlTag, HtmlTagHydration, SvelteComponent, SvelteComponentDev, SvelteComponentTyped, SvelteElement, action_destroyer, add_attribute, add_classes, add_flush_callback, add_location, add_render_callback, add_resize_listener, add_transform, afterUpdate, append, append_dev, append_empty_stylesheet, append_hydration, append_hydration_dev, append_styles, assign, attr, attr_dev, attribute_to_object, beforeUpdate, bind, binding_callbacks, blank_object, bubble, check_outros, children, claim_component, claim_element, claim_html_tag, claim_space, claim_svg_element, claim_text, clear_loops, component_subscribe, compute_rest_props, compute_slots, createEventDispatcher, create_animation, create_bidirectional_transition, create_component, create_in_transition, create_out_transition, create_slot, create_ssr_component, current_component, custom_event, dataset_dev, debug, destroy_block, destroy_component, destroy_each, detach, detach_after_dev, detach_before_dev, detach_between_dev, detach_dev, dirty_components, dispatch_dev, each, element, element_is, empty, end_hydrating, escape, escape_attribute_value, escape_object, escaped, exclude_internal_props, fix_and_destroy_block, fix_and_outro_and_destroy_block, fix_position, flush, getAllContexts, getContext, get_all_dirty_from_scope, get_binding_group_value, get_current_component, get_custom_elements_slots, get_root_for_style, get_slot_changes, get_spread_object, get_spread_update, get_store_value, globals, group_outros, handle_promise, hasContext, has_prop, identity, init, insert, insert_dev, insert_hydration, insert_hydration_dev, intros, invalid_attribute_name_character, is_client, is_crossorigin, is_empty, is_function, is_promise, listen, listen_dev, loop, loop_guard, missing_component, mount_component, noop, not_equal, now, null_to_empty, object_without_properties, onDestroy, onMount, once, outro_and_destroy_block, prevent_default, prop_dev, query_selector_all, raf, run, run_all, safe_not_equal, schedule_update, select_multiple_value, select_option, select_options, select_value, self, setContext, set_attributes, set_current_component, set_custom_element_data, set_data, set_data_dev, set_input_type, set_input_value, set_now, set_raf, set_store_value, set_style, set_svg_attributes, space, spread, src_url_equal, start_hydrating, stop_propagation, subscribe, svg_element, text, tick, time_ranges_to_array, to_number, toggle_class, transition_in, transition_out, trusted, update_await_block_branch, update_keyed_each, update_slot, update_slot_base, validate_component, validate_each_argument, validate_each_keys, validate_slots, validate_store, xlink_attr };\n","const s_DEFAULT_TRANSITION = () => void 0;\r\nconst s_DEFAULT_TRANSITION_OPTIONS = {};\r\n\r\nexport { s_DEFAULT_TRANSITION, s_DEFAULT_TRANSITION_OPTIONS };\r\n","/**\r\n * Localize a string including variable formatting for input arguments. Provide a string ID which defines the localized\r\n * template. Variables can be included in the template enclosed in braces and will be substituted using those named\r\n * keys.\r\n *\r\n * @param {string}   stringId - The string ID to translate.\r\n *\r\n * @param {object}   [data] - Provided input data.\r\n *\r\n * @returns {string} The translated and formatted string\r\n */\r\nexport function localize(stringId, data)\r\n{\r\n   const result = typeof data !== 'object' ? game.i18n.localize(stringId) : game.i18n.format(stringId, data);\r\n   return result !== void 0 ? result : '';\r\n}","/**\r\n * Provides a method to determine if the passed in Svelte component has a getter accessor.\r\n *\r\n * @param {*}        component - Svelte component.\r\n *\r\n * @param {string}   accessor - Accessor to test.\r\n *\r\n * @returns {boolean} Whether the component has the getter for accessor.\r\n */\r\nexport function hasGetter(component, accessor)\r\n{\r\n   if (component === null || component === void 0) { return false; }\r\n\r\n   // Get the prototype which is the parent SvelteComponent that has any getter / setters.\r\n   const prototype = Object.getPrototypeOf(component);\r\n   const descriptor = Object.getOwnPropertyDescriptor(prototype, accessor);\r\n\r\n   return !(descriptor === void 0 || descriptor.get === void 0);\r\n}\r\n\r\n/**\r\n * Provides a method to determine if the passed in Svelte component has a getter & setter accessor.\r\n *\r\n * @param {*}        component - Svelte component.\r\n *\r\n * @param {string}   accessor - Accessor to test.\r\n *\r\n * @returns {boolean} Whether the component has the getter and setter for accessor.\r\n */\r\nexport function hasAccessor(component, accessor)\r\n{\r\n   if (component === null || component === void 0) { return false; }\r\n\r\n   // Get the prototype which is the parent SvelteComponent that has any getter / setters.\r\n   const prototype = Object.getPrototypeOf(component);\r\n   const descriptor = Object.getOwnPropertyDescriptor(prototype, accessor);\r\n\r\n   return !(descriptor === void 0 || descriptor.get === void 0 || descriptor.set === void 0);\r\n}\r\n\r\n/**\r\n * Provides a method to determine if the passed in Svelte component has a setter accessor.\r\n *\r\n * @param {*}        component - Svelte component.\r\n *\r\n * @param {string}   accessor - Accessor to test.\r\n *\r\n * @returns {boolean} Whether the component has the setter for accessor.\r\n */\r\nexport function hasSetter(component, accessor)\r\n{\r\n   if (component === null || component === void 0) { return false; }\r\n\r\n   // Get the prototype which is the parent SvelteComponent that has any getter / setters.\r\n   const prototype = Object.getPrototypeOf(component);\r\n   const descriptor = Object.getOwnPropertyDescriptor(prototype, accessor);\r\n\r\n   return !(descriptor === void 0 || descriptor.set === void 0);\r\n}","/**\r\n * Provides basic duck typing to determine if the provided function is a constructor function for a Svelte component.\r\n *\r\n * @param {*}  comp - Data to check as a Svelte component.\r\n *\r\n * @returns {boolean} Whether basic duck typing succeeds.\r\n */\r\nexport function isSvelteComponent(comp)\r\n{\r\n   if (comp === null || comp === void 0 || typeof comp !== 'function') { return false; }\r\n\r\n   return typeof window !== void 0 ?\r\n    typeof comp.prototype.$destroy === 'function' && typeof comp.prototype.$on === 'function' : // client-side\r\n     typeof comp.render === 'function'; // server-side\r\n}","import { check_outros, group_outros, transition_out } from 'svelte/internal';\r\n\r\n/**\r\n * Runs outro transition then destroys Svelte component.\r\n *\r\n * Workaround for https://github.com/sveltejs/svelte/issues/4056\r\n *\r\n * @param {SvelteComponent}   instance - A Svelte component.\r\n */\r\nexport async function outroAndDestroy(instance)\r\n{\r\n   return new Promise((resolve) =>\r\n   {\r\n      if (instance.$$.fragment && instance.$$.fragment.o)\r\n      {\r\n         group_outros();\r\n         transition_out(instance.$$.fragment, 0, 0, () =>\r\n         {\r\n            instance.$destroy();\r\n            resolve();\r\n         });\r\n         check_outros();\r\n      }\r\n      else\r\n      {\r\n         instance.$destroy();\r\n         resolve();\r\n      }\r\n   });\r\n}","import { isSvelteComponent } from './isSvelteComponent.js';\r\n\r\n/**\r\n * Parses a TyphonJS Svelte config object ensuring that classes specified are Svelte components and props are set\r\n * correctly.\r\n *\r\n * @param {object}   config - Svelte config object.\r\n *\r\n * @param {*}        [thisArg] - `This` reference to set for invoking any props function.\r\n *\r\n * @returns {object} The processed Svelte config object.\r\n */\r\nexport function parseSvelteConfig(config, thisArg = void 0)\r\n{\r\n   if (typeof config !== 'object')\r\n   {\r\n      throw new TypeError(`parseSvelteConfig - 'config' is not an object:\\n${JSON.stringify(config)}.`);\r\n   }\r\n\r\n   if (!isSvelteComponent(config.class))\r\n   {\r\n      throw new TypeError(\r\n       `parseSvelteConfig - 'class' is not a Svelte component constructor for config:\\n${JSON.stringify(config)}.`);\r\n   }\r\n\r\n   if (config.hydrate !== void 0 && typeof config.hydrate !== 'boolean')\r\n   {\r\n      throw new TypeError(\r\n       `parseSvelteConfig - 'hydrate' is not a boolean for config:\\n${JSON.stringify(config)}.`);\r\n   }\r\n\r\n   if (config.intro !== void 0 && typeof config.intro !== 'boolean')\r\n   {\r\n      throw new TypeError(\r\n       `parseSvelteConfig - 'intro' is not a boolean for config:\\n${JSON.stringify(config)}.`);\r\n   }\r\n\r\n   if (config.target !== void 0 && typeof config.target !== 'string' && !(config.target instanceof HTMLElement) &&\r\n    !(config.target instanceof ShadowRoot) && !(config.target instanceof DocumentFragment))\r\n   {\r\n      throw new TypeError(\r\n       `parseSvelteConfig - 'target' is not a string, HTMLElement, ShadowRoot, or DocumentFragment for config:\\n${\r\n        JSON.stringify(config)}.`);\r\n   }\r\n\r\n   if (config.anchor !== void 0 && typeof config.anchor !== 'string' && !(config.anchor instanceof HTMLElement) &&\r\n    !(config.anchor instanceof ShadowRoot) && !(config.anchor instanceof DocumentFragment))\r\n   {\r\n      throw new TypeError(\r\n       `parseSvelteConfig - 'anchor' is not a string, HTMLElement, ShadowRoot, or DocumentFragment for config:\\n${\r\n        JSON.stringify(config)}.`);\r\n   }\r\n\r\n   if (config.context !== void 0 && typeof config.context !== 'function' && !(config.context instanceof Map) &&\r\n    typeof config.context !== 'object')\r\n   {\r\n      throw new TypeError(\r\n       `parseSvelteConfig - 'context' is not a Map, function or object for config:\\n${JSON.stringify(config)}.`);\r\n   }\r\n\r\n   // Validate extra TyphonJS options --------------------------------------------------------------------------------\r\n\r\n   // `selectorTarget` optionally stores a target element found in main element.\r\n   if (config.selectorTarget !== void 0 && typeof config.selectorTarget !== 'string')\r\n   {\r\n      throw new TypeError(\r\n       `parseSvelteConfig - 'selectorTarget' is not a string for config:\\n${JSON.stringify(config)}.`);\r\n   }\r\n\r\n   // `options` stores `injectApp`, `injectEventbus`, and `selectorElement`.\r\n   if (config.options !== void 0 && typeof config.options !== 'object')\r\n   {\r\n      throw new TypeError(\r\n       `parseSvelteConfig - 'options' is not an object for config:\\n${JSON.stringify(config)}.`);\r\n   }\r\n\r\n   // Validate TyphonJS standard options.\r\n   if (config.options !== void 0)\r\n   {\r\n      if (config.options.injectApp !== void 0 && typeof config.options.injectApp !== 'boolean')\r\n      {\r\n         throw new TypeError(\r\n          `parseSvelteConfig - 'options.injectApp' is not a boolean for config:\\n${JSON.stringify(config)}.`);\r\n      }\r\n\r\n      if (config.options.injectEventbus !== void 0 && typeof config.options.injectEventbus !== 'boolean')\r\n      {\r\n         throw new TypeError(\r\n          `parseSvelteConfig - 'options.injectEventbus' is not a boolean for config:\\n${JSON.stringify(config)}.`);\r\n      }\r\n\r\n      // `selectorElement` optionally stores a main element selector to be found in a HTMLElement target.\r\n      if (config.options.selectorElement !== void 0 && typeof config.options.selectorElement !== 'string')\r\n      {\r\n         throw new TypeError(\r\n          `parseSvelteConfig - 'selectorElement' is not a string for config:\\n${JSON.stringify(config)}.`);\r\n      }\r\n   }\r\n\r\n   const svelteConfig = { ...config };\r\n\r\n   // Delete extra Svelte options.\r\n   delete svelteConfig.options;\r\n\r\n   let externalContext = {};\r\n\r\n   // If a context callback function is provided then invoke it with `this` being the Foundry app.\r\n   // If an object is returned it adds the entries to external context.\r\n   if (typeof svelteConfig.context === 'function')\r\n   {\r\n      const contextFunc = svelteConfig.context;\r\n      delete svelteConfig.context;\r\n\r\n      const result = contextFunc.call(thisArg);\r\n      if (typeof result === 'object')\r\n      {\r\n         externalContext = { ...result };\r\n      }\r\n      else\r\n      {\r\n         throw new Error(`parseSvelteConfig - 'context' is a function that did not return an object for config:\\n${\r\n          JSON.stringify(config)}`);\r\n      }\r\n   }\r\n   else if (svelteConfig.context instanceof Map)\r\n   {\r\n      externalContext = Object.fromEntries(svelteConfig.context);\r\n      delete svelteConfig.context;\r\n   }\r\n   else if (typeof svelteConfig.context === 'object')\r\n   {\r\n      externalContext = svelteConfig.context;\r\n      delete svelteConfig.context;\r\n   }\r\n\r\n   // If a props is a function then invoke it with `this` being the Foundry app.\r\n   // If an object is returned set it as the props.\r\n   svelteConfig.props = s_PROCESS_PROPS(svelteConfig.props, thisArg, config);\r\n\r\n   // Process children components attaching to external context.\r\n   if (Array.isArray(svelteConfig.children))\r\n   {\r\n      const children = [];\r\n\r\n      for (let cntr = 0; cntr < svelteConfig.children.length; cntr++)\r\n      {\r\n         const child = svelteConfig.children[cntr];\r\n\r\n         if (!isSvelteComponent(child.class))\r\n         {\r\n            throw new Error(`parseSvelteConfig - 'class' is not a Svelte component for child[${cntr}] for config:\\n${\r\n             JSON.stringify(config)}`);\r\n         }\r\n\r\n         child.props = s_PROCESS_PROPS(child.props, thisArg, config);\r\n\r\n         children.push(child);\r\n      }\r\n\r\n      if (children.length > 0)\r\n      {\r\n         externalContext.children = children;\r\n      }\r\n\r\n      delete svelteConfig.children;\r\n   }\r\n   else if (typeof svelteConfig.children === 'object')\r\n   {\r\n      if (!isSvelteComponent(svelteConfig.children.class))\r\n      {\r\n         throw new Error(`parseSvelteConfig - 'class' is not a Svelte component for children object for config:\\n${\r\n          JSON.stringify(config)}`);\r\n      }\r\n\r\n      svelteConfig.children.props = s_PROCESS_PROPS(svelteConfig.children.props, thisArg, config);\r\n\r\n      externalContext.children = [svelteConfig.children];\r\n      delete svelteConfig.children;\r\n   }\r\n\r\n   if (!(svelteConfig.context instanceof Map))\r\n   {\r\n      svelteConfig.context = new Map();\r\n   }\r\n\r\n   svelteConfig.context.set('external', externalContext);\r\n\r\n   return svelteConfig;\r\n}\r\n\r\n/**\r\n * Processes Svelte props. Potentially props can be a function to invoke with `thisArg`.\r\n *\r\n * @param {object|Function}   props - Svelte props.\r\n *\r\n * @param {*}                 thisArg - `This` reference to set for invoking any props function.\r\n *\r\n * @param {object}            config - Svelte config\r\n *\r\n * @returns {object|void}     Svelte props.\r\n */\r\nfunction s_PROCESS_PROPS(props, thisArg, config)\r\n{\r\n   // If a props is a function then invoke it with `this` being the Foundry app.\r\n   // If an object is returned set it as the props.\r\n   if (typeof props === 'function')\r\n   {\r\n      const result = props.call(thisArg);\r\n      if (typeof result === 'object')\r\n      {\r\n         return result;\r\n      }\r\n      else\r\n      {\r\n         throw new Error(`parseSvelteConfig - 'props' is a function that did not return an object for config:\\n${\r\n          JSON.stringify(config)}`);\r\n      }\r\n   }\r\n   else if (typeof props === 'object')\r\n   {\r\n      return props;\r\n   }\r\n   else if (props !== void 0)\r\n   {\r\n      throw new Error(\r\n       `parseSvelteConfig - 'props' is not a function or an object for config:\\n${JSON.stringify(config)}`);\r\n   }\r\n\r\n   return {};\r\n}","/**\r\n * Defines the application shell contract. If Svelte components export getter / setters for the following properties\r\n * then that component is considered an application shell.\r\n *\r\n * @type {string[]}\r\n */\r\nconst applicationShellContract = ['elementRoot'];\r\n\r\nObject.freeze(applicationShellContract);\r\n\r\nexport { applicationShellContract };","import { applicationShellContract } from './applicationShellContract';\r\n\r\n/**\r\n * Provides a method to determine if the passed in object is ApplicationShell or TJSApplicationShell.\r\n *\r\n * @param {*}  component - Object / component to test.\r\n *\r\n * @returns {boolean} Whether the component is a ApplicationShell or TJSApplicationShell.\r\n */\r\nexport function isApplicationShell(component)\r\n{\r\n   if (component === null || component === void 0) { return false; }\r\n\r\n   // Get the prototype which is the parent SvelteComponent that has any getter / setters.\r\n   const prototype = Object.getPrototypeOf(component);\r\n\r\n   // Verify the application shell contract. If the accessors (getters / setters) are defined for\r\n   // `applicationShellContract`.\r\n   for (const accessor of applicationShellContract)\r\n   {\r\n      const descriptor = Object.getOwnPropertyDescriptor(prototype, accessor);\r\n      if (descriptor === void 0 || descriptor.get === void 0 || descriptor.set === void 0) { return false; }\r\n   }\r\n\r\n   return true;\r\n}","import { noop, safe_not_equal, subscribe, run_all, is_function } from '../internal/index.mjs';\nexport { get_store_value as get } from '../internal/index.mjs';\n\nconst subscriber_queue = [];\n/**\n * Creates a `Readable` store that allows reading by subscription.\n * @param value initial value\n * @param {StartStopNotifier}start start and stop notifications for subscriptions\n */\nfunction readable(value, start) {\n    return {\n        subscribe: writable(value, start).subscribe\n    };\n}\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n * @param {*=}value initial value\n * @param {StartStopNotifier=}start start and stop notifications for subscriptions\n */\nfunction writable(value, start = noop) {\n    let stop;\n    const subscribers = new Set();\n    function set(new_value) {\n        if (safe_not_equal(value, new_value)) {\n            value = new_value;\n            if (stop) { // store is ready\n                const run_queue = !subscriber_queue.length;\n                for (const subscriber of subscribers) {\n                    subscriber[1]();\n                    subscriber_queue.push(subscriber, value);\n                }\n                if (run_queue) {\n                    for (let i = 0; i < subscriber_queue.length; i += 2) {\n                        subscriber_queue[i][0](subscriber_queue[i + 1]);\n                    }\n                    subscriber_queue.length = 0;\n                }\n            }\n        }\n    }\n    function update(fn) {\n        set(fn(value));\n    }\n    function subscribe(run, invalidate = noop) {\n        const subscriber = [run, invalidate];\n        subscribers.add(subscriber);\n        if (subscribers.size === 1) {\n            stop = start(set) || noop;\n        }\n        run(value);\n        return () => {\n            subscribers.delete(subscriber);\n            if (subscribers.size === 0) {\n                stop();\n                stop = null;\n            }\n        };\n    }\n    return { set, update, subscribe };\n}\nfunction derived(stores, fn, initial_value) {\n    const single = !Array.isArray(stores);\n    const stores_array = single\n        ? [stores]\n        : stores;\n    const auto = fn.length < 2;\n    return readable(initial_value, (set) => {\n        let inited = false;\n        const values = [];\n        let pending = 0;\n        let cleanup = noop;\n        const sync = () => {\n            if (pending) {\n                return;\n            }\n            cleanup();\n            const result = fn(single ? values[0] : values, set);\n            if (auto) {\n                set(result);\n            }\n            else {\n                cleanup = is_function(result) ? result : noop;\n            }\n        };\n        const unsubscribers = stores_array.map((store, i) => subscribe(store, (value) => {\n            values[i] = value;\n            pending &= ~(1 << i);\n            if (inited) {\n                sync();\n            }\n        }, () => {\n            pending |= (1 << i);\n        }));\n        inited = true;\n        sync();\n        return function stop() {\n            run_all(unsubscribers);\n            cleanup();\n        };\n    });\n}\n\nexport { derived, readable, writable };\n","/**\r\n * Provides common object manipulation utilities including depth traversal, obtaining accessors, safely setting values /\r\n * equality tests, and validation.\r\n */\r\n\r\nconst s_TAG_MAP = '[object Map]';\r\nconst s_TAG_SET = '[object Set]';\r\nconst s_TAG_STRING = '[object String]';\r\n\r\n/**\r\n * @typedef {object} ValidationEntry - Provides data for a validation check.\r\n *\r\n * @property {string}               [type] - Optionally tests with a typeof check.\r\n *\r\n * @property {Array<*>|Function|Set<*>}  [expected] - Optional array, function, or set of expected values to test\r\n * against.\r\n *\r\n * @property {string}               [message] - Optional message to include.\r\n *\r\n * @property {boolean}              [required=true] - When false if the accessor is missing validation is skipped.\r\n *\r\n * @property {boolean}              [error=true] - When true and error is thrown otherwise a boolean is returned.\r\n */\r\n\r\n/**\r\n * Freezes all entries traversed that are objects including entries in arrays.\r\n *\r\n * @param {object|Array}   data - An object or array.\r\n *\r\n * @param {string[]}       skipFreezeKeys - An array of strings indicating keys of objects to not freeze.\r\n *\r\n * @returns {object|Array} The frozen object.\r\n */\r\nexport function deepFreeze(data, skipFreezeKeys = [])\r\n{\r\n   /* istanbul ignore if */\r\n   if (typeof data !== 'object') { throw new TypeError(`'data' is not an 'object'.`); }\r\n\r\n   /* istanbul ignore if */\r\n   if (!Array.isArray(skipFreezeKeys)) { throw new TypeError(`'skipFreezeKeys' is not an 'array'.`); }\r\n\r\n   return _deepFreeze(data, skipFreezeKeys);\r\n}\r\n\r\n/**\r\n * Performs a naive depth traversal of an object / array. The data structure _must not_ have circular references.\r\n * The result of the callback function is used to modify in place the given data.\r\n *\r\n * @param {object|Array}   data - An object or array.\r\n *\r\n * @param {Function}       func - A callback function to process leaf values in children arrays or object members.\r\n *\r\n * @param {boolean}        modify - If true then the result of the callback function is used to modify in place\r\n *                                  the given data.\r\n *\r\n * @returns {*} The data object.\r\n */\r\nexport function depthTraverse(data, func, modify = false)\r\n{\r\n   /* istanbul ignore if */\r\n   if (typeof data !== 'object') { throw new TypeError(`'data' is not an 'object'.`); }\r\n\r\n   /* istanbul ignore if */\r\n   if (typeof func !== 'function') { throw new TypeError(`'func' is not a 'function'.`); }\r\n\r\n   return _depthTraverse(data, func, modify);\r\n}\r\n\r\n/**\r\n * Returns a list of accessor keys by traversing the given object.\r\n *\r\n * @param {object}   data - An object to traverse for accessor keys.\r\n *\r\n * @returns {string[]} Accessor list.\r\n */\r\nexport function getAccessorList(data)\r\n{\r\n   if (typeof data !== 'object') { throw new TypeError(`getAccessorList error: 'data' is not an 'object'.`); }\r\n\r\n   return _getAccessorList(data);\r\n}\r\n\r\n/**\r\n * Tests for whether an object is iterable.\r\n *\r\n * @param {object} object - An object.\r\n *\r\n * @returns {boolean} Whether object is iterable.\r\n */\r\nexport function isIterable(object)\r\n{\r\n   if (object === null || object === void 0 || typeof object !== 'object') { return false; }\r\n\r\n   return typeof object[Symbol.iterator] === 'function';\r\n}\r\n\r\n/**\r\n * Tests for whether an object is async iterable.\r\n *\r\n * @param {object} object - An object.\r\n *\r\n * @returns {boolean} Whether object is async iterable.\r\n */\r\nexport function isIterableAsync(object)\r\n{\r\n   if (object === null || object === void 0 || typeof object !== 'object') { return false; }\r\n\r\n   return typeof object[Symbol.asyncIterator] === 'function';\r\n}\r\n\r\n/**\r\n * Tests for whether object is not null and a typeof object.\r\n *\r\n * @param {object} object - An object.\r\n *\r\n * @returns {boolean} Is it an object.\r\n */\r\nexport function isObject(object)\r\n{\r\n   return object !== null && typeof object === 'object';\r\n}\r\n\r\n/**\r\n * Safely returns keys on an object or an empty array if not an object.\r\n *\r\n * @param {object} object - An object.\r\n *\r\n * @returns {string[]} Object keys\r\n */\r\nexport function objectKeys(object)\r\n{\r\n   return object !== null && typeof object === 'object' ? Object.keys(object) : [];\r\n}\r\n\r\n/**\r\n * Safely returns an objects size. Note for String objects unicode is not taken into consideration.\r\n *\r\n * @param {object} object - An object.\r\n *\r\n * @returns {number} Size of object.\r\n */\r\nexport function objectSize(object)\r\n{\r\n   if (object === void 0 || object === null || typeof object !== 'object') { return 0; }\r\n\r\n   const tag = Object.prototype.toString.call(object);\r\n\r\n   if (tag === s_TAG_MAP || tag === s_TAG_SET) { return object.size; }\r\n\r\n   if (tag === s_TAG_STRING) { return object.length; }\r\n\r\n   return Object.keys(object).length;\r\n}\r\n\r\n/**\r\n * Provides a way to safely access an objects data / entries given an accessor string which describes the\r\n * entries to walk. To access deeper entries into the object format the accessor string with `.` between entries\r\n * to walk.\r\n *\r\n * @param {object}   data - An object to access entry data.\r\n *\r\n * @param {string}   accessor - A string describing the entries to access.\r\n *\r\n * @param {*}        defaultValue - (Optional) A default value to return if an entry for accessor is not found.\r\n *\r\n * @returns {object} The data object.\r\n */\r\nexport function safeAccess(data, accessor, defaultValue = void 0)\r\n{\r\n   if (typeof data !== 'object') { return defaultValue; }\r\n   if (typeof accessor !== 'string') { return defaultValue; }\r\n\r\n   const access = accessor.split('.');\r\n\r\n   // Walk through the given object by the accessor indexes.\r\n   for (let cntr = 0; cntr < access.length; cntr++)\r\n   {\r\n      // If the next level of object access is undefined or null then return the empty string.\r\n      if (typeof data[access[cntr]] === 'undefined' || data[access[cntr]] === null) { return defaultValue; }\r\n\r\n      data = data[access[cntr]];\r\n   }\r\n\r\n   return data;\r\n}\r\n\r\n/**\r\n * Provides a way to safely batch set an objects data / entries given an array of accessor strings which describe the\r\n * entries to walk. To access deeper entries into the object format the accessor string with `.` between entries\r\n * to walk. If value is an object the accessor will be used to access a target value from `value` which is\r\n * subsequently set to `data` by the given operation. If `value` is not an object it will be used as the target\r\n * value to set across all accessors.\r\n *\r\n * @param {object}         data - An object to access entry data.\r\n *\r\n * @param {Array<string>}  accessors - A string describing the entries to access.\r\n *\r\n * @param {object|*}       value - A new value to set if an entry for accessor is found.\r\n *\r\n * @param {string}         [operation='set'] - Operation to perform including: 'add', 'div', 'mult', 'set',\r\n *                                             'set-undefined', 'sub'.\r\n *\r\n * @param {object|*}       [defaultAccessValue=0] - A new value to set if an entry for accessor is found.\r\n *\r\n *\r\n * @param {boolean}  [createMissing=true] - If true missing accessor entries will be created as objects\r\n *                                          automatically.\r\n */\r\nexport function safeBatchSet(data, accessors, value, operation = 'set', defaultAccessValue = 0, createMissing = true)\r\n{\r\n   if (typeof data !== 'object') { throw new TypeError(`safeBatchSet Error: 'data' is not an 'object'.`); }\r\n   if (!Array.isArray(accessors)) { throw new TypeError(`safeBatchSet Error: 'accessors' is not an 'array'.`); }\r\n\r\n   if (typeof value === 'object')\r\n   {\r\n      accessors.forEach((accessor) =>\r\n      {\r\n         const targetValue = safeAccess(value, accessor, defaultAccessValue);\r\n         safeSet(data, accessor, targetValue, operation, createMissing);\r\n      });\r\n   }\r\n   else\r\n   {\r\n      accessors.forEach((accessor) =>\r\n      {\r\n         safeSet(data, accessor, value, operation, createMissing);\r\n      });\r\n   }\r\n}\r\n\r\n/**\r\n * Compares a source object and values of entries against a target object. If the entries in the source object match\r\n * the target object then `true` is returned otherwise `false`. If either object is undefined or null then false\r\n * is returned.\r\n *\r\n * @param {object}   source - Source object.\r\n *\r\n * @param {object}   target - Target object.\r\n *\r\n * @returns {boolean} True if equal.\r\n */\r\nexport function safeEqual(source, target)\r\n{\r\n   if (typeof source === 'undefined' || source === null || typeof target === 'undefined' || target === null)\r\n   {\r\n      return false;\r\n   }\r\n\r\n   const sourceAccessors = getAccessorList(source);\r\n\r\n   for (let cntr = 0; cntr < sourceAccessors.length; cntr++)\r\n   {\r\n      const accessor = sourceAccessors[cntr];\r\n\r\n      const sourceObjectValue = safeAccess(source, accessor);\r\n      const targetObjectValue = safeAccess(target, accessor);\r\n\r\n      if (sourceObjectValue !== targetObjectValue) { return false; }\r\n   }\r\n\r\n   return true;\r\n}\r\n\r\n/**\r\n * Provides a way to safely set an objects data / entries given an accessor string which describes the\r\n * entries to walk. To access deeper entries into the object format the accessor string with `.` between entries\r\n * to walk.\r\n *\r\n * @param {object}   data - An object to access entry data.\r\n *\r\n * @param {string}   accessor - A string describing the entries to access.\r\n *\r\n * @param {*}        value - A new value to set if an entry for accessor is found.\r\n *\r\n * @param {string}   [operation='set'] - Operation to perform including: 'add', 'div', 'mult', 'set',\r\n *                                       'set-undefined', 'sub'.\r\n *\r\n * @param {boolean}  [createMissing=true] - If true missing accessor entries will be created as objects\r\n *                                          automatically.\r\n *\r\n * @returns {boolean} True if successful.\r\n */\r\nexport function safeSet(data, accessor, value, operation = 'set', createMissing = true)\r\n{\r\n   if (typeof data !== 'object') { throw new TypeError(`safeSet Error: 'data' is not an 'object'.`); }\r\n   if (typeof accessor !== 'string') { throw new TypeError(`safeSet Error: 'accessor' is not a 'string'.`); }\r\n\r\n   const access = accessor.split('.');\r\n\r\n   // Walk through the given object by the accessor indexes.\r\n   for (let cntr = 0; cntr < access.length; cntr++)\r\n   {\r\n      // If data is an array perform validation that the accessor is a positive integer otherwise quit.\r\n      if (Array.isArray(data))\r\n      {\r\n         const number = (+access[cntr]);\r\n\r\n         if (!Number.isInteger(number) || number < 0) { return false; }\r\n      }\r\n\r\n      if (cntr === access.length - 1)\r\n      {\r\n         switch (operation)\r\n         {\r\n            case 'add':\r\n               data[access[cntr]] += value;\r\n               break;\r\n\r\n            case 'div':\r\n               data[access[cntr]] /= value;\r\n               break;\r\n\r\n            case 'mult':\r\n               data[access[cntr]] *= value;\r\n               break;\r\n\r\n            case 'set':\r\n               data[access[cntr]] = value;\r\n               break;\r\n\r\n            case 'set-undefined':\r\n               if (typeof data[access[cntr]] === 'undefined') { data[access[cntr]] = value; }\r\n               break;\r\n\r\n            case 'sub':\r\n               data[access[cntr]] -= value;\r\n               break;\r\n         }\r\n      }\r\n      else\r\n      {\r\n         // If createMissing is true and the next level of object access is undefined then create a new object entry.\r\n         if (createMissing && typeof data[access[cntr]] === 'undefined') { data[access[cntr]] = {}; }\r\n\r\n         // Abort if the next level is null or not an object and containing a value.\r\n         if (data[access[cntr]] === null || typeof data[access[cntr]] !== 'object') { return false; }\r\n\r\n         data = data[access[cntr]];\r\n      }\r\n   }\r\n\r\n   return true;\r\n}\r\n\r\n/**\r\n * Performs bulk setting of values to the given data object.\r\n *\r\n * @param {object}            data - The data object to set data.\r\n *\r\n * @param {object<string, *>} accessorValues - Object of accessor keys to values to set.\r\n *\r\n * @param {string}            [operation='set'] - Operation to perform including: 'add', 'div', 'mult', 'set', 'sub';\r\n *                                                default (`set`).\r\n *\r\n * @param {boolean}           [createMissing=true] - If true missing accessor entries will be created as objects\r\n *                                                   automatically.\r\n */\r\nexport function safeSetAll(data, accessorValues, operation = 'set', createMissing = true)\r\n{\r\n   if (typeof data !== 'object') { throw new TypeError(`'data' is not an 'object'.`); }\r\n   if (typeof accessorValues !== 'object') { throw new TypeError(`'accessorValues' is not an 'object'.`); }\r\n\r\n   for (const accessor of Object.keys(accessorValues))\r\n   {\r\n      if (!accessorValues.hasOwnProperty(accessor)) { continue; } // eslint-disable-line no-prototype-builtins\r\n\r\n      safeSet(data, accessor, accessorValues[accessor], operation, createMissing);\r\n   }\r\n}\r\n\r\n/**\r\n * Performs bulk validation of data given an object, `validationData`, which describes all entries to test.\r\n *\r\n * @param {object}                           data - The data object to test.\r\n *\r\n * @param {object<string, ValidationEntry>}  validationData - Key is the accessor / value is a validation entry.\r\n *\r\n * @param {string}                           [dataName='data'] - Optional name of data.\r\n *\r\n * @returns {boolean} True if validation passes otherwise an exception is thrown.\r\n */\r\nexport function validate(data, validationData = {}, dataName = 'data')\r\n{\r\n   if (typeof data !== 'object') { throw new TypeError(`'${dataName}' is not an 'object'.`); }\r\n   if (typeof validationData !== 'object') { throw new TypeError(`'validationData' is not an 'object'.`); }\r\n\r\n   let result;\r\n\r\n   for (const key of Object.keys(validationData))\r\n   {\r\n      if (!validationData.hasOwnProperty(key)) { continue; } // eslint-disable-line no-prototype-builtins\r\n\r\n      const entry = validationData[key];\r\n\r\n      switch (entry.test)\r\n      {\r\n         case 'array':\r\n            result = validateArray(data, key, entry, dataName);\r\n            break;\r\n\r\n         case 'entry':\r\n            result = validateEntry(data, key, entry, dataName);\r\n            break;\r\n\r\n         case 'entry|array':\r\n            result = validateEntryOrArray(data, key, entry, dataName);\r\n            break;\r\n      }\r\n   }\r\n\r\n   return result;\r\n}\r\n\r\n/**\r\n * Validates all array entries against potential type and expected tests.\r\n *\r\n * @param {object}            data - The data object to test.\r\n *\r\n * @param {string}            accessor - A string describing the entries to access.\r\n *\r\n * @param {object}            opts - Options object.\r\n *\r\n * @param {string}            [opts.type] - Tests with a typeof check.\r\n *\r\n * @param {Function|Set<*>}   [opts.expected] - Optional function or set of expected values to test against.\r\n *\r\n * @param {string}            [opts.message] - Optional message to include.\r\n *\r\n * @param {boolean}           [opts.required] - When false if the accessor is missing validation is skipped.\r\n *\r\n * @param {boolean}           [opts.error=true] - When true and error is thrown otherwise a boolean is returned.\r\n *\r\n * @param {string}            [dataName='data'] - Optional name of data.\r\n *\r\n * @returns {boolean} True if validation passes otherwise an exception is thrown.\r\n */\r\nexport function validateArray(data, accessor, { type = void 0, expected = void 0, message = void 0, required = true,\r\n error = true } = {}, dataName = 'data')\r\n{\r\n   const dataArray = safeAccess(data, accessor);\r\n\r\n   // A non-required entry is missing so return without validation.\r\n   if (!required && typeof dataArray === 'undefined') { return true; }\r\n\r\n   if (!Array.isArray(dataArray))\r\n   {\r\n      if (error)\r\n      {\r\n         throw _validateError(TypeError, `'${dataName}.${accessor}' is not an 'array'.`);\r\n      }\r\n      else\r\n      {\r\n         return false;\r\n      }\r\n   }\r\n\r\n   if (typeof type === 'string')\r\n   {\r\n      for (let cntr = 0; cntr < dataArray.length; cntr++)\r\n      {\r\n         if (!(typeof dataArray[cntr] === type))\r\n         {\r\n            if (error)\r\n            {\r\n               const dataEntryString = typeof dataArray[cntr] === 'object' ? JSON.stringify(dataArray[cntr]) :\r\n                dataArray[cntr];\r\n\r\n               throw _validateError(TypeError,\r\n                `'${dataName}.${accessor}[${cntr}]': '${dataEntryString}' is not a '${type}'.`);\r\n            }\r\n            else\r\n            {\r\n               return false;\r\n            }\r\n         }\r\n      }\r\n   }\r\n\r\n   // If expected is a function then test all array entries against the test function. If expected is a Set then\r\n   // test all array entries for inclusion in the set. Otherwise if expected is a string then test that all array\r\n   // entries as a `typeof` test against expected.\r\n   if (Array.isArray(expected))\r\n   {\r\n      for (let cntr = 0; cntr < dataArray.length; cntr++)\r\n      {\r\n         if (!expected.includes(dataArray[cntr]))\r\n         {\r\n            if (error)\r\n            {\r\n               const dataEntryString = typeof dataArray[cntr] === 'object' ? JSON.stringify(dataArray[cntr]) :\r\n                dataArray[cntr];\r\n\r\n               throw _validateError(Error, `'${dataName}.${accessor}[${cntr}]': '${\r\n                dataEntryString}' is not an expected value: ${JSON.stringify(expected)}.`);\r\n            }\r\n            else\r\n            {\r\n               return false;\r\n            }\r\n         }\r\n      }\r\n   }\r\n   else if (expected instanceof Set)\r\n   {\r\n      for (let cntr = 0; cntr < dataArray.length; cntr++)\r\n      {\r\n         if (!expected.has(dataArray[cntr]))\r\n         {\r\n            if (error)\r\n            {\r\n               const dataEntryString = typeof dataArray[cntr] === 'object' ? JSON.stringify(dataArray[cntr]) :\r\n                dataArray[cntr];\r\n\r\n               throw _validateError(Error, `'${dataName}.${accessor}[${cntr}]': '${\r\n                dataEntryString}' is not an expected value: ${JSON.stringify(expected)}.`);\r\n            }\r\n            else\r\n            {\r\n               return false;\r\n            }\r\n         }\r\n      }\r\n   }\r\n   else if (typeof expected === 'function')\r\n   {\r\n      for (let cntr = 0; cntr < dataArray.length; cntr++)\r\n      {\r\n         try\r\n         {\r\n            const result = expected(dataArray[cntr]);\r\n\r\n            if (typeof result === 'undefined' || !result) { throw new Error(message); }\r\n         }\r\n         catch (err)\r\n         {\r\n            if (error)\r\n            {\r\n               const dataEntryString = typeof dataArray[cntr] === 'object' ? JSON.stringify(dataArray[cntr]) :\r\n                dataArray[cntr];\r\n\r\n               throw _validateError(Error, `'${dataName}.${accessor}[${cntr}]': '${\r\n                dataEntryString}' failed validation: ${err.message}.`);\r\n            }\r\n            else\r\n            {\r\n               return false;\r\n            }\r\n         }\r\n      }\r\n   }\r\n\r\n   return true;\r\n}\r\n\r\n/**\r\n * Validates data entry with a typeof check and potentially tests against the values in any given expected set.\r\n *\r\n * @param {object}            data - The object data to validate.\r\n *\r\n * @param {string}            accessor - A string describing the entries to access.\r\n *\r\n * @param {object}            opts - Options object\r\n *\r\n * @param {string}            [opts.type] - Tests with a typeof check.\r\n *\r\n * @param {Function|Set<*>}   [opts.expected] - Optional function or set of expected values to test against.\r\n *\r\n * @param {string}            [opts.message] - Optional message to include.\r\n *\r\n * @param {boolean}           [opts.required=true] - When false if the accessor is missing validation is skipped.\r\n *\r\n * @param {boolean}           [opts.error=true] - When true and error is thrown otherwise a boolean is returned.\r\n *\r\n * @param {string}            [dataName='data'] - Optional name of data.\r\n *\r\n * @returns {boolean} True if validation passes otherwise an exception is thrown.\r\n */\r\nexport function validateEntry(data, accessor, { type = void 0, expected = void 0, message = void 0, required = true,\r\n error = true } = {}, dataName = 'data')\r\n{\r\n   const dataEntry = safeAccess(data, accessor);\r\n\r\n   // A non-required entry is missing so return without validation.\r\n   if (!required && typeof dataEntry === 'undefined') { return true; }\r\n\r\n   if (type && typeof dataEntry !== type)\r\n   {\r\n      if (error)\r\n      {\r\n         throw _validateError(TypeError, `'${dataName}.${accessor}' is not a '${type}'.`);\r\n      }\r\n      else\r\n      {\r\n         return false;\r\n      }\r\n   }\r\n\r\n   if ((expected instanceof Set && !expected.has(dataEntry)) ||\r\n    (Array.isArray(expected) && !expected.includes(dataEntry)))\r\n   {\r\n      if (error)\r\n      {\r\n         const dataEntryString = typeof dataEntry === 'object' ? JSON.stringify(dataEntry) : dataEntry;\r\n\r\n         throw _validateError(Error, `'${dataName}.${accessor}': '${dataEntryString}' is not an expected value: ${\r\n          JSON.stringify(expected)}.`);\r\n      }\r\n      else\r\n      {\r\n         return false;\r\n      }\r\n   }\r\n   else if (typeof expected === 'function')\r\n   {\r\n      try\r\n      {\r\n         const result = expected(dataEntry);\r\n\r\n         if (typeof result === 'undefined' || !result) { throw new Error(message); }\r\n      }\r\n      catch (err)\r\n      {\r\n         if (error)\r\n         {\r\n            const dataEntryString = typeof dataEntry === 'object' ? JSON.stringify(dataEntry) : dataEntry;\r\n\r\n            throw _validateError(Error, `'${dataName}.${accessor}': '${dataEntryString}' failed to validate: ${\r\n             err.message}.`);\r\n         }\r\n         else\r\n         {\r\n            return false;\r\n         }\r\n      }\r\n   }\r\n\r\n   return true;\r\n}\r\n\r\n/**\r\n * Dispatches validation of data entry to string or array validation depending on data entry type.\r\n *\r\n * @param {object}            data - The data object to test.\r\n *\r\n * @param {string}            accessor - A string describing the entries to access.\r\n *\r\n * @param {ValidationEntry}   [entry] - A validation entry.\r\n *\r\n * @param {string}            [dataName='data'] - Optional name of data.\r\n *\r\n * @returns {boolean} True if validation passes otherwise an exception is thrown.\r\n */\r\nexport function validateEntryOrArray(data, accessor, entry, dataName = 'data')\r\n{\r\n   const dataEntry = safeAccess(data, accessor);\r\n\r\n   let result;\r\n\r\n   if (Array.isArray(dataEntry))\r\n   {\r\n      result = validateArray(data, accessor, entry, dataName);\r\n   }\r\n   else\r\n   {\r\n      result = validateEntry(data, accessor, entry, dataName);\r\n   }\r\n\r\n   return result;\r\n}\r\n\r\n// Module private ---------------------------------------------------------------------------------------------------\r\n\r\n/**\r\n * Private implementation of depth traversal.\r\n *\r\n * @param {object|Array}   data - An object or array.\r\n *\r\n * @param {string[]}       skipFreezeKeys - An array of strings indicating keys of objects to not freeze.\r\n *\r\n * @returns {*} The frozen object.\r\n * @ignore\r\n * @private\r\n */\r\nfunction _deepFreeze(data, skipFreezeKeys)\r\n{\r\n   if (Array.isArray(data))\r\n   {\r\n      for (let cntr = 0; cntr < data.length; cntr++) { _deepFreeze(data[cntr], skipFreezeKeys); }\r\n   }\r\n   else if (typeof data === 'object')\r\n   {\r\n      for (const key in data)\r\n      {\r\n         // eslint-disable-next-line no-prototype-builtins\r\n         if (data.hasOwnProperty(key) && !skipFreezeKeys.includes(key)) { _deepFreeze(data[key], skipFreezeKeys); }\r\n      }\r\n   }\r\n\r\n   return Object.freeze(data);\r\n}\r\n\r\n/**\r\n * Private implementation of depth traversal.\r\n *\r\n * @param {object|Array}   data - An object or array.\r\n *\r\n * @param {Function}       func - A callback function to process leaf values in children arrays or object members.\r\n *\r\n * @param {boolean}        modify - If true then the result of the callback function is used to modify in place\r\n *                                  the given data.\r\n *\r\n * @returns {*} The data object.\r\n * @ignore\r\n * @private\r\n */\r\nfunction _depthTraverse(data, func, modify)\r\n{\r\n   if (modify)\r\n   {\r\n      if (Array.isArray(data))\r\n      {\r\n         for (let cntr = 0; cntr < data.length; cntr++)\r\n         {\r\n            data[cntr] = _depthTraverse(data[cntr], func, modify);\r\n         }\r\n      }\r\n      else if (typeof data === 'object')\r\n      {\r\n         for (const key in data)\r\n         {\r\n            // eslint-disable-next-line no-prototype-builtins\r\n            if (data.hasOwnProperty(key)) { data[key] = _depthTraverse(data[key], func, modify); }\r\n         }\r\n      }\r\n      else\r\n      {\r\n         data = func(data);\r\n      }\r\n   }\r\n   else\r\n   {\r\n      if (Array.isArray(data))\r\n      {\r\n         for (let cntr = 0; cntr < data.length; cntr++) { _depthTraverse(data[cntr], func, modify); }\r\n      }\r\n      else if (typeof data === 'object')\r\n      {\r\n         for (const key in data)\r\n         {\r\n            // eslint-disable-next-line no-prototype-builtins\r\n            if (data.hasOwnProperty(key)) { _depthTraverse(data[key], func, modify); }\r\n         }\r\n      }\r\n      else\r\n      {\r\n         func(data);\r\n      }\r\n   }\r\n\r\n   return data;\r\n}\r\n\r\n/**\r\n * Private implementation of `getAccessorList`.\r\n *\r\n * @param {object}   data - An object to traverse.\r\n *\r\n * @returns {string[]} Accessor list.\r\n * @ignore\r\n * @private\r\n */\r\nfunction _getAccessorList(data)\r\n{\r\n   const accessors = [];\r\n\r\n   for (const key in data)\r\n   {\r\n      if (data.hasOwnProperty(key)) // eslint-disable-line no-prototype-builtins\r\n      {\r\n         if (typeof data[key] === 'object')\r\n         {\r\n            const childKeys = _getAccessorList(data[key]);\r\n\r\n            childKeys.forEach((childKey) =>\r\n            {\r\n               accessors.push(Array.isArray(childKey) ? `${key}.${childKey.join('.')}` : `${key}.${childKey}`);\r\n            });\r\n         }\r\n         else\r\n         {\r\n            accessors.push(key);\r\n         }\r\n      }\r\n   }\r\n\r\n   return accessors;\r\n}\r\n\r\n/**\r\n * Creates a new error of type `clazz` adding the field `_objectValidateError` set to true.\r\n *\r\n * @param {Error}    clazz - Error class to instantiate.\r\n *\r\n * @param {string}   message - An error message.\r\n *\r\n * @returns {*} Error of the clazz.\r\n * @ignore\r\n * @private\r\n */\r\nfunction _validateError(clazz, message = void 0)\r\n{\r\n   const error = new clazz(message);\r\n   error._objectValidateError = true;\r\n   return error;\r\n}\r\n","import { ApplicationShell }   from '@typhonjs-fvtt/svelte/component';\r\n\r\nimport { SvelteApplication }  from '@typhonjs-fvtt/svelte';\r\n\r\nexport class HandlebarsApplication extends SvelteApplication\r\n{\r\n   /**\r\n    * Temporarily holds the original popOut value when rendering.\r\n    *\r\n    * @type {boolean}\r\n    */\r\n   #orignalPopOut;\r\n\r\n   /**\r\n    * @inheritDoc\r\n    */\r\n   constructor(options)\r\n   {\r\n      super(options);\r\n\r\n      if (this.popOut)\r\n      {\r\n         this.options.svelte = foundry.utils.mergeObject(typeof this.options.svelte === 'object' ?\r\n          this.options.svelte : {}, {\r\n            class: ApplicationShell,\r\n            intro: true,\r\n            target: document.body\r\n         });\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Temporarily set popOut to false to only render inner HTML. This inner HTML will be appended to the content area\r\n    * of ApplicationShell if the original popOut value is true.\r\n    *\r\n    * @inheritDoc\r\n    */\r\n   async _render(force, options)\r\n   {\r\n      this.#orignalPopOut = this.options.popOut;\r\n      this.options.popOut = false;\r\n      await super._render(force, options);\r\n      this.options.popOut = this.#orignalPopOut;\r\n   }\r\n\r\n   _injectHTML(html)\r\n   {\r\n      // Mounts any Svelte components.\r\n      super._injectHTML(html);\r\n\r\n      // Appends inner HTML content to application shell content element.\r\n      if (this.svelte?.applicationShell?.elementContent)\r\n      {\r\n         this.svelte.applicationShell.elementContent.appendChild(...html);\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Override replacing HTML as Svelte components control the rendering process. Only potentially change the outer\r\n    * application frame / title for pop-out applications.\r\n    *\r\n    * @override\r\n    * @inheritDoc\r\n    */\r\n   _replaceHTML(element, html)  // eslint-disable-line no-unused-vars\r\n   {\r\n      if (!element.length) { return; }\r\n\r\n      super._replaceHTML(element, html);\r\n\r\n      if (this.svelte?.applicationShell?.elementContent)\r\n      {\r\n         const elementContent = this.svelte.applicationShell.elementContent;\r\n\r\n         // Remove existing children.\r\n         while (elementContent.firstChild && !elementContent.lastChild.remove()) {} // eslint-disable-line no-empty\r\n\r\n         elementContent.appendChild(...html);\r\n\r\n         // Use the setter from `SvelteFormApplication` to set the title store.\r\n         this.title = this.title; // eslint-disable-line no-self-assign\r\n      }\r\n      else\r\n      {\r\n         element.replaceWith(html);\r\n         this._element = html;\r\n         this.elementTarget = html[0];\r\n      }\r\n   }\r\n}","/**\r\n * Provides a helper class for {@link SvelteApplication} by combining all methods that work on the {@link SvelteData[]}\r\n * of mounted components. This class is instantiated and can be retrieved by the getter `svelte` via SvelteApplication.\r\n */\r\nclass GetSvelteData\r\n{\r\n   /**\r\n    * @type {ApplicationShell|null[]}\r\n    */\r\n   #applicationShellHolder;\r\n\r\n   /**\r\n    * @type {SvelteData[]}\r\n    */\r\n   #svelteData;\r\n\r\n   /**\r\n    * Keep a direct reference to the SvelteData array in an associated {@link SvelteApplication}.\r\n    *\r\n    * @param {ApplicationShell|null[]}  applicationShellHolder - A reference to the ApplicationShell array.\r\n    *\r\n    * @param {SvelteData[]}  svelteData - A reference to the SvelteData array of mounted components.\r\n    */\r\n   constructor(applicationShellHolder, svelteData)\r\n   {\r\n      this.#applicationShellHolder = applicationShellHolder;\r\n      this.#svelteData = svelteData;\r\n   }\r\n\r\n   /**\r\n    * Returns any mounted {@link ApplicationShell}.\r\n    *\r\n    * @returns {ApplicationShell|null} Any mounted application shell.\r\n    */\r\n   get applicationShell() { return this.#applicationShellHolder[0]; }\r\n\r\n   /**\r\n    * Returns the indexed Svelte component.\r\n    *\r\n    * @param {number}   index -\r\n    *\r\n    * @returns {object} The loaded Svelte component.\r\n    */\r\n   component(index)\r\n   {\r\n      const data = this.#svelteData[index];\r\n      return typeof data === 'object' ? data?.component : void 0;\r\n   }\r\n\r\n   /**\r\n    * Returns the Svelte component entries iterator.\r\n    *\r\n    * @returns {Generator<(number|*)[], void, *>} Svelte component entries iterator.\r\n    * @yields\r\n    */\r\n   *componentEntries()\r\n   {\r\n      for (let cntr = 0; cntr < this.#svelteData.length; cntr++)\r\n      {\r\n         yield [cntr, this.#svelteData[cntr].component];\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Returns the Svelte component values iterator.\r\n    *\r\n    * @returns {Generator<*, void, *>} Svelte component values iterator.\r\n    * @yields\r\n    */\r\n   *componentValues()\r\n   {\r\n      for (let cntr = 0; cntr < this.#svelteData.length; cntr++)\r\n      {\r\n         yield this.#svelteData[cntr].component;\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Returns the indexed SvelteData entry.\r\n    *\r\n    * @param {number}   index -\r\n    *\r\n    * @returns {object} The loaded Svelte config + component.\r\n    */\r\n   data(index)\r\n   {\r\n      return this.#svelteData[index];\r\n   }\r\n\r\n   /**\r\n    * Returns the SvelteData entries iterator.\r\n    *\r\n    * @returns {IterableIterator<[number, Object]>} SvelteData entries iterator.\r\n    */\r\n   dataEntries()\r\n   {\r\n      return this.#svelteData.entries();\r\n   }\r\n\r\n   /**\r\n    * Returns the SvelteData values iterator.\r\n    *\r\n    * @returns {IterableIterator<Object>} SvelteData values iterator.\r\n    */\r\n   dataValues()\r\n   {\r\n      return this.#svelteData.values();\r\n   }\r\n\r\n   get length()\r\n   {\r\n      return this.#svelteData.length;\r\n   }\r\n}\r\n\r\nObject.freeze(GetSvelteData);\r\n\r\nexport { GetSvelteData };\r\n\r\n/**\r\n * @typedef {object} SvelteData\r\n *\r\n * @property {object}            config -\r\n *\r\n * @property {SvelteComponent}   component -\r\n *\r\n * @property {HTMLElement}       element -\r\n *\r\n * @property {Eventbus}          eventbus -\r\n */","import { derived, writable }     from 'svelte/store';\r\nimport { safeAccess, safeSet }   from '@typhonjs-utils/object';\r\n\r\nimport {\r\n   hasGetter,\r\n   isApplicationShell,\r\n   outroAndDestroy,\r\n   parseSvelteConfig }           from '@typhonjs-fvtt/svelte/util';\r\n\r\nimport { GetSvelteData }         from '../GetSvelteData.js';\r\n\r\n/**\r\n * Provides a Svelte aware extension to FormApplication to control the app lifecycle appropriately.\r\n *\r\n * NOTE: THIS IS ONLY TO BE USED FOR {@link HandlebarsFormApplication}.\r\n *\r\n * @see SvelteApplication\r\n */\r\nexport class SvelteFormApplication extends FormApplication\r\n{\r\n   /**\r\n    * Stores the first mounted component which follows the application shell contract.\r\n    *\r\n    * @type {ApplicationShell|null[]} Application shell.\r\n    */\r\n   #applicationShellHolder = [null];\r\n\r\n   /**\r\n    * Get the current application shell.\r\n    *\r\n    * @returns {ApplicationShell|null} The first mounted component which follows the application shell contract.\r\n    */\r\n   get #applicationShell() { return this.#applicationShellHolder[0]; }\r\n\r\n   /**\r\n    * Stores the target element which may not necessarily be the main element.\r\n    *\r\n    * @type {HTMLElement}\r\n    */\r\n   #elementTarget = null;\r\n\r\n   /**\r\n    * Stores the content element which is set for application shells.\r\n    *\r\n    * @type {HTMLElement}\r\n    */\r\n   #elementContent = null;\r\n\r\n   /**\r\n    * The Application option store which is injected into mounted Svelte component context under the `external` key.\r\n    *\r\n    * @type {StoreAppOptions}\r\n    */\r\n   #storeAppOptions;\r\n\r\n   /**\r\n    * Stores the update function for `#storeAppOptions`.\r\n    *\r\n    * @type {import('svelte/store').Writable.update}\r\n    */\r\n   #storeAppOptionsUpdate;\r\n\r\n   /**\r\n    * The UI option store which is injected into mounted Svelte component context under the `external` key.\r\n    *\r\n    * @type {StoreUIOptions}\r\n    */\r\n   #storeUIOptions;\r\n\r\n   /**\r\n    * Stores the update function for `#storeUIOptions`.\r\n    *\r\n    * @type {import('svelte/store').Writable.update}\r\n    */\r\n   #storeUIOptionsUpdate;\r\n\r\n   /**\r\n    * Stores the unsubscribe functions from local store subscriptions.\r\n    *\r\n    * @type {import('svelte/store').Unsubscriber[]}\r\n    */\r\n   #storeUnsubscribe = [];\r\n\r\n   /**\r\n    * Stores SvelteData entries with instantiated Svelte components.\r\n    *\r\n    * @type {SvelteData[]}\r\n    */\r\n   #svelteData = [];\r\n\r\n   /**\r\n    * Provides a helper class that combines multiple methods for interacting with the mounted components tracked in\r\n    * {@link #svelteData}.\r\n    *\r\n    * @type {GetSvelteData}\r\n    */\r\n   #getSvelteData = new GetSvelteData(this.#applicationShellHolder, this.#svelteData);\r\n\r\n   /**\r\n    * @inheritDoc\r\n    */\r\n   constructor(object, options)\r\n   {\r\n      super(object, options);\r\n\r\n      this.#storesInitialize();\r\n   }\r\n\r\n   /**\r\n    * Specifies the default options that SvelteApplication supports.\r\n    *\r\n    * @returns {object} options - Application options.\r\n    * @see https://foundryvtt.com/api/Application.html#options\r\n    */\r\n   static get defaultOptions()\r\n   {\r\n      return foundry.utils.mergeObject(super.defaultOptions, {\r\n         draggable: true,              // If true then application shells are draggable.\r\n         headerButtonNoLabel: false,   // If true then header button labels are removed for application shells.\r\n         jqueryCloseAnimation: true,   // If false the Foundry JQuery close animation is not run.\r\n         zIndex: null                  // When set the zIndex is manually controlled.\r\n      });\r\n   }\r\n\r\n   /**\r\n    * Returns the draggable app option.\r\n    *\r\n    * @returns {boolean} Draggable app option.\r\n    */\r\n   get draggable() { return this.options.draggable; }\r\n\r\n   /**\r\n    * Returns the content element if an application shell is mounted.\r\n    *\r\n    * @returns {HTMLElement} Content element.\r\n    */\r\n   get elementContent() { return this.#elementContent; }\r\n\r\n   /**\r\n    * Returns the target element or main element if no target defined.\r\n    *\r\n    * @returns {HTMLElement} Target element.\r\n    */\r\n   get elementTarget() { return this.#elementTarget; }\r\n\r\n   /**\r\n    * @inheritDoc\r\n    */\r\n   get popOut() { return super.popOut; }\r\n\r\n   /**\r\n    * Returns the resizable option.\r\n    *\r\n    * @returns {boolean} Resizable app option.\r\n    */\r\n   get resizable() { return this.options.resizable; }\r\n\r\n   /**\r\n    * Returns the Svelte helper class w/ various methods to access mounted Svelte components.\r\n    *\r\n    * @returns {GetSvelteData} GetSvelteData\r\n    */\r\n   get svelte() { return this.#getSvelteData; }\r\n\r\n   /**\r\n    * Returns the title accessor from the parent Application class.\r\n    * TODO: Application v2; note that super.title localizes `this.options.title`; IMHO it shouldn't.\r\n    *\r\n    * @returns {string} Title.\r\n    */\r\n   get title() { return super.title; }\r\n\r\n   /**\r\n    * Returns the zIndex app option.\r\n    *\r\n    * @returns {number} z-index app option.\r\n    */\r\n   get zIndex() { return this.options.zIndex; }\r\n\r\n   /**\r\n    * Sets `this.options.draggable` which is reactive for application shells.\r\n    *\r\n    * @param {boolean}  draggable - Sets the draggable option.\r\n    */\r\n   set draggable(draggable)\r\n   {\r\n      if (typeof draggable === 'boolean') { this.setOptions('draggable', draggable); }\r\n   }\r\n\r\n   /**\r\n    * Sets the content element.\r\n    *\r\n    * @param {HTMLElement} content - Content element.\r\n    */\r\n   set elementContent(content)\r\n   {\r\n      if (!(content instanceof HTMLElement))\r\n      {\r\n         throw new TypeError(`SvelteFormApplication - set elementContent error: 'content' is not an HTMLElement.`);\r\n      }\r\n      this.#elementContent = content;\r\n   }\r\n\r\n   /**\r\n    * Sets the target element or main element if no target defined.\r\n    *\r\n    * @param {HTMLElement} target - Target element.\r\n    */\r\n   set elementTarget(target)\r\n   {\r\n      if (!(target instanceof HTMLElement))\r\n      {\r\n         throw new TypeError(`SvelteFormApplication - set elementTarget error: 'target' is not an HTMLElement.`);\r\n      }\r\n      this.#elementTarget = target;\r\n   }\r\n\r\n   /**\r\n    * Sets `this.options.popOut` which is reactive for application shells. This will add / remove this application\r\n    * from `ui.windows`.\r\n    *\r\n    * @param {boolean}  popOut - Sets the popOut option.\r\n    */\r\n   set popOut(popOut)\r\n   {\r\n      if (typeof popOut === 'boolean') { this.setOptions('popOut', popOut); }\r\n   }\r\n\r\n   /**\r\n    * Sets `this.options.resizable` which is reactive for application shells.\r\n    *\r\n    * @param {boolean}  resizable - Sets the resizable option.\r\n    */\r\n   set resizable(resizable)\r\n   {\r\n      if (typeof resizable === 'boolean') { this.setOptions('resizable', resizable); }\r\n   }\r\n\r\n   /**\r\n    * Sets `this.options.title` which is reactive for application shells.\r\n    *\r\n    * @param {string}   title - Application title; will be localized, so a translation key is fine.\r\n    */\r\n   set title(title)\r\n   {\r\n      if (typeof title === 'string') { this.setOptions('title', title); }\r\n   }\r\n\r\n   /**\r\n    * Sets `this.options.zIndex` which is reactive for application shells.\r\n    *\r\n    * @param {number}   zIndex - Application z-index.\r\n    */\r\n   set zIndex(zIndex)\r\n   {\r\n      this.setOptions('zIndex', Number.isInteger(zIndex) ? zIndex : null);\r\n   }\r\n\r\n   /**\r\n    * Note: This method is fully overridden and duplicated as Svelte components need to be destroyed manually and the\r\n    * best visual result is to destroy them after the default JQuery slide up animation occurs, but before the element\r\n    * is removed from the DOM.\r\n    *\r\n    * If you destroy the Svelte components before the slide up animation the Svelte elements are removed immediately\r\n    * from the DOM. The purpose of overriding ensures the slide up animation is always completed before\r\n    * the Svelte components are destroyed and then the element is removed from the DOM.\r\n    *\r\n    * Close the application and un-register references to it within UI mappings.\r\n    * This function returns a Promise which resolves once the window closing animation concludes\r\n    *\r\n    * @param {object}   options - Optional parameters.\r\n    *\r\n    * @param {boolean}  options.force - Force close regardless of render state.\r\n    *\r\n    * @returns {Promise<void|number>}    A Promise which resolves once the application is closed\r\n    */\r\n   async close(options = {})\r\n   {\r\n      const states = Application.RENDER_STATES;\r\n      if (!options.force && ![states.RENDERED, states.ERROR].includes(this._state)) { return; }\r\n\r\n      // Unsubscribe from any local stores.\r\n      this.#storesUnsubscribe();\r\n\r\n      this._state = states.CLOSING;\r\n\r\n      /**\r\n       * Get the element.\r\n       *\r\n       * @type {JQuery}\r\n       */\r\n      const el = $(this.#elementTarget);\r\n      if (!el) { return this._state = states.CLOSED; }\r\n\r\n      // Dispatch Hooks for closing the base and subclass applications\r\n      for (const cls of this.constructor._getInheritanceChain())\r\n      {\r\n         /**\r\n          * A hook event that fires whenever this Application is closed.\r\n          *\r\n          * @param {Application} app                     The Application instance being closed\r\n          *\r\n          * @param {jQuery[]} html                       The application HTML when it is closed\r\n          *\r\n          * @function closeApplication\r\n          *\r\n          * @memberof hookEvents\r\n          */\r\n         Hooks.call(`close${cls.name}`, this, el);\r\n      }\r\n\r\n      // If options `jqueryCloseAnimation` is false then do not execute the standard JQuery slide up animation.\r\n      // This allows Svelte components to provide any out transition. Application shells will automatically set\r\n      // `jqueryCloseAnimation` based on any out transition set or unset.\r\n      const animate = typeof this.options.jqueryCloseAnimation === 'boolean' ? this.options.jqueryCloseAnimation : true;\r\n      if (animate)\r\n      {\r\n         // Await on JQuery to slide up the main element.\r\n         el[0].style.minHeight = '0';\r\n         await new Promise((resolve) => { el.slideUp(200, () => resolve()); });\r\n      }\r\n\r\n      // Stores the Promises returned from running outro transitions and destroying each Svelte component.\r\n      const svelteDestroyPromises = [];\r\n\r\n      // Manually invoke the destroy callbacks for all Svelte components.\r\n      for (const entry of this.#svelteData)\r\n      {\r\n         // Use `outroAndDestroy` to run outro transitions before destroying.\r\n         svelteDestroyPromises.push(outroAndDestroy(entry.component));\r\n\r\n         // If any proxy eventbus has been added then remove all event registrations from the component.\r\n         const eventbus = entry.config.eventbus;\r\n         if (typeof eventbus === 'object' && typeof eventbus.off === 'function')\r\n         {\r\n            eventbus.off();\r\n            entry.config.eventbus = void 0;\r\n         }\r\n      }\r\n\r\n      // Await all Svelte components to destroy.\r\n      await Promise.all(svelteDestroyPromises);\r\n\r\n      // Reset SvelteData like this to maintain reference to GetSvelteData / `this.svelte`.\r\n      this.#svelteData.length = 0;\r\n\r\n      // Use JQuery to remove `this._element` from the DOM. Most SvelteComponents have already removed it.\r\n      el.remove();\r\n\r\n      // Clean up data\r\n      this.#applicationShellHolder[0] = null;\r\n      this._element = null;\r\n      this.#elementContent = null;\r\n      this.#elementTarget = null;\r\n      delete ui.windows[this.appId];\r\n      this._minimized = false;\r\n      this._scrollPositions = null;\r\n      this._state = states.CLOSED;\r\n\r\n      // Update the minimized UI store options.\r\n      this.#storeUIOptionsUpdate((storeOptions) => foundry.utils.mergeObject(storeOptions, {\r\n         minimized: this._minimized\r\n      }));\r\n   }\r\n\r\n   /**\r\n    * Provides a way to safely get this applications options given an accessor string which describes the\r\n    * entries to walk. To access deeper entries into the object format the accessor string with `.` between entries\r\n    * to walk.\r\n    *\r\n    * // TODO DOCUMENT the accessor in more detail.\r\n    *\r\n    * @param {string}   accessor - The path / key to set. You can set multiple levels.\r\n    *\r\n    * @param {*}        [defaultValue] - A default value returned if the accessor is not found.\r\n    *\r\n    * @returns {*} Value at the accessor.\r\n    */\r\n   getOptions(accessor, defaultValue)\r\n   {\r\n      return safeAccess(this.options, accessor, defaultValue);\r\n   }\r\n\r\n   /**\r\n    * Inject the Svelte components defined in `this.options.svelte`. The Svelte component can attach to the existing\r\n    * pop-out of Application or provide no template and render into a document fragment which is then attached to the\r\n    * DOM.\r\n    *\r\n    * @param {JQuery} html -\r\n    *\r\n    * @override\r\n    * @inheritDoc\r\n    */\r\n   _injectHTML(html)\r\n   {\r\n      if (this.popOut && html.length === 0 && Array.isArray(this.options.svelte))\r\n      {\r\n         throw new Error(\r\n          'SvelteApplication - _injectHTML - A popout app with no template can only support one Svelte component.');\r\n      }\r\n\r\n      // Make sure the store is updated with the latest header buttons. Also allows filtering buttons before display.\r\n      this.updateHeaderButtons();\r\n\r\n      if (Array.isArray(this.options.svelte))\r\n      {\r\n         for (const svelteConfig of this.options.svelte)\r\n         {\r\n            const svelteData = s_LOAD_CONFIG(this, html, svelteConfig, this.#storeAppOptions, this.#storeUIOptions);\r\n\r\n            if (isApplicationShell(svelteData.component))\r\n            {\r\n               if (this.#applicationShell !== null)\r\n               {\r\n                  throw new Error(\r\n                   `SvelteApplication - _injectHTML - An application shell is already mounted; offending config: \r\n                    ${JSON.stringify(svelteConfig)}`);\r\n               }\r\n\r\n               this.#applicationShellHolder[0] = svelteData.component;\r\n            }\r\n\r\n            this.#svelteData.push(svelteData);\r\n         }\r\n      }\r\n      else if (typeof this.options.svelte === 'object')\r\n      {\r\n         const svelteData = s_LOAD_CONFIG(this, html, this.options.svelte, this.#storeAppOptions, this.#storeUIOptions);\r\n\r\n         if (isApplicationShell(svelteData.component))\r\n         {\r\n            // A sanity check as shouldn't hit this case as only one component is being mounted.\r\n            if (this.#applicationShell !== null)\r\n            {\r\n               throw new Error(\r\n                `SvelteApplication - _injectHTML - An application shell is already mounted; offending config: \r\n                 ${JSON.stringify(this.options.svelte)}`);\r\n            }\r\n\r\n            this.#applicationShellHolder[0] = svelteData.component;\r\n         }\r\n\r\n         this.#svelteData.push(svelteData);\r\n      }\r\n      // TODO EVALUATE; COMMENTED OUT WHILE WORKING ON HandlebarsApplication.\r\n      // else\r\n      // {\r\n      //    throw new TypeError(`SvelteApplication - _injectHTML - this.options.svelte not an array or object.`);\r\n      // }\r\n\r\n      // Detect if this is a synthesized DocumentFragment.\r\n      const isDocumentFragment = html.length && html[0] instanceof DocumentFragment;\r\n\r\n      // If any of the Svelte components mounted directly targets an HTMLElement then do not inject HTML.\r\n      let injectHTML = true;\r\n      for (const svelteData of this.#svelteData)\r\n      {\r\n         if (!svelteData.injectHTML) { injectHTML = false; break; }\r\n      }\r\n      if (injectHTML) { super._injectHTML(html); }\r\n\r\n      if (this.#applicationShell !== null)\r\n      {\r\n         this._element = $(this.#applicationShell.elementRoot);\r\n\r\n         // Detect if the application shell exports an `elementContent` accessor.\r\n         this.#elementContent = hasGetter(this.#applicationShell, 'elementContent') ?\r\n          this.#applicationShell.elementContent : null;\r\n\r\n         // Detect if the application shell exports an `elementTarget` accessor.\r\n         this.#elementTarget = hasGetter(this.#applicationShell, 'elementTarget') ?\r\n          this.#applicationShell.elementTarget : null;\r\n      }\r\n      else if (isDocumentFragment) // Set the element of the app to the first child element in order of Svelte components mounted.\r\n      {\r\n         for (const svelteData of this.#svelteData)\r\n         {\r\n            if (svelteData.element instanceof HTMLElement)\r\n            {\r\n               this._element = $(svelteData.element);\r\n               break;\r\n            }\r\n         }\r\n      }\r\n\r\n      // Potentially retrieve a specific target element if `selectorTarget` is defined otherwise make the target the\r\n      // main element.\r\n      if (this.#elementTarget === null)\r\n      {\r\n         const element = typeof this.options.selectorTarget === 'string' ?\r\n          this._element.find(this.options.selectorTarget) : this._element;\r\n\r\n         this.#elementTarget = element[0];\r\n      }\r\n\r\n      // TODO VERIFY THIS CHECK ESPECIALLY `this.#elementTarget.length === 0`.\r\n      if (this.#elementTarget === null || this.#elementTarget === void 0 || this.#elementTarget.length === 0)\r\n      {\r\n         throw new Error(`SvelteApplication - _injectHTML: Target element '${this.options.selectorTarget}' not found.`);\r\n      }\r\n\r\n      // Subscribe to local store handling. Defer to next clock tick for the render cycle to complete.\r\n      setTimeout(() => this.#storesSubscribe(), 0);\r\n\r\n      this.onSvelteMount({ element: this._element[0], elementContent: this.#elementContent, elementTarget:\r\n         this.#elementTarget });\r\n   }\r\n\r\n   /**\r\n    * Provides a mechanism to update the UI options store for minimized.\r\n    *\r\n    * Note: the sanity check is duplicated from {@link Application.maximize} and the store is updated _before_\r\n    * the actual parent method is invoked. This allows application shells to remove / show any resize handlers\r\n    * correctly.\r\n    *\r\n    * @inheritDoc\r\n    */\r\n   async maximize()\r\n   {\r\n      if (!this.popOut || [false, null].includes(this._minimized)) { return; }\r\n\r\n      this.#storeUIOptionsUpdate((options) => foundry.utils.mergeObject(options, { minimized: false }));\r\n\r\n      return super.maximize();\r\n   }\r\n\r\n   /**\r\n    * Provides a mechanism to update the UI options store for minimized.\r\n    *\r\n    * Note: the sanity check is duplicated from {@link Application.minimize} and the store is updated _before_\r\n    * the actual parent method is invoked. This allows application shells to remove / show any resize handlers\r\n    * correctly.\r\n    *\r\n    * @inheritDoc\r\n    */\r\n   async minimize()\r\n   {\r\n      if (!this.rendered || !this.popOut || [true, null].includes(this._minimized)) { return; }\r\n\r\n      this.#storeUIOptionsUpdate((options) => foundry.utils.mergeObject(options, { minimized: true }));\r\n\r\n      return super.minimize();\r\n   }\r\n\r\n   /**\r\n    * Provides a way to merge `options` into this applications options and update the appOptions store.\r\n    *\r\n    * @param {object}   options - The options object to merge with `this.options`.\r\n    */\r\n   mergeOptions(options)\r\n   {\r\n      this.#storeAppOptionsUpdate((instanceOptions) => foundry.utils.mergeObject(instanceOptions, options));\r\n   }\r\n\r\n   /**\r\n    * Provides a callback after all Svelte components are initialized.\r\n    *\r\n    * @param {object}      [opts] - Optional parameters.\r\n    *\r\n    * @param {HTMLElement} [opts.element] - HTMLElement container for main application element.\r\n    *\r\n    * @param {HTMLElement} [opts.elementContent] - HTMLElement container for content area of application shells.\r\n    *\r\n    * @param {HTMLElement} [opts.elementTarget] - HTMLElement container for main application target element.\r\n    */\r\n   onSvelteMount({ element, elementContent, elementTarget }) {} // eslint-disable-line no-unused-vars\r\n\r\n   /**\r\n    * Override replacing HTML as Svelte components control the rendering process. Only potentially change the outer\r\n    * application frame / title for pop-out applications.\r\n    *\r\n    * @override\r\n    * @inheritDoc\r\n    */\r\n   _replaceHTML(element, html)  // eslint-disable-line no-unused-vars\r\n   {\r\n      if (!element.length) { return; }\r\n\r\n      this.updateHeaderButtons();\r\n   }\r\n\r\n   /**\r\n    * Render the inner application content. Only render a template if one is defined otherwise provide an empty\r\n    * JQuery element.\r\n    *\r\n    * @param {Object} data         The data used to render the inner template\r\n    *\r\n    * @returns {Promise.<JQuery>}   A promise resolving to the constructed jQuery object\r\n    *\r\n    * @override\r\n    * @private\r\n    */\r\n   async _renderInner(data)\r\n   {\r\n      const html = typeof this.template === 'string' ? await renderTemplate(this.template, data) :\r\n       document.createDocumentFragment();\r\n\r\n      return $(html);\r\n   }\r\n\r\n   /**\r\n    * Provides a way to safely set this applications options given an accessor string which describes the\r\n    * entries to walk. To access deeper entries into the object format the accessor string with `.` between entries\r\n    * to walk.\r\n    *\r\n    * Additionally if an application shell Svelte component is mounted and exports the `appOptions` property then\r\n    * the application options is set to `appOptions` potentially updating the application shell / Svelte component.\r\n    *\r\n    * // TODO DOCUMENT the accessor in more detail.\r\n    *\r\n    * @param {string}   accessor - The path / key to set. You can set multiple levels.\r\n    *\r\n    * @param {*}        value - Value to set.\r\n    */\r\n   setOptions(accessor, value)\r\n   {\r\n      const success = safeSet(this.options, accessor, value);\r\n\r\n      // If `this.options` modified then update the app options store.\r\n      if (success)\r\n      {\r\n         this.#storeAppOptionsUpdate(() => this.options);\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Modified Application `setPosition` to support QuestTrackerApp for switchable resizable globalThis.\r\n    * Set the application position and store its new location.\r\n    *\r\n    * @param {object}               [opts] - Optional parameters.\r\n    *\r\n    * @param {number|null}          [opts.left] - The left offset position in pixels\r\n    *\r\n    * @param {number|null}          [opts.top] - The top offset position in pixels\r\n    *\r\n    * @param {number|null}          [opts.width] - The application width in pixels\r\n    *\r\n    * @param {number|string|null}   [opts.height] - The application height in pixels\r\n    *\r\n    * @param {number|null}          [opts.scale] - The application scale as a numeric factor where 1.0 is default\r\n    *\r\n    * @param {boolean}              [opts.noHeight] - When true no element height is modified.\r\n    *\r\n    * @param {boolean}              [opts.noWidth] - When true no element width is modified.\r\n    *\r\n    * @returns {{left: number, top: number, width: number, height: number, scale:number}}\r\n    * The updated position object for the application containing the new values\r\n    */\r\n   setPosition({ left, top, width, height, scale, noHeight = false, noWidth = false } = {})\r\n   {\r\n      const el = this.elementTarget;\r\n      const currentPosition = this.position;\r\n      const styles = globalThis.getComputedStyle(el);\r\n\r\n      // Update width if an explicit value is passed, or if no width value is set on the element\r\n      if (!el.style.width || width)\r\n      {\r\n         const tarW = width || el.offsetWidth;\r\n         const minW = parseInt(styles.minWidth) || MIN_WINDOW_WIDTH;\r\n         const maxW = el.style.maxWidth || globalThis.innerWidth;\r\n         currentPosition.width = width = Math.clamped(tarW, minW, maxW);\r\n\r\n         if (!noWidth) { el.style.width = `${width}px`; }\r\n         if ((width + currentPosition.left) > globalThis.innerWidth) { left = currentPosition.left; }\r\n      }\r\n      width = el.offsetWidth;\r\n\r\n      // Update height if an explicit value is passed, or if no height value is set on the element\r\n      if (!el.style.height || height)\r\n      {\r\n         const tarH = height || (el.offsetHeight + 1);\r\n         const minH = parseInt(styles.minHeight) || MIN_WINDOW_HEIGHT;\r\n         const maxH = el.style.maxHeight || globalThis.innerHeight;\r\n         currentPosition.height = height = Math.clamped(tarH, minH, maxH);\r\n\r\n         if (!noHeight) { el.style.height = `${height}px`; }\r\n         if ((height + currentPosition.top) > globalThis.innerHeight + 1) { top = currentPosition.top - 1; }\r\n      }\r\n      height = el.offsetHeight;\r\n\r\n      // Update Left\r\n      if ((!el.style.left) || Number.isFinite(left))\r\n      {\r\n         const tarL = Number.isFinite(left) ? left : (globalThis.innerWidth - width) / 2;\r\n         const maxL = Math.max(globalThis.innerWidth - width, 0);\r\n         currentPosition.left = left = Math.clamped(tarL, 0, maxL);\r\n         el.style.left = `${left}px`;\r\n      }\r\n\r\n      // Update Top\r\n      if ((!el.style.top) || Number.isFinite(top))\r\n      {\r\n         const tarT = Number.isFinite(top) ? top : (globalThis.innerHeight - height) / 2;\r\n         const maxT = Math.max(globalThis.innerHeight - height, 0);\r\n         currentPosition.top = top = Math.clamped(tarT, 0, maxT);\r\n         el.style.top = `${currentPosition.top}px`;\r\n      }\r\n\r\n      // Update Scale\r\n      if (scale)\r\n      {\r\n         currentPosition.scale = Math.max(scale, 0);\r\n         if (scale === 1) { el.style.transform = \"\"; }\r\n         else { el.style.transform = `scale(${scale})`; }\r\n      }\r\n\r\n      // Return the updated position object\r\n      return currentPosition;\r\n   }\r\n\r\n   /**\r\n    * Initializes the Svelte stores and derived stores for the application options and UI state.\r\n    *\r\n    * While writable stores are created the update method is stored in private variables locally and derived Readable\r\n    * stores are provided for essential options which are commonly used.\r\n    *\r\n    * These stores are injected into all Svelte components mounted under the `external` context: `storeAppOptions` and\r\n    * ` storeUIOptions`.\r\n    */\r\n   #storesInitialize()\r\n   {\r\n      const writtableAppOptions = writable(this.options);\r\n\r\n      // Keep the update function locally, but make the store essentially readable.\r\n      this.#storeAppOptionsUpdate = writtableAppOptions.update;\r\n\r\n      /**\r\n       * @type {StoreAppOptions}\r\n       */\r\n      const storeAppOptions = {\r\n         subscribe: writtableAppOptions.subscribe,\r\n\r\n         draggable: derived(writtableAppOptions, ($options, set) => set($options.draggable)),\r\n         minimizable: derived(writtableAppOptions, ($options, set) => set($options.minimizable)),\r\n         popOut: derived(writtableAppOptions, ($options, set) => set($options.popOut)),\r\n         resizable: derived(writtableAppOptions, ($options, set) => set($options.resizable)),\r\n         title: derived(writtableAppOptions, ($options, set) => set($options.title)),\r\n         zIndex: derived(writtableAppOptions,\r\n          ($options, set) => set(Number.isInteger($options.zIndex) ? $options.zIndex : null))\r\n      };\r\n\r\n      Object.freeze(storeAppOptions);\r\n\r\n      this.#storeAppOptions = storeAppOptions;\r\n\r\n      // Create a store for UI state data.\r\n      const writableUIOptions = writable({\r\n         headerButtons: [],\r\n         minimized: this._minimized\r\n      });\r\n\r\n      // Keep the update function locally, but make the store essentially readable.\r\n      this.#storeUIOptionsUpdate = writableUIOptions.update;\r\n\r\n      /**\r\n       * @type {StoreUIOptions}\r\n       */\r\n      const storeUIOptions = {\r\n         subscribe: writableUIOptions.subscribe,\r\n\r\n         headerButtons: derived(writableUIOptions, ($options, set) => set($options.headerButtons)),\r\n         minimized: derived(writableUIOptions, ($options, set) => set($options.minimized))\r\n      };\r\n\r\n      Object.freeze(storeUIOptions);\r\n\r\n      // Initialize the store with options set in the Application constructor.\r\n      this.#storeUIOptions = storeUIOptions;\r\n   }\r\n\r\n   /**\r\n    * Registers local store subscriptions for app options. `popOut` controls registering this app with `ui.windows`.\r\n    * `zIndex` controls the z-index style of the element root.\r\n    *\r\n    * @see SvelteApplication._injectHTML\r\n    */\r\n   #storesSubscribe()\r\n   {\r\n      // Register local subscriptions.\r\n      this.#storeUnsubscribe.push(this.#storeAppOptions.popOut.subscribe((value) =>\r\n      {\r\n         if (value && this.rendered)\r\n         {\r\n            ui.windows[this.appId] = this;\r\n         }\r\n         else\r\n         {\r\n            delete ui.windows[this.appId];\r\n         }\r\n      }));\r\n\r\n      // Handles directly updating the element root `z-index` style when `zIndex` changes.\r\n      this.#storeUnsubscribe.push(this.#storeAppOptions.zIndex.subscribe((value) =>\r\n      {\r\n         if (this._element !== null) { this._element[0].style.zIndex = value; }\r\n      }));\r\n   }\r\n\r\n   /**\r\n    * Unsubscribes from any locally monitored stores.\r\n    *\r\n    * @see SvelteApplication.close\r\n    */\r\n   #storesUnsubscribe()\r\n   {\r\n      this.#storeUnsubscribe.forEach((unsubscribe) => unsubscribe());\r\n      this.#storeUnsubscribe = [];\r\n   }\r\n\r\n   /**\r\n    * Updates the UI Options store with the current header buttons. You may dynamically add / remove header buttons\r\n    * if using an application shell Svelte component. In either overriding `_getHeaderButtons` or responding to the\r\n    * Hooks fired return a new button array and the uiOptions store is updated and the application shell will render\r\n    * the new buttons.\r\n    *\r\n    * Optionally you can set in the Foundry app options `headerButtonNoLabel` to true and labels will be removed from\r\n    * the header buttons.\r\n    */\r\n   updateHeaderButtons()\r\n   {\r\n      const buttons = this._getHeaderButtons();\r\n\r\n      // Remove labels if this.options.headerButtonNoLabel is true;\r\n      if (typeof this.options.headerButtonNoLabel === 'boolean' && this.options.headerButtonNoLabel)\r\n      {\r\n         for (const button of buttons) { button.label = void 0; }\r\n      }\r\n\r\n      this.#storeUIOptionsUpdate((options) =>\r\n      {\r\n         options.headerButtons = buttons;\r\n         return options;\r\n      });\r\n   }\r\n}\r\n\r\n/**\r\n * Instantiates and attaches a Svelte component to the main inserted HTML.\r\n *\r\n * @param {SvelteApplication} app - The application\r\n *\r\n * @param {JQuery}            html - The inserted HTML.\r\n *\r\n * @param {object}            config - Svelte component options\r\n *\r\n * @param {StoreAppOptions}   storeAppOptions - Svelte store for app options.\r\n *\r\n * @param {StoreUIOptions}    storeUIOptions - Svelte store for UI options.\r\n *\r\n * @returns {object} The config + instantiated Svelte component.\r\n */\r\nfunction s_LOAD_CONFIG(app, html, config, storeAppOptions, storeUIOptions)\r\n{\r\n   const svelteOptions = typeof config.options === 'object' ? config.options : {};\r\n\r\n   // TODO EVALUATE; COMMENTED OUT WHILE WORKING ON HandlebarsApplication.\r\n   // if (typeof app.template === 'string' && typeof config.target !== 'string')\r\n   // {\r\n   //    throw new TypeError(\r\n   //     `SvelteApplication - s_LOAD_CONFIG - Template defined and target selector not a string for config:\\n${\r\n   //      JSON.stringify(config)}`);\r\n   // }\r\n\r\n   let target;\r\n\r\n   if (config.target instanceof HTMLElement)       // A specific HTMLElement to append Svelte component.\r\n   {\r\n      target = config.target;\r\n   }\r\n   else if (typeof config.target === 'string')     // A string target defines a selector to find in existing HTML.\r\n   {\r\n      target = html.find(config.target).get(0);\r\n   }\r\n   else                                            // No target defined, create a document fragment.\r\n   {\r\n      target = document.createDocumentFragment();\r\n   }\r\n\r\n   if (target === void 0)\r\n   {\r\n      throw new Error(\r\n       `SvelteApplication - s_LOAD_CONFIG - could not find target selector: ${config.target} for config:\\n${\r\n        JSON.stringify(config)}`);\r\n   }\r\n\r\n   const SvelteComponent = config.class;\r\n\r\n   const svelteConfig = parseSvelteConfig({ ...config, target }, app);\r\n\r\n   const externalContext = svelteConfig.context.get('external');\r\n\r\n   // Inject the Foundry application instance as a Svelte prop.\r\n   externalContext.foundryApp = app;\r\n\r\n   // Always inject the appOptions and uiOptions stores.\r\n   externalContext.storeAppOptions = storeAppOptions;\r\n   externalContext.storeUIOptions = storeUIOptions;\r\n\r\n   let eventbus;\r\n\r\n   // Potentially inject any TyphonJS eventbus and track the proxy in the SvelteData instance.\r\n   if (typeof app._eventbus === 'object' && typeof app._eventbus.createProxy === 'function')\r\n   {\r\n      eventbus = app._eventbus.createProxy();\r\n      externalContext.eventbus = eventbus;\r\n   }\r\n\r\n   // Create the Svelte component.\r\n   const component = new SvelteComponent(svelteConfig);\r\n\r\n   // Set any eventbus to the config.\r\n   svelteConfig.eventbus = eventbus;\r\n\r\n   let element;\r\n\r\n   // We can directly get the root element from components which follow the application store contract.\r\n   if (isApplicationShell(component))\r\n   {\r\n      element = component.elementRoot;\r\n   }\r\n\r\n   // Detect if target is a synthesized DocumentFragment with an child element. Child elements will be present\r\n   // if the Svelte component mounts and renders initial content into the document fragment.\r\n   if (config.target instanceof DocumentFragment && target.firstElementChild)\r\n   {\r\n      if (element === void 0) { element = target.firstElementChild; }\r\n      html.append(target);\r\n   }\r\n   else if (config.target instanceof HTMLElement && element === void 0)\r\n   {\r\n      if (config.target instanceof HTMLElement && typeof svelteOptions.selectorElement !== 'string')\r\n      {\r\n         throw new Error(\r\n          `SvelteApplication - s_LOAD_CONFIG - HTMLElement target with no 'selectorElement' defined for config:\\n${\r\n           JSON.stringify(config)}`);\r\n      }\r\n\r\n      // The target is an HTMLElement so find the Application element from `selectorElement` option.\r\n      element = target.querySelector(svelteOptions.selectorElement);\r\n\r\n      if (element === null || element === void 0)\r\n      {\r\n         throw new Error(\r\n          `SvelteApplication - s_LOAD_CONFIG - HTMLElement target - could not find 'selectorElement' for config:\\n${\r\n           JSON.stringify(config)}`);\r\n      }\r\n   }\r\n\r\n   // If the configuration / original target is an HTML element then do not inject HTML.\r\n   const injectHTML = !(config.target instanceof HTMLElement);\r\n\r\n   const result = { config: svelteConfig, component, element, injectHTML };\r\n\r\n   Object.freeze(result);\r\n\r\n   return result;\r\n}","import { ApplicationShell }      from '@typhonjs-fvtt/svelte/component';\r\n\r\nimport { SvelteFormApplication } from './SvelteFormApplication';\r\n\r\nexport class HandlebarsFormApplication extends SvelteFormApplication\r\n{\r\n   /**\r\n    * Temporarily holds the original popOut value when rendering.\r\n    *\r\n    * @type {boolean}\r\n    */\r\n   #orignalPopOut;\r\n\r\n   /**\r\n    * @inheritDoc\r\n    */\r\n   constructor(object, options)\r\n   {\r\n      super(object, options);\r\n\r\n      if (this.popOut)\r\n      {\r\n         this.options.svelte = foundry.utils.mergeObject(typeof this.options.svelte === 'object' ?\r\n          this.options.svelte : {}, {\r\n            class: ApplicationShell,\r\n            intro: true,\r\n            target: document.body\r\n         });\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Temporarily set popOut to false to only render inner HTML. This inner HTML will be appended to the content area\r\n    * of ApplicationShell if the original popOut value is true.\r\n    *\r\n    * @inheritDoc\r\n    */\r\n   async _render(force, options)\r\n   {\r\n      this.#orignalPopOut = this.options.popOut;\r\n      this.options.popOut = false;\r\n      await super._render(force, options);\r\n      this.options.popOut = this.#orignalPopOut;\r\n   }\r\n\r\n   /**\r\n    * Duplicates the FormApplication `_renderInner` method as SvelteFormApplication does not defer to super\r\n    * implementations.\r\n    *\r\n    * @inheritDoc\r\n    */\r\n   async _renderInner(data)\r\n   {\r\n      const html = await super._renderInner(data);\r\n\r\n      this.form = html.filter((i, el) => el instanceof HTMLFormElement)[0];\r\n      if (!this.form) { this.form = html.find('form')[0]; }\r\n\r\n      return html;\r\n   }\r\n\r\n   _injectHTML(html)\r\n   {\r\n      // Mounts any Svelte components.\r\n      super._injectHTML(html);\r\n\r\n      // Appends inner HTML content to application shell content element.\r\n      if (this.svelte?.applicationShell?.elementContent)\r\n      {\r\n         this.svelte.applicationShell.elementContent.appendChild(...html);\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Override replacing HTML as Svelte components control the rendering process. Only potentially change the outer\r\n    * application frame / title for pop-out applications.\r\n    *\r\n    * @override\r\n    * @inheritDoc\r\n    */\r\n   _replaceHTML(element, html)  // eslint-disable-line no-unused-vars\r\n   {\r\n      if (!element.length) { return; }\r\n\r\n      super._replaceHTML(element, html);\r\n\r\n      if (this.svelte?.applicationShell?.elementContent)\r\n      {\r\n         const elementContent = this.svelte.applicationShell.elementContent;\r\n\r\n         // Remove existing children.\r\n         while (elementContent.firstChild && !elementContent.lastChild.remove()) {} // eslint-disable-line no-empty\r\n\r\n         elementContent.appendChild(...html);\r\n\r\n         // Use the setter from `SvelteFormApplication` to set the title store.\r\n         this.title = this.title; // eslint-disable-line no-self-assign\r\n      }\r\n      else\r\n      {\r\n         element.replaceWith(html);\r\n         this._element = html;\r\n         this.elementTarget = html[0];\r\n      }\r\n   }\r\n}"],"names":["HandlebarsApplication","SvelteApplication","constructor","options","popOut","svelte","foundry","utils","mergeObject","class","ApplicationShell","intro","target","document","body","_render","force","_injectHTML","html","applicationShell","elementContent","appendChild","_replaceHTML","element","length","firstChild","lastChild","remove","title","replaceWith","_element","elementTarget","GetSvelteData","applicationShellHolder","svelteData","_classPrivateFieldGet","component","index","data","componentEntries","cntr","componentValues","dataEntries","entries","dataValues","values","Object","freeze","SvelteFormApplication","FormApplication","object","defaultOptions","draggable","headerButtonNoLabel","jqueryCloseAnimation","zIndex","resizable","setOptions","content","HTMLElement","TypeError","Number","isInteger","close","states","Application","RENDER_STATES","RENDERED","ERROR","includes","_state","CLOSING","el","$","CLOSED","cls","_getInheritanceChain","Hooks","call","name","animate","style","minHeight","Promise","resolve","slideUp","svelteDestroyPromises","entry","push","outroAndDestroy","eventbus","config","off","all","ui","windows","appId","_minimized","_scrollPositions","storeOptions","minimized","getOptions","accessor","defaultValue","safeAccess","Array","isArray","Error","updateHeaderButtons","svelteConfig","s_LOAD_CONFIG","isApplicationShell","JSON","stringify","isDocumentFragment","DocumentFragment","injectHTML","elementRoot","hasGetter","selectorTarget","find","setTimeout","onSvelteMount","maximize","minimize","rendered","mergeOptions","instanceOptions","_renderInner","template","renderTemplate","createDocumentFragment","value","success","safeSet","setPosition","left","top","width","height","scale","noHeight","noWidth","currentPosition","position","styles","globalThis","getComputedStyle","tarW","offsetWidth","minW","parseInt","minWidth","MIN_WINDOW_WIDTH","maxW","maxWidth","innerWidth","Math","clamped","tarH","offsetHeight","minH","MIN_WINDOW_HEIGHT","maxH","maxHeight","innerHeight","isFinite","tarL","maxL","max","tarT","maxT","transform","buttons","_getHeaderButtons","button","label","headerButtons","writtableAppOptions","writable","update","storeAppOptions","subscribe","derived","$options","set","minimizable","writableUIOptions","storeUIOptions","forEach","unsubscribe","app","svelteOptions","get","SvelteComponent","parseSvelteConfig","externalContext","context","foundryApp","_eventbus","createProxy","firstElementChild","append","selectorElement","querySelector","result","HandlebarsFormApplication","form","filter","i","HTMLFormElement"],"mappings":"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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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"}