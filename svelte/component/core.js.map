{"version":3,"file":"core.js","sources":["../../node_modules/@typhonjs-fvtt/svelte/src/component/core/TJSContainer.svelte","../../node_modules/@typhonjs-fvtt/svelte/src/component/core/TJSComponentShell.svelte","../../node_modules/@typhonjs-fvtt/svelte/src/component/core/TJSGlassPane.svelte","../../node_modules/@typhonjs-fvtt/svelte/src/component/core/application/TJSHeaderButton.svelte","../../node_modules/@typhonjs-fvtt/svelte/src/component/core/application/TJSApplicationHeader.svelte","../../node_modules/@typhonjs-fvtt/svelte/src/component/core/application/ResizableHandle.svelte","../../node_modules/@typhonjs-fvtt/svelte/src/component/core/application/ApplicationShell.svelte","../../node_modules/@typhonjs-fvtt/svelte/src/component/core/application/TJSApplicationShell.svelte","../../node_modules/@typhonjs-fvtt/svelte/src/component/core/contextmenu/TJSContextMenu.svelte","../../node_modules/@typhonjs-fvtt/svelte/src/component/core/dialog/DialogContent.svelte","../../node_modules/@typhonjs-fvtt/svelte/src/component/core/dialog/DialogShell.svelte"],"sourcesContent":["<script>\n   export let warn = false;\n   export let children = void 0;\n</script>\n\n<svelte:options accessors={true}/>\n\n{#if Array.isArray(children)}\n    {#each children as child}\n        <svelte:component this={child.class} {...child.props} />\n    {/each}\n{:else if warn}\n    <p>Container warning: No children.</p>\n{/if}\n\n<style>\n    p {\n        color: red;\n        font-size: 18px;\n    }\n</style>","<script>\n   import { getContext }    from 'svelte';\n\n   import TJSContainer      from './TJSContainer.svelte';\n\n   // The children array can be specified by a parent via prop or is read below from the external context.\n   export let children = void 0\n\n   const context = getContext('external');\n\n   // This component can host multiple children defined via props or in the TyphonJS SvelteData configuration object\n   // that are potentially mounted in the content area. If no children defined then this component mounts any slotted\n   // child.\n   const allChildren = Array.isArray(children) ? children :\n    typeof context === 'object' ? context.children : void 0;\n</script>\n\n<svelte:options accessors={true}/>\n\n<TJSContainer children={allChildren} warn={true} />","<script>\n   import {\n      s_DEFAULT_TRANSITION,\n      s_DEFAULT_TRANSITION_OPTIONS }   from '@typhonjs-fvtt/svelte/transition';\n\n   export let id = void 0;\n   export let zIndex = Number.MAX_SAFE_INTEGER;\n   export let background = '#50505080';\n   export let captureInput = true;\n   export let preventDefault = true;\n   export let stopPropagation = true;\n\n   let glassPane;\n\n   $: if (glassPane)\n   {\n      glassPane.style.maxWidth = '100%';\n      glassPane.style.maxHeight = '100%';\n      glassPane.style.width = '100%';\n      glassPane.style.height = '100%';\n   }\n\n   $: if (glassPane)\n   {\n      if (captureInput) { glassPane.focus(); }\n      glassPane.style.pointerEvents = captureInput ? 'auto' : 'none';\n   }\n\n   $: if (glassPane) { glassPane.style.background = background; }\n   $: if (glassPane) { glassPane.style.zIndex = zIndex; }\n\n   // ---------------------------------------------------------------------------------------------------------------\n\n   // The following block is somewhat complex, but allows transition options to be updated reactively during\n   // runtime execution.\n\n   // Exports properties to set a transition w/ in / out options.\n   export let transition = void 0;\n   export let inTransition = s_DEFAULT_TRANSITION;\n   export let outTransition = s_DEFAULT_TRANSITION;\n\n   // Exports properties to set options for any transitions.\n   export let transitionOptions = void 0;\n   export let inTransitionOptions = s_DEFAULT_TRANSITION_OPTIONS;\n   export let outTransitionOptions = s_DEFAULT_TRANSITION_OPTIONS;\n\n   // Tracks last transition state.\n   let oldTransition = void 0;\n   let oldTransitionOptions = void 0\n\n   // Run this reactive block when the last transition state is not equal to the current state.\n   $: if (oldTransition !== transition)\n   {\n      // If transition is defined and not the default transition then set it to both in and out transition otherwise\n      // set the default transition to both in & out transitions.\n      const newTransition = s_DEFAULT_TRANSITION !== transition && typeof transition === 'function' ? transition :\n       s_DEFAULT_TRANSITION;\n\n      inTransition = newTransition;\n      outTransition = newTransition;\n\n      oldTransition = newTransition;\n   }\n\n   // Run this reactive block when the last transition options state is not equal to the current options state.\n   $: if (oldTransitionOptions !== transitionOptions)\n   {\n      const newOptions = transitionOptions !== s_DEFAULT_TRANSITION_OPTIONS && typeof transitionOptions === 'object' ?\n       transitionOptions : s_DEFAULT_TRANSITION_OPTIONS;\n\n      inTransitionOptions = newOptions;\n      outTransitionOptions = newOptions;\n\n      oldTransitionOptions = newOptions;\n   }\n\n   // Handle cases if inTransition is unset; assign noop default transition function.\n   $: if (typeof inTransition !== 'function') { inTransition = s_DEFAULT_TRANSITION; }\n\n   // Handle cases if outTransition is unset; assign noop default transition function.\n   $: if (typeof outTransition !== 'function') { outTransition = s_DEFAULT_TRANSITION; }\n\n   // Handle cases if inTransitionOptions is unset; assign empty default transition options.\n   $: if (typeof inTransitionOptions !== 'object') { inTransitionOptions = s_DEFAULT_TRANSITION_OPTIONS; }\n\n   // Handle cases if outTransitionOptions is unset; assign empty default transition options.\n   $: if (typeof outTransitionOptions !== 'object') { outTransitionOptions = s_DEFAULT_TRANSITION_OPTIONS; }\n\n   // ---------------------------------------------------------------------------------------------------------------\n\n   function swallow(event)\n   {\n      if (captureInput)\n      {\n         if (preventDefault) { event.preventDefault(); }\n         if (stopPropagation) { event.stopPropagation(); }\n      }\n   }\n</script>\n\n<svelte:options accessors={true}/>\n\n<div id={id}\n     bind:this={glassPane}\n     tabindex=0\n     class=tjs-glass-pane\n     in:inTransition={inTransitionOptions}\n     out:outTransition={outTransitionOptions}\n     on:keydown={swallow}>\n   <slot />\n</div>\n\n<style>\n   .tjs-glass-pane {\n      position: absolute;\n      overflow: inherit;\n   }\n</style>","<script>\n   /**\n    * Provides an app header button conforming to the Foundry {@link ApplicationHeaderButton} type. Additionally a\n    * `title` field is supported to give a tool tip for the button. The `onclick` function if defined is invoked when\n    * the button is clicked and state is updated accordingly.\n    */\n   import { localize }  from '@typhonjs-fvtt/svelte/helper';\n\n   export let button;\n\n   function onClick()\n   {\n      if (typeof button.onclick === 'function')\n      {\n         button.onclick.call(button);\n         button = button;\n      }\n   }\n</script>\n\n<svelte:options accessors={true}/>\n\n<a on:click={onClick} class=\"header-button {button.class}\">\n    <i class={button.icon} title={localize(button.title)}></i>{localize(button.label)}\n</a>\n","<script>\n   import { getContext }   from 'svelte';\n\n   import { draggable }    from '@typhonjs-fvtt/svelte/action';\n   import { localize }     from '@typhonjs-fvtt/svelte/helper';\n\n   import TJSHeaderButton  from './TJSHeaderButton.svelte';\n\n   const foundryApp = getContext('external').foundryApp;\n\n   const bringToTop = () =>\n   {\n      if (typeof foundryApp.options.popOut === 'boolean' && foundryApp.options.popOut)\n      {\n         foundryApp.bringToTop.call(foundryApp);\n      }\n   }\n\n   const storeTitle = foundryApp.reactive.storeAppOptions.title;\n   const storeDraggable = foundryApp.reactive.storeAppOptions.draggable;\n   const storeHeaderButtons = foundryApp.reactive.storeUIOptions.headerButtons;\n   const storeMinimizable = foundryApp.reactive.storeAppOptions.minimizable;\n\n   function minimizable(node, booleanStore)\n   {\n      const callback = foundryApp._onToggleMinimize.bind(foundryApp);\n\n      function activateListeners() { node.addEventListener('dblclick', callback); }\n      function removeListeners() { node.removeEventListener('dblclick', callback); }\n\n      if (booleanStore) { activateListeners(); }\n\n      return {\n         update: (booleanStore) =>  // eslint-disable-line no-shadow\n         {\n            if (booleanStore) { activateListeners(); }\n            else { removeListeners(); }\n         },\n\n         destroy: () => removeListeners()\n      };\n   }\n</script>\n\n<header class=\"window-header flexrow\"\n        on:pointerdown={bringToTop}\n        use:draggable={{ positionable: foundryApp, booleanStore: $storeDraggable }}\n        use:minimizable={$storeMinimizable}>\n    <h4 class=window-title>{localize($storeTitle)}</h4>\n    {#each $storeHeaderButtons as button}\n        <TJSHeaderButton {button}/>\n    {/each}\n</header>\n","<script>\n   import { getContext } from 'svelte';\n\n   export let isResizable = false;\n\n   const foundryApp = getContext('external').foundryApp;\n\n   // Allows retrieval of the element root at runtime.\n   const getElementRoot = getContext('getElementRoot');\n\n   const storeResizable = foundryApp.reactive.storeAppOptions.resizable;\n   const storeMinimized = foundryApp.reactive.storeUIOptions.minimized;\n\n   let elementResize;\n\n   $: if (elementResize)\n   {\n      // Instead of creating a derived store it is easier to use isResizable and the minimized store below.\n      elementResize.style.display = isResizable && !$storeMinimized ? 'block' : 'none';\n\n      // Add / remove `resizable` class from element root.\n      const elementRoot = getElementRoot();\n      if (elementRoot) { elementRoot.classList[isResizable ? 'add' : 'remove']('resizable'); }\n   }\n\n   /**\n    * Provides an action to handle resizing the application shell based on the resizable app option.\n    *\n    * @param {HTMLElement}       node - The node associated with the action.\n    *\n    * @param {Readable<boolean>} booleanStore - A Svelte store that contains a boolean.\n    *\n    * @returns {{update: Function, destroy: Function}} The action lifecycle methods.\n    */\n   function resizable(node, booleanStore)\n   {\n      /**\n       * Duplicate the app / Positionable starting position to track differences.\n       *\n       * @type {object}\n       */\n      let position = null;\n\n      /**\n       * Stores the initial X / Y on drag down.\n       *\n       * @type {object}\n       */\n      let initialPosition = {};\n\n      /**\n       * Throttle mousemove event handling to 60fps\n       *\n       * @type {number}\n       */\n      let moveTime = 0;\n\n      /**\n       * Stores the active state and is used to cut off any active resizing when the store value changes.\n       *\n       * @type {boolean}\n       */\n      let active = booleanStore;\n\n      /**\n       * Remember event handlers associated with this action so they may be later unregistered.\n       *\n       * @type {Object}\n       */\n      const handlers = {\n         resizeDown: ['pointerdown', (e) => onResizePointerDown(e), false],\n         resizeMove: ['pointermove', (e) => onResizePointerMove(e), false],\n         resizeUp: ['pointerup', (e) => onResizePointerUp(e), false]\n      };\n\n      /**\n       * Activates listeners.\n       */\n      function activateListeners()\n      {\n         active = true;\n\n         // Resize handlers\n         node.addEventListener(...handlers.resizeDown);\n\n         isResizable = true;\n\n         node.style.display = 'block';\n      }\n\n      /**\n       * Removes listeners.\n       */\n      function removeListeners()\n      {\n         active = false;\n\n         // Resize handlers\n         node.removeEventListener(...handlers.resizeDown);\n         node.removeEventListener(...handlers.resizeMove);\n         node.removeEventListener(...handlers.resizeUp);\n\n         node.style.display = 'none';\n\n         isResizable = false;\n      }\n\n      // On mount if resizable is true then activate listeners otherwise set element display to `none`.\n      if (active)\n      {\n         activateListeners();\n      }\n      else\n      {\n         node.style.display = 'none';\n      }\n\n      /**\n       * Handle the initial mouse click which activates dragging behavior for the application\n       * @private\n       */\n      function onResizePointerDown(event)\n      {\n         event.preventDefault();\n\n         // Limit dragging to 60 updates per second\n         const now = Date.now();\n\n         if ((now - moveTime) < (1000 / 60)) { return; }\n\n         moveTime = now;\n\n         // Record initial position\n         position = foundry.utils.duplicate(foundryApp.position);\n\n         if (position.height === 'auto') { position.height = getElementRoot().clientHeight; }\n         if (position.width === 'auto') { position.width = getElementRoot().clientWidth; }\n\n         initialPosition = { x: event.clientX, y: event.clientY };\n\n         // Add temporary handlers\n         globalThis.addEventListener(...handlers.resizeMove);\n         globalThis.addEventListener(...handlers.resizeUp);\n      }\n\n      /**\n       * Move the window with the mouse, bounding the movement to ensure the window stays within bounds of the viewport\n       * @private\n       */\n      function onResizePointerMove(event)\n      {\n         event.preventDefault();\n\n         if (!active) { return; }\n\n         foundryApp.setPosition({\n            width: position.width + (event.clientX - initialPosition.x),\n            height: position.height + (event.clientY - initialPosition.y)\n         });\n      }\n\n      /**\n       * Conclude the dragging behavior when the mouse is release, setting the final position and removing listeners\n       * @private\n       */\n      function onResizePointerUp(event)\n      {\n         event.preventDefault();\n\n         globalThis.removeEventListener(...handlers.resizeMove);\n         globalThis.removeEventListener(...handlers.resizeUp);\n\n         foundryApp._onResize(event);\n      }\n\n\n      return {\n         update: (booleanStore) =>  // eslint-disable-line no-shadow\n         {\n            if (booleanStore) { activateListeners(); }\n            else { removeListeners(); }\n         },\n\n         destroy: () => removeListeners()\n      };\n   }\n\n</script>\n\n<div class=\"window-resizable-handle\"\n     use:resizable={$storeResizable}\n     bind:this={elementResize}>\n   <i class=\"fas fa-arrows-alt-h\"></i>\n</div>\n","<script>\n   import { getContext, setContext }   from 'svelte';\n\n   import TJSApplicationHeader         from './TJSApplicationHeader.svelte';\n   import TJSContainer                 from '../TJSContainer.svelte';\n   import ResizableHandle              from './ResizableHandle.svelte';\n\n   import {\n      s_DEFAULT_TRANSITION,\n      s_DEFAULT_TRANSITION_OPTIONS }   from '@typhonjs-fvtt/svelte/transition';\n\n   // Bound to the content and root elements. Can be used by parent components. SvelteApplication will also\n   // use 'elementRoot' to set the element of the Application. You can also provide `elementContent` and\n   // `elementTarget`. Please see SvelteApplication lifecycle documentation.\n   export let elementContent;\n   export let elementRoot;\n\n   // The children array can be specified by a parent via prop or is read below from the external context.\n   export let children = void 0\n\n   // If a parent component binds and sets `heightChanged` to true then it is bound to the content & root element\n   // `clientHeight`.\n   export let heightChanged = false;\n\n   // Store the initial `heightChanged` state. If it is truthy then `clientHeight` for the content & root elements\n   // are bound to `heightChanged` to signal to any parent component of any change to the client & root.\n   const bindHeightChanged = !!heightChanged;\n\n   setContext('getElementContent', () => elementContent);\n   setContext('getElementRoot', () => elementRoot);\n\n   const context = getContext('external');\n\n   // Store Foundry Application reference.\n   const foundryApp = context.foundryApp;\n\n   // This component can host multiple children defined via props or in the TyphonJS SvelteData configuration object\n   // that are potentially mounted in the content area. If no children defined then this component mounts any slotted\n   // child.\n   const allChildren = Array.isArray(children) ? children :\n    typeof context === 'object' ? context.children : void 0;\n\n   // ---------------------------------------------------------------------------------------------------------------\n\n   // The following block is somewhat complex, but allows transition options to be updated reactively during\n   // runtime execution.\n\n   // Exports properties to set a transition w/ in / out options.\n   export let transition = void 0;\n   export let inTransition = s_DEFAULT_TRANSITION;\n   export let outTransition = s_DEFAULT_TRANSITION;\n\n   // Exports properties to set options for any transitions.\n   export let transitionOptions = void 0;\n   export let inTransitionOptions = s_DEFAULT_TRANSITION_OPTIONS;\n   export let outTransitionOptions = s_DEFAULT_TRANSITION_OPTIONS;\n\n   // Tracks last transition state.\n   let oldTransition = void 0;\n   let oldTransitionOptions = void 0\n\n   // Run this reactive block when the last transition state is not equal to the current state.\n   $: if (oldTransition !== transition)\n   {\n      // If transition is defined and not the default transition then set it to both in and out transition otherwise\n      // set the default transition to both in & out transitions.\n      const newTransition = s_DEFAULT_TRANSITION !== transition && typeof transition === 'function' ? transition :\n       s_DEFAULT_TRANSITION;\n\n      inTransition = newTransition;\n      outTransition = newTransition;\n\n      oldTransition = newTransition;\n   }\n\n   // Run this reactive block when the last transition options state is not equal to the current options state.\n   $: if (oldTransitionOptions !== transitionOptions)\n   {\n      const newOptions = transitionOptions !== s_DEFAULT_TRANSITION_OPTIONS && typeof transitionOptions === 'object' ?\n       transitionOptions : s_DEFAULT_TRANSITION_OPTIONS;\n\n      inTransitionOptions = newOptions;\n      outTransitionOptions = newOptions;\n\n      oldTransitionOptions = newOptions;\n   }\n\n   // Handle cases if inTransition is unset; assign noop default transition function.\n   $: if (typeof inTransition !== 'function') { inTransition = s_DEFAULT_TRANSITION; }\n\n   $:\n   {\n      // Handle cases if outTransition is unset; assign noop default transition function.\n      if (typeof outTransition !== 'function') { outTransition = s_DEFAULT_TRANSITION; }\n\n      // Set jquery close animation to either run or not when an out transition is changed.\n      if (foundryApp && typeof foundryApp?.options?.jqueryCloseAnimation === 'boolean')\n      {\n         foundryApp.options.jqueryCloseAnimation = outTransition === s_DEFAULT_TRANSITION;\n      }\n   }\n\n   // Handle cases if inTransitionOptions is unset; assign empty default transition options.\n   $: if (typeof inTransitionOptions !== 'object') { inTransitionOptions = s_DEFAULT_TRANSITION_OPTIONS; }\n\n   // Handle cases if outTransitionOptions is unset; assign empty default transition options.\n   $: if (typeof outTransitionOptions !== 'object') { outTransitionOptions = s_DEFAULT_TRANSITION_OPTIONS; }\n</script>\n\n<svelte:options accessors={true}/>\n\n{#if bindHeightChanged}\n   <div id={foundryApp.id}\n        class=\"app window-app {foundryApp.options.classes.join(' ')}\"\n        data-appid={foundryApp.appId}\n        bind:clientHeight={heightChanged}\n        bind:this={elementRoot}\n        in:inTransition={inTransitionOptions}\n        out:outTransition={outTransitionOptions}>\n      <TJSApplicationHeader />\n      <section class=window-content bind:this={elementContent} bind:clientHeight={heightChanged}>\n         {#if Array.isArray(allChildren)}\n            <TJSContainer children={allChildren} />\n         {:else}\n            <slot />\n         {/if}\n      </section>\n      <ResizableHandle />\n   </div>\n{:else}\n   <div id={foundryApp.id}\n        class=\"app window-app {foundryApp.options.classes.join(' ')}\"\n        data-appid={foundryApp.appId}\n        bind:this={elementRoot}\n        in:inTransition={inTransitionOptions}\n        out:outTransition={outTransitionOptions}>\n      <TJSApplicationHeader />\n      <section class=window-content bind:this={elementContent}>\n         {#if Array.isArray(allChildren)}\n            <TJSContainer children={allChildren} />\n         {:else}\n            <slot />\n         {/if}\n      </section>\n      <ResizableHandle />\n   </div>\n{/if}\n\n<style>\n   .window-app {\n      overflow: inherit;\n   }\n</style>","<script>\n   import { getContext, setContext }   from 'svelte';\n\n   import TJSApplicationHeader         from './TJSApplicationHeader.svelte';\n   import TJSContainer                 from '../TJSContainer.svelte';\n   import ResizableHandle              from './ResizableHandle.svelte';\n\n   import {\n      s_DEFAULT_TRANSITION,\n      s_DEFAULT_TRANSITION_OPTIONS }   from '@typhonjs-fvtt/svelte/transition';\n\n   // Bound to the content and root elements. Can be used by parent components. SvelteApplication will also\n   // use 'elementRoot' to set the element of the Application. You can also provide `elementContent` and\n   // `elementTarget`. Please see SvelteApplication lifecycle documentation.\n   export let elementContent;\n   export let elementRoot;\n\n   // The children array can be specified by a parent via prop or is read below from the external context.\n   export let children = void 0\n\n   // If a parent component binds and sets `heightChanged` to true then it is bound to the content & root element\n   // `clientHeight`.\n   export let heightChanged = false;\n\n   // Store the initial `heightChanged` state. If it is truthy then `clientHeight` for the content & root elements\n   // are bound to `heightChanged` to signal to any parent component of any change to the client & root.\n   const bindHeightChanged = !!heightChanged;\n\n   setContext('getElementContent', () => elementContent);\n   setContext('getElementRoot', () => elementRoot);\n\n   const context = getContext('external');\n\n   // Store Foundry Application reference.\n   const foundryApp = context.foundryApp;\n\n   // This component can host multiple children defined via props or in the TyphonJS SvelteData configuration object\n   // that are potentially mounted in the content area. If no children defined then this component mounts any slotted\n   // child.\n   const allChildren = Array.isArray(children) ? children :\n    typeof context === 'object' ? context.children : void 0;\n\n   // ---------------------------------------------------------------------------------------------------------------\n\n   // The following block is somewhat complex, but allows transition options to be updated reactively during\n   // runtime execution.\n\n   // Exports properties to set a transition w/ in / out options.\n   export let transition = void 0;\n   export let inTransition = s_DEFAULT_TRANSITION;\n   export let outTransition = s_DEFAULT_TRANSITION;\n\n   // Exports properties to set options for any transitions.\n   export let transitionOptions = void 0;\n   export let inTransitionOptions = s_DEFAULT_TRANSITION_OPTIONS;\n   export let outTransitionOptions = s_DEFAULT_TRANSITION_OPTIONS;\n\n   // Tracks last transition state.\n   let oldTransition = void 0;\n   let oldTransitionOptions = void 0\n\n   // Run this reactive block when the last transition state is not equal to the current state.\n   $: if (oldTransition !== transition)\n   {\n      // If transition is defined and not the default transition then set it to both in and out transition otherwise\n      // set the default transition to both in & out transitions.\n      const newTransition = s_DEFAULT_TRANSITION !== transition && typeof transition === 'function' ? transition :\n       s_DEFAULT_TRANSITION;\n\n      inTransition = newTransition;\n      outTransition = newTransition;\n\n      oldTransition = newTransition;\n   }\n\n   // Run this reactive block when the last transition options state is not equal to the current options state.\n   $: if (oldTransitionOptions !== transitionOptions)\n   {\n      const newOptions = transitionOptions !== s_DEFAULT_TRANSITION_OPTIONS && typeof transitionOptions === 'object' ?\n       transitionOptions : s_DEFAULT_TRANSITION_OPTIONS;\n\n      inTransitionOptions = newOptions;\n      outTransitionOptions = newOptions;\n\n      oldTransitionOptions = newOptions;\n   }\n\n   // Handle cases if inTransition is unset; assign noop default transition function.\n   $: if (typeof inTransition !== 'function') { inTransition = s_DEFAULT_TRANSITION; }\n\n   $:\n   {\n      // Handle cases if outTransition is unset; assign noop default transition function.\n      if (typeof outTransition !== 'function') { outTransition = s_DEFAULT_TRANSITION; }\n\n      // Set jquery close animation to either run or not when an out transition is changed.\n      if (foundryApp && typeof foundryApp?.options?.jqueryCloseAnimation === 'boolean')\n      {\n         foundryApp.options.jqueryCloseAnimation = outTransition === s_DEFAULT_TRANSITION;\n      }\n   }\n\n   // Handle cases if inTransitionOptions is unset; assign empty default transition options.\n   $: if (typeof inTransitionOptions !== 'object') { inTransitionOptions = s_DEFAULT_TRANSITION_OPTIONS; }\n\n   // Handle cases if outTransitionOptions is unset; assign empty default transition options.\n   $: if (typeof outTransitionOptions !== 'object') { outTransitionOptions = s_DEFAULT_TRANSITION_OPTIONS; }\n</script>\n\n<svelte:options accessors={true}/>\n\n{#if bindHeightChanged}\n   <div id={foundryApp.id}\n        class=\"tjs-app tjs-window-app {foundryApp.options.classes.join(' ')}\"\n        data-appid={foundryApp.appId}\n        bind:clientHeight={heightChanged}\n        bind:this={elementRoot}\n        in:inTransition={inTransitionOptions}\n        out:outTransition={outTransitionOptions}>\n       <TJSApplicationHeader />\n       <section class=window-content bind:this={elementContent} bind:clientHeight={heightChanged}>\n           {#if Array.isArray(allChildren)}\n               <TJSContainer children={allChildren} />\n           {:else}\n               <slot />\n           {/if}\n       </section>\n       <ResizableHandle />\n   </div>\n{:else}\n   <div id={foundryApp.id}\n        class=\"tjs-app tjs-window-app {foundryApp.options.classes.join(' ')}\"\n        data-appid={foundryApp.appId}\n        bind:this={elementRoot}\n        in:inTransition={inTransitionOptions}\n        out:outTransition={outTransitionOptions}>\n       <TJSApplicationHeader />\n       <section class=window-content bind:this={elementContent}>\n           {#if Array.isArray(allChildren)}\n               <TJSContainer children={allChildren} />\n           {:else}\n               <slot />\n           {/if}\n       </section>\n      <ResizableHandle />\n   </div>\n{/if}\n\n\n<style>\n  /**\n   * Defines styles that mimic a Foundry popout Application. `:global` is used to preserve the unused CSS in the\n   * template above. A primary benefit of a separate Application implementation is that the styles are not overridden\n   * by any given game system / mods that might effect the standard Foundry Application CSS. This allows separate\n   * and unique styles to be given to this component regardless of game system / module modifications.\n   */\n  :global(.tjs-app) {\n    max-height: 100%;\n    background: url(/ui/denim075.png) repeat;\n    border-radius: 5px;\n    box-shadow: 0 0 20px #000;\n    margin: 3px 0;\n    color: #f0f0e0;\n    position: absolute;\n  }\n\n  :global(.tjs-window-app) {\n    display: flex;\n    flex-direction: column;\n    flex-wrap: nowrap;\n    justify-content: flex-start;\n    padding: 0;\n    z-index: 99;\n  }\n\n  :global(.tjs-window-app .window-content) {\n    display: flex;\n    flex-direction: column;\n    flex-wrap: nowrap;\n    justify-content: flex-start;\n    padding: 8px;\n    color: #191813;\n    overflow-y: auto;\n    overflow-x: hidden;\n  }\n\n  :global(.tjs-window-app .window-header) {\n    flex: 0 0 30px;\n    overflow: hidden;\n    padding: 0 8px;\n    line-height: 30px;\n    border-bottom: 1px solid #000;\n    pointer-events: auto;\n  }\n\n  :global(.tjs-window-app .window-header a) {\n    flex: none;\n    margin: 0 0 0 8px;\n  }\n\n  :global(.tjs-window-app .window-header h4) {\n    font-family: Signika, sans-serif;\n  }\n\n  :global(.tjs-window-app .window-header i[class^=fa]) {\n    margin-right: 3px;\n  }\n\n  :global(.tjs-window-app .window-header .window-title) {\n    margin: 0;\n    word-break: break-all;\n  }\n\n  :global(.tjs-window-app .window-resizable-handle) {\n    width: 20px;\n    height: 20px;\n    position: absolute;\n    bottom: -1px;\n    right: 0;\n    background: #444;\n    padding: 2px;\n    border: 1px solid #111;\n    border-radius: 4px 0 0 0;\n  }\n\n  :global(.tjs-window-app .window-resizable-handle i.fas) {\n    transform: rotate(45deg);\n  }\n\n  :global(.tjs-window-app.minimized .window-header) {\n     border: 1px solid #000;\n  }\n</style>","<script>\n   import { createEventDispatcher } from 'svelte';\n   import { current_component }     from 'svelte/internal';\n\n   import { localize }              from '@typhonjs-fvtt/svelte/helper';\n   import { slideFade }             from '@typhonjs-fvtt/svelte/transition';\n   import { outroAndDestroy }       from '@typhonjs-fvtt/svelte/util';\n\n   export let id = '';\n   export let x = 0;\n   export let y = 0;\n   export let items = [];\n   export let zIndex = 10000;\n   export let transitionOptions = void 0;\n\n   // Bound to the nav element / menu.\n   let menuEl;\n\n   // Store this component reference.\n   const local = current_component;\n\n   // Dispatches `close` event.\n   const dispatch = createEventDispatcher();\n\n   // Stores if this context menu is closed.\n   let closed = false;\n\n   /**\n    * Provides a custom animate callback allowing inspection of the element to change positioning styles based on the\n    * height / width of the element and `document.body`. This allows the context menu to expand up when the menu\n    * is outside the height bound of `document.body` and expand to the left if width is greater than `document.body`.\n    *\n    * @param {HTMLElement} node - nav element.\n    *\n    * @returns {object} Transition object.\n    */\n   function animate(node)\n   {\n      const expandUp = y + node.clientHeight > document.body.clientHeight\n      const expandLeft = x + node.clientWidth > document.body.clientWidth\n\n      node.style.top = expandUp ? null : `${y}px`;\n      node.style.bottom = expandUp ? `${document.body.clientHeight - y}px` : null;\n\n      node.style.left = expandLeft ? null : `${x}px`;\n      node.style.right = expandLeft ? `${document.body.clientWidth - x}px` : null;\n\n      return slideFade(node, transitionOptions);\n   }\n\n   /**\n    * Invokes a function on click of a menu item then fires the `close` event and automatically runs the outro\n    * transition and destroys the component.\n    *\n    * @param {function} callback - Function to invoke on click.\n    */\n   function onClick(callback)\n   {\n      if (typeof callback === 'function') { callback(); }\n\n      if (!closed)\n      {\n         dispatch('close');\n         closed = true;\n         outroAndDestroy(local);\n      }\n   }\n\n   /**\n    * Determines if a pointer pressed to the document body closes the context menu. If the click occurs outside the\n    * context menu then fire the `close` event and run the outro transition then destroy the component.\n    *\n    * @param {PointerEvent}   event - Pointer event from document body click.\n    */\n   async function onClose(event)\n   {\n      // Early out if the pointer down is inside the menu element.\n      if (event.target === menuEl || menuEl.contains(event.target)) { return; }\n\n      // Early out if the event page X / Y is the same as this context menu.\n      if (Math.floor(event.pageX) === x && Math.floor(event.pageY) === y) { return; }\n\n      if (!closed)\n      {\n         dispatch('close');\n         closed = true;\n         outroAndDestroy(local);\n      }\n   }\n</script>\n<!-- bind to `document.body` to receive pointer down events to close the context menu. -->\n<svelte:body on:pointerdown={onClose}/>\n\n<nav id={id} class=tjs-context-menu transition:animate bind:this={menuEl} style=\"z-index: {zIndex}\">\n    <ol class=tjs-context-items>\n        {#each items as item}\n            <li class=tjs-context-item on:click={() => onClick(item.onclick)}><i class={item.icon}></i>{localize(item.label)}</li>\n        {/each}\n    </ol>\n</nav>\n\n<style>\n    .tjs-context-menu {\n        position: fixed;\n        width: fit-content;\n        font-size: 14px;\n        box-shadow: 0 0 10px #000;\n        height: max-content;\n        min-width: 150px;\n        max-width: 360px;\n        background: #23221d;\n        border: 1px solid #000;\n        border-radius: 5px;\n        color: #EEE;\n    }\n\n    .tjs-context-menu ol.tjs-context-items {\n        list-style: none;\n        margin: 0;\n        padding: 0;\n    }\n\n    .tjs-context-menu li.tjs-context-item {\n        padding: 0 5px;\n        line-height: 32px;\n    }\n\n    .tjs-context-menu li.tjs-context-item:hover {\n        color: #FFF;\n        text-shadow: 0 0 4px red;\n    }\n\n    .tjs-context-menu li.tjs-context-item > i {\n        margin-right: 5px;\n    }\n</style>","<script>\n   import { getContext }   from 'svelte';\n\n   import {\n      isSvelteComponent,\n      parseSvelteConfig }  from '@typhonjs-fvtt/svelte/util';\n\n   export let data = {};\n\n   let buttons;\n   let content;\n   let dialogComponent;\n   let dialogProps = {};\n\n   let foundryApp = getContext('external').foundryApp;\n\n   // If `data.buttons` is not an object then set an empty array otherwise reduce the button data.\n   $: buttons = typeof data.buttons !== 'object' ? [] : Object.keys(data.buttons).reduce((obj, key) =>\n   {\n      const b = data.buttons[key];\n      if (b.condition !== false)\n      {\n         obj.push({\n            ...b,\n            id: key,\n            cssClass: [key, data.default === key ? 'default' : ''].filterJoin(' ')\n         })\n      }\n      return obj;\n   }, []);\n\n   $:\n   {\n      content = data.content;\n\n      try\n      {\n         if (isSvelteComponent(content))\n         {\n            dialogComponent = content;\n            dialogProps = {};\n         }\n         else if (typeof content === 'object')\n         {\n            const svelteConfig = parseSvelteConfig(content, foundryApp);\n            dialogComponent = svelteConfig.class;\n            dialogProps = svelteConfig.props ?? {};\n\n            // Check for any children parsed and added to the external context.\n            const children = svelteConfig?.context?.get('external')?.children;\n\n            // If so add to dialogProps.\n            if (Array.isArray(children)) { dialogProps.children = children; }\n         }\n         else\n         {\n            dialogComponent = void 0;\n            dialogProps = {};\n         }\n      }\n      catch (err)\n      {\n         dialogComponent = void 0;\n         dialogProps = {};\n\n         content = err.message;\n         console.error(err);\n      }\n   }\n\n   function onClick(button)\n   {\n      try\n      {\n         // Passing back the element is to keep with the existing Foundry API.\n         if (typeof button.callback === 'function')\n         {\n            button.callback(foundryApp.options.jQuery ? foundryApp.element : foundryApp.element[0]);\n         }\n\n         foundryApp.close();\n      }\n      catch(err)\n      {\n         ui.notifications.error(err);\n         throw new Error(err);\n      }\n   }\n\n   function onKeydown(event)\n   {\n      switch (event.key)\n      {\n         case 'Escape':\n            return foundryApp.close();\n\n         case 'Enter':\n            onClick(data.buttons[data.default]);\n            break;\n      }\n   }\n</script>\n\n<svelte:body on:keydown|preventDefault|stopPropagation={onKeydown} />\n\n<div class=\"dialog-content\">\n   {#if typeof content === 'string'}\n      {@html content}\n   {:else if dialogComponent}\n      <svelte:component this={dialogComponent} {...dialogProps} />\n   {/if}\n</div>\n<div class=\"dialog-buttons\">\n   {#each buttons as button (button.id)}\n   <button class=\"dialog-button {button.cssClass}\" on:click={() => onClick(button)}>\n      {@html button.icon}\n      {@html button.label}\n   </button>\n   {/each}\n</div>\n\n<style>\n   div.dialog-buttons {\n      padding-top: 8px;\n   }\n</style>","<script>\n   import { getContext }               from 'svelte';\n   import { fade }                     from 'svelte/transition';\n\n   import ApplicationShell             from '../application/ApplicationShell.svelte';\n   import DialogContent                from './DialogContent.svelte';\n   import TJSGlassPane                 from '../TJSGlassPane.svelte';\n\n   // Application shell contract.\n   export let elementRoot;\n\n   // The dialog data.\n   export let data = {};\n\n   const foundryApp = getContext('external').foundryApp;\n\n   const s_MODAL_TRANSITION = fade;\n   const s_MODAL_TRANSITION_OPTIONS = { duration: 200 };\n   const s_MODAL_BACKGROUND = '#50505080'\n\n   let modal = void 0;\n\n   // Stores props for the ApplicationShell.\n   const appProps = {\n      // Stores any transition functions.\n      transition: void 0,\n      inTransition: void 0,\n      outTransition: void 0,\n\n      // Stores properties to set for options for any transitions.\n      transitionOptions: void 0,\n      inTransitionOptions: void 0,\n      outTransitionOptions: void 0,\n   }\n\n   const modalProps = {\n      // Background CSS style string.\n      background: void 0,\n\n      // Stores any transition functions.\n      transition: void 0,\n      inTransition: void 0,\n      outTransition: void 0,\n\n      // Stores properties to set for options for any transitions.\n      transitionOptions: void 0,\n      inTransitionOptions: void 0,\n      outTransitionOptions: void 0,\n   }\n\n   let zIndex = void 0;\n\n   // Only set modal once on mount. You can't change between a modal an non-modal dialog during runtime.\n   if (modal === void 0) { modal = typeof data?.modal === 'boolean' ? data.modal : false; }\n\n   // Retrieve values from the DialogData object and also potentially set any SvelteApplication accessors.\n   // Explicit checks are performed against existing local variables as the only externally reactive variable is `data`.\n   // All of the checks below trigger when there are any external changes to the `data` prop.\n   // Prevent any unnecessary changing of local & `foundryApp` variables unless actual changes occur.\n\n   // Foundry App options --------------------------------------------------------------------------------------------\n\n   $: if (typeof data === 'object')\n   {\n      const newZIndex = Number.isInteger(data.zIndex) || data.zIndex === null ? data.zIndex :\n       modal ? Number.MAX_SAFE_INTEGER : Number.MAX_SAFE_INTEGER - 1\n      if (zIndex !== newZIndex) { zIndex = newZIndex; }\n\n      // Update the main foundry options when data changes. Perform explicit checks against existing data in `foundryApp`.\n      const newDraggable = data.draggable ?? true;\n      if (foundryApp.reactive.draggable !== newDraggable) { foundryApp.reactive.draggable = newDraggable; }\n\n      const newPopOut = data.popOut ?? true;\n      if (foundryApp.reactive.popOut !== newPopOut) { foundryApp.reactive.popOut = newPopOut; }\n\n      const newResizable = data.resizable ?? false;\n      if (foundryApp.reactive.resizable !== newResizable) { foundryApp.reactive.resizable = newResizable; }\n\n      // Note foundryApp.title from Application localizes `options.title`, so compare with `foundryApp.options.title`.\n      const newTitle = data.title ?? 'Dialog';\n      if (newTitle !== foundryApp?.options?.title) { foundryApp.reactive.title = newTitle; }\n\n      if (foundryApp.reactive.zIndex !== zIndex) { foundryApp.reactive.zIndex = zIndex; }\n   }\n\n   // ApplicationShell transition options ----------------------------------------------------------------------------\n\n   $: if (typeof data?.transition === 'object')\n   {\n      // Store data.transitions to shorten statements below.\n      const d = data.transition;\n\n      if (d?.transition !== appProps.transition) { appProps.transition = d.transition; }\n      if (d?.inTransition !== appProps.inTransition) { appProps.inTransition = d.inTransition; }\n      if (d?.outTransition !== appProps.outTransition) { appProps.outTransition = d.outTransition; }\n      if (d?.transitionOptions !== appProps.transitionOptions) { appProps.transitionOptions = d.transitionOptions; }\n\n      if (d?.inTransitionOptions !== appProps.inTransitionOptions)\n      {\n         appProps.inTransitionOptions = d.inTransitionOptions;\n      }\n\n      if (d?.outTransitionOptions !== appProps.outTransitionOptions)\n      {\n         appProps.outTransitionOptions = d.outTransitionOptions;\n      }\n   }\n\n   // Modal options --------------------------------------------------------------------------------------------------\n\n   $:\n   {\n      const newModalBackground = typeof data?.modalOptions?.background === 'string' ? data.modalOptions.background :\n       s_MODAL_BACKGROUND;\n\n      if (newModalBackground !== modalProps.background) { modalProps.background = newModalBackground; }\n   }\n\n   $: if (typeof data?.modalOptions?.transition === 'object')\n   {\n      // Store data.transitions to shorten statements below.\n      const d = data.modalOptions.transition;\n\n      if (d?.transition !== modalProps.transition)\n      {\n         modalProps.transition = typeof d?.transition === 'function' ? d.transition : s_MODAL_TRANSITION;\n      }\n\n      if (d?.inTransition !== modalProps.inTransition) { modalProps.inTransition = d.inTransition; }\n      if (d?.outTransition !== modalProps.outTransition) { modalProps.outTransition = d.outTransition; }\n\n      // Provide default transition options if not defined.\n      if (d?.transitionOptions !== modalProps.transitionOptions)\n      {\n         modalProps.transitionOptions = typeof d?.transitionOptions === 'object' ? d.transitionOptions :\n          s_MODAL_TRANSITION_OPTIONS;\n      }\n\n      if (d?.inTransitionOptions !== modalProps.inTransitionOptions)\n      {\n         modalProps.inTransitionOptions = d.inTransitionOptions;\n      }\n\n      if (d?.outTransitionOptions !== modalProps.outTransitionOptions)\n      {\n         modalProps.outTransitionOptions = d.outTransitionOptions;\n      }\n   }\n   else  // Provide a fallback / default glass pane transition when `data.modalOptions.transition` is not defined.\n   {\n      const newModalTransition = typeof data?.modalOptions?.transition?.transition === 'function' ?\n       data.modalOptions.transition.transition : s_MODAL_TRANSITION;\n\n      if (newModalTransition !== modalProps.transition) { modalProps.transition = newModalTransition; }\n\n      const newModalTransitionOptions = typeof data?.modalOptions?.transitionOptions === 'object' ?\n       data.modalOptions.transitionOptions : s_MODAL_TRANSITION_OPTIONS;\n\n      if (newModalTransitionOptions !== modalProps.transitionOptions)\n      {\n         modalProps.transitionOptions = newModalTransitionOptions;\n      }\n   }\n</script>\n\n<svelte:options accessors={true}/>\n\n{#if modal}\n   <TJSGlassPane id={foundryApp.id} stopPropagation={false} {...modalProps} {zIndex}>\n      <ApplicationShell bind:elementRoot {...appProps}>\n         <DialogContent {data} />\n      </ApplicationShell>\n   </TJSGlassPane>\n{:else}\n   <ApplicationShell bind:elementRoot {...appProps}>\n      <DialogContent {data} />\n   </ApplicationShell>\n{/if}\n"],"names":["insert","ctx","length","props","class","Array","isArray","warn","children","context","getContext","allChildren","glassPane","oldTransition","oldTransitionOptions","id","zIndex","Number","MAX_SAFE_INTEGER","background","captureInput","preventDefault","stopPropagation","transition","inTransition","s_DEFAULT_TRANSITION","outTransition","transitionOptions","inTransitionOptions","s_DEFAULT_TRANSITION_OPTIONS","outTransitionOptions","style","maxWidth","maxHeight","width","height","focus","pointerEvents","newTransition","newOptions","event","localize","label","icon","title","append","button","onclick","call","positionable","booleanStore","foundryApp","storeTitle","reactive","storeAppOptions","storeDraggable","draggable","storeHeaderButtons","storeUIOptions","headerButtons","storeMinimizable","minimizable","options","popOut","bringToTop","node","callback","_onToggleMinimize","bind","activateListeners","addEventListener","removeListeners","removeEventListener","update","destroy","isResizable","getElementRoot","storeResizable","resizable","storeMinimized","minimized","elementResize","display","$storeMinimized","elementRoot","classList","position","initialPosition","moveTime","active","handlers","resizeDown","e","now","Date","foundry","utils","duplicate","clientHeight","clientWidth","x","clientX","y","clientY","globalThis","resizeMove","resizeUp","onResizePointerDown","onResizePointerMove","setPosition","onResizePointerUp","_onResize","classes","join","appId","elementContent","heightChanged","bindHeightChanged","setContext","jqueryCloseAnimation","menuEl","items","local","current_component","dispatch","createEventDispatcher","closed","onClick","outroAndDestroy","expandUp","document","body","expandLeft","top","bottom","left","right","slideFade","target","contains","Math","floor","pageX","pageY","item","cssClass","buttons","content","dialogComponent","data","dialogProps","jQuery","element","close","err","ui","notifications","error","Error","Object","keys","reduce","obj","key","b","condition","push","default","filterJoin","isSvelteComponent","svelteConfig","parseSvelteConfig","get","message","console","s_MODAL_TRANSITION","fade","s_MODAL_TRANSITION_OPTIONS","duration","modal","appProps","modalProps","newZIndex","isInteger","newDraggable","newPopOut","newResizable","newTitle","d","newModalBackground","modalOptions","newModalTransition","newModalTransitionOptions"],"mappings":"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"}